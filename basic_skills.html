
<!DOCTYPE html>

<html>
  <head>
    <meta charset="ascii" />
    <title>2. Basic Skills &#8212; Mathematics in Lean 0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. The Natural Numbers" href="the_natural_numbers.html" />
    <link rel="prev" title="1. Introduction" href="introduction.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="basic-skills">
<span id="id1"></span><h1><span class="section-number">2. </span>Basic Skills<a class="headerlink" href="#basic-skills" title="Permalink to this headline">&#182;</a></h1>
<p>This chapter is designed to introduce you to the nuts and
bolts of mathematical reasoning in Lean: calculating,
applying lemmas and theorems, and carrying out proof
by induction.</p>
<div class="section" id="calculating">
<span id="id2"></span><h2><span class="section-number">2.1. </span>Calculating<a class="headerlink" href="#calculating" title="Permalink to this headline">&#182;</a></h2>
<p>We generally learn to carry out mathematical calculations
without thinking of them as proofs.
But when we justify each step in a calculation,
as Lean requires us to do,
the net result is a proof that the left-hand side of the calculation
is equal to the right-hand side.</p>
<p>In Lean, stating a theorem is tantamount to stating a goal,
namely, the goal of proving the theorem.
Lean provides the <code class="docutils literal notranslate"><span class="pre">rewrite</span></code> tactic, abbreviated <code class="docutils literal notranslate"><span class="pre">rw</span></code>,
to replace the left-hand side of an identity by the right-hand side
in the goal. If <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, and <code class="docutils literal notranslate"><span class="pre">c</span></code> are real numbers,
<code class="docutils literal notranslate"><span class="pre">mul_assoc</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">c</span></code>  is the identity <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">*</span> <span class="pre">b</span> <span class="pre">*</span> <span class="pre">c</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">*</span> <span class="pre">(b</span> <span class="pre">*</span> <span class="pre">c)</span></code>
and <code class="docutils literal notranslate"><span class="pre">mul_comm</span> <span class="pre">a</span> <span class="pre">b</span></code> is the identity <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">*</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">b</span> <span class="pre">*</span> <span class="pre">a</span></code>.
In Lean, multiplication associates to the left,
so the left-hand side of <code class="docutils literal notranslate"><span class="pre">mul_assoc</span></code> could also be written <code class="docutils literal notranslate"><span class="pre">(a</span> <span class="pre">*</span> <span class="pre">b)</span> <span class="pre">*</span> <span class="pre">c</span></code>.
However, it is generally good style to be mindful of Lean&#8217;s
notational conventions and leave out parentheses when Lean does as well.</p>
<p>Let&#8217;s try out <code class="docutils literal notranslate"><span class="pre">rw</span></code>.</p>
<div id="fourtytwo" style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%20%20import%20data.real.basic%0A%0A%20%20example%20(a%20b%20c%20%3A%20%E2%84%9D)%20%3A%20(a%20*%20b)%20*%20c%20%3D%20b%20*%20(a%20*%20c)%20%3A%3D%0A%20%20begin%0A%20%20%20%20rw%20mul_comm%20a%20b%2C%0A%20%20%20%20rw%20mul_assoc%20b%20a%20c%0A%20%20end" id="fourtytwo" target="_blank" tryitfile="../examples/basic_skills/fourtytwo.lean">
try it!</a></div><div class="highlight-lean notranslate" id="fourtytwo"><div class="highlight"><pre>  <span class="kn">import</span> <span class="n">data.real.basic</span>

  <span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
  <span class="kd">begin</span>
    <span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mul_assoc</span> <span class="n">b</span> <span class="n">a</span> <span class="n">c</span>
  <span class="kd">end</span>
</pre></div>
</div>
</div><p>As you move your cursor past each step of the proof,
you can see the goal of the proof change.
The <code class="docutils literal notranslate"><span class="pre">import</span></code> line at the beginning of the example
imports the theory of the real numbers from <code class="docutils literal notranslate"><span class="pre">mathlib</span></code>.
For the sake of brevity,
we generally suppress information like this when it
is repeated from example to example.
Clicking the <code class="docutils literal notranslate"><span class="pre">try</span> <span class="pre">it!</span></code> button displays all the
example as it is meant to be processed and checked by Lean.</p>
<p>You can type the <code class="docutils literal notranslate"><span class="pre">&#8477;</span></code> character as <code class="docutils literal notranslate"><span class="pre">\R</span></code> or <code class="docutils literal notranslate"><span class="pre">\real</span></code>
in the VS Code editor.
The symbol doesn&#8217;t appear until you hit space or the tab key.
If you hover over a symbol when reading a Lean file,
VS Code will show you the syntax that can be used to enter it.
If your keyboard does not have a backslash,
you can change the leading character by changing the
<code class="docutils literal notranslate"><span class="pre">lean.input.leader</span></code> setting in VS Code.</p>
<p>Try proving these identities,
in each case replacing <code class="docutils literal notranslate"><span class="pre">sorry</span></code> by a tactic proof.
With the <code class="docutils literal notranslate"><span class="pre">rw</span></code> tactic, you can use a left arrow (<code class="docutils literal notranslate"><span class="pre">\l</span></code>)
to reverse an identity.
For example, <code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">&#8592;</span> <span class="pre">mul_assoc</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">c</span></code>
replaces <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">*</span> <span class="pre">(b</span> <span class="pre">*</span> <span class="pre">c)</span></code> by <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">*</span> <span class="pre">b</span> <span class="pre">*</span> <span class="pre">c</span></code> in the current goal.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0A--%20BEGIN%0Aexample%20(a%20b%20c%20%3A%20%E2%84%9D)%20%3A%20(c%20*%20b)%20*%20a%20%3D%20b%20*%20(a%20*%20c)%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A%0Aexample%20(a%20b%20c%20%3A%20%E2%84%9D)%20%3A%20a%20*%20(b%20*%20c)%20%3D%20b%20*%20(a%20*%20c)%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_75.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>You can also use identities like <code class="docutils literal notranslate"><span class="pre">mul_assoc</span></code> and <code class="docutils literal notranslate"><span class="pre">mul_comm</span></code> without arguments.
In this case, the rewrite tactic tries to match the left-hand side with
an expression in the goal,
using the first pattern it finds.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0A--%20BEGIN%0Aexample%20(a%20b%20c%20%3A%20%E2%84%9D)%20%3A%20a%20*%20b%20*%20c%20%3D%20b%20*%20c%20*%20a%20%3A%3D%0Abegin%0A%20%20rw%20mul_assoc%2C%0A%20%20rw%20mul_comm%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_96.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">mul_assoc</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mul_comm</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>You can also provide <em>partial</em> information.
For example, <code class="docutils literal notranslate"><span class="pre">mul_comm</span> <span class="pre">a</span></code> matches any pattern of the form
<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">*</span> <span class="pre">?</span></code> and rewrites it to <code class="docutils literal notranslate"><span class="pre">?</span> <span class="pre">*</span> <span class="pre">a</span></code>.
Try doing the first of these examples without
providing any arguments at all,
and the second with only one argument.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0A--%20BEGIN%0Aexample%20(a%20b%20c%20%3A%20%E2%84%9D)%20%3A%20a%20*%20(b%20*%20c)%20%3D%20b%20*%20(c%20*%20a)%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A%0Aexample%20(a%20b%20c%20%3A%20%E2%84%9D)%20%3A%20a%20*%20(b%20*%20c)%20%3D%20b%20*%20(a%20*%20c)%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_115.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>In the Lean editor mode,
when a cursor is in the middle of a tactic proof,
Lean reports on the current <em>proof state</em>.
A typical proof state in Lean might look as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre>1 goal
x y : &#8469;,
h&#8321; : prime x,
h&#8322; : &#172;even x,
h&#8323; : y &gt; x
&#8866; y &#8805; 4
</pre></div>
</div>
<p>The lines before the one that begins with <code class="docutils literal notranslate"><span class="pre">&#8866;</span></code> denote the <em>context</em>:
they are the objects and assumptions currently at play.
In this example, these include two objects, <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>,
each a natural number.
They also include three assumptions,
labelled <code class="docutils literal notranslate"><span class="pre">h&#8321;</span></code>, <code class="docutils literal notranslate"><span class="pre">h&#8322;</span></code>, and <code class="docutils literal notranslate"><span class="pre">h&#8323;</span></code>.
In Lean, everything in a context is labelled with an identifier.
You can type these subscripted labels as <code class="docutils literal notranslate"><span class="pre">h\1</span></code>, <code class="docutils literal notranslate"><span class="pre">h\2</span></code>, and <code class="docutils literal notranslate"><span class="pre">h\3</span></code>,
but any legal identifiers would do:
you can use <code class="docutils literal notranslate"><span class="pre">h1</span></code>, <code class="docutils literal notranslate"><span class="pre">h2</span></code>, <code class="docutils literal notranslate"><span class="pre">h3</span></code> instead,
or <code class="docutils literal notranslate"><span class="pre">foo</span></code>, <code class="docutils literal notranslate"><span class="pre">bar</span></code>, and <code class="docutils literal notranslate"><span class="pre">baz</span></code>.
The last line represents the <em>goal</em>,
that is, the fact to be proved.
Sometimes people use <em>target</em> for the fact to be proved,
and <em>goal</em> for the combination of the context and the target.
In practice, the intended meaning is usually clear.</p>
<p>You an also use <code class="docutils literal notranslate"><span class="pre">rw</span></code> with facts from the local context.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0A--%20BEGIN%0Aexample%20(a%20b%20c%20d%20e%20f%20%3A%20%E2%84%9D)%20(h%20%3A%20a%20*%20b%20%3D%20c%20*%20d)%20(h'%20%3A%20e%20%3D%20f)%20%3A%0A%20%20a%20*%20(b%20*%20e)%20%3D%20c%20*%20(d%20*%20f)%20%3A%3D%0Abegin%0A%20%20rw%20h'%2C%0A%20%20rw%20%E2%86%90mul_assoc%2C%0A%20%20rw%20h%2C%0A%20%20rw%20mul_assoc%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_164.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">d</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">e</span><span class="o">)</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="o">(</span><span class="n">d</span> <span class="bp">*</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">h&#39;</span><span class="o">,</span>
  <span class="n">rw</span> <span class="bp">&#8592;</span><span class="n">mul_assoc</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mul_assoc</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Try these:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0A--%20BEGIN%0Aexample%20(a%20b%20c%20d%20e%20f%20%3A%20%E2%84%9D)%20(h%20%3A%20b%20*%20c%20%3D%20e%20*%20f)%20%3A%0A%20%20a%20*%20b%20*%20c%20*%20d%20%3D%20a%20*%20e%20*%20f%20*%20d%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A%0Aexample%20(a%20b%20c%20d%20%3A%20%E2%84%9D)%20(hyp%20%3A%20c%20%3D%20b%20*%20a%20-%20d)%20(hyp'%20%3A%20d%20%3D%20a%20*%20b)%20%3A%20c%20%3D%200%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_181.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">e</span> <span class="bp">*</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">e</span> <span class="bp">*</span> <span class="n">f</span> <span class="bp">*</span> <span class="n">d</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">hyp</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">d</span><span class="o">)</span> <span class="o">(</span><span class="n">hyp&#39;</span> <span class="o">:</span> <span class="n">d</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>For the second one, you can use the theorem <code class="docutils literal notranslate"><span class="pre">sub_self</span></code>,
where <code class="docutils literal notranslate"><span class="pre">sub_self</span> <span class="pre">a</span></code> is the identity <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">0</span></code>.</p>
<p>We now introduce some useful features of Lean.
First, multiple rewrite commands can be carried out
with a single command,
by listing the relevant identities within square brackets.
Second, when a tactic proof is just a single command,
we can replace the <code class="docutils literal notranslate"><span class="pre">begin</span> <span class="pre">...</span> <span class="pre">end</span></code> block with a <code class="docutils literal notranslate"><span class="pre">by</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0A--%20BEGIN%0Aexample%20(a%20b%20c%20d%20e%20f%20%3A%20%E2%84%9D)%20(h%20%3A%20a%20*%20b%20%3D%20c%20*%20d)%20(h'%20%3A%20e%20%3D%20f)%20%3A%0A%20%20a%20*%20(b%20*%20e)%20%3D%20c%20*%20(d%20*%20f)%20%3A%3D%0Abegin%0A%20%20rw%20%5Bh'%2C%20%E2%86%90mul_assoc%2C%20h%2C%20mul_assoc%5D%0Aend%0A%0Aexample%20(a%20b%20c%20d%20e%20f%20%3A%20%E2%84%9D)%20(h%20%3A%20a%20*%20b%20%3D%20c%20*%20d)%20(h'%20%3A%20e%20%3D%20f)%20%3A%0A%20%20a%20*%20(b%20*%20e)%20%3D%20c%20*%20(d%20*%20f)%20%3A%3D%0Aby%20rw%20%5Bh'%2C%20%E2%86%90mul_assoc%2C%20h%2C%20mul_assoc%5D%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_208.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">d</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">e</span><span class="o">)</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="o">(</span><span class="n">d</span> <span class="bp">*</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h&#39;</span><span class="o">,</span> <span class="bp">&#8592;</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">d</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">e</span><span class="o">)</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="o">(</span><span class="n">d</span> <span class="bp">*</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h&#39;</span><span class="o">,</span> <span class="bp">&#8592;</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
</pre></div>
</div>
</div><p>You still see the incremental progress by placing the cursor after
a comma in any list of rewrites.</p>
<p>Another trick is that we can declare variables once and forall outside
an example or theorem.
When Lean sees them mentioned in the statement of the theorem,
it includes them automatically.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0A--%20BEGIN%0Avariables%20a%20b%20c%20d%20e%20f%20%3A%20%E2%84%9D%0A%0Aexample%20(h%20%3A%20a%20*%20b%20%3D%20c%20*%20d)%20(h'%20%3A%20e%20%3D%20f)%20%3A%0A%20%20a%20*%20(b%20*%20e)%20%3D%20c%20*%20(d%20*%20f)%20%3A%3D%0Aby%20rw%20%5Bh'%2C%20%E2%86%90mul_assoc%2C%20h%2C%20mul_assoc%5D%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_232.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">variables</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="o">:</span> <span class="n">&#8477;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">d</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">e</span><span class="o">)</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="o">(</span><span class="n">d</span> <span class="bp">*</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h&#39;</span><span class="o">,</span> <span class="bp">&#8592;</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span>
</pre></div>
</div>
</div><p>We can delimit the scope of the declaration by putting it
in a <code class="docutils literal notranslate"><span class="pre">section</span> <span class="pre">...</span> <span class="pre">end</span></code> block.
Finally, Lean provides us with a command
to determine the type of an expression:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0A--%20BEGIN%0Asection%0Avariables%20a%20b%20c%20%3A%20%E2%84%9D%0A%0A%23check%20a%0A%23check%20a%20%2B%20b%0A%23check%20(a%20%3A%20%E2%84%9D)%0A%23check%20mul_comm%20a%20b%0A%23check%20(mul_comm%20a%20b%20%3A%20a%20*%20b%20%3D%20b%20*%20a)%0A%23check%20mul_assoc%20c%20a%20b%0A%23check%20mul_comm%20a%0A%23check%20mul_comm%0A%23check%20%40mul_comm%0A%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_249.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">section</span>
<span class="kd">variables</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span>

<span class="k">#check</span> <span class="n">a</span>
<span class="k">#check</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span>
<span class="k">#check</span> <span class="n">mul_comm</span> <span class="n">a</span> <span class="n">b</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">mul_comm</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="n">mul_assoc</span> <span class="n">c</span> <span class="n">a</span> <span class="n">b</span>
<span class="k">#check</span> <span class="n">mul_comm</span> <span class="n">a</span>
<span class="k">#check</span> <span class="n">mul_comm</span>
<span class="k">#check</span> <span class="bp">@</span><span class="n">mul_comm</span>

<span class="kd">end</span>
</pre></div>
</div>
</div><p>The <code class="docutils literal notranslate"><span class="pre">#check</span></code> command works for both objects and facts.
In response to the command <code class="docutils literal notranslate"><span class="pre">#check</span> <span class="pre">a</span></code>, Lean reports that <code class="docutils literal notranslate"><span class="pre">a</span></code> has type <code class="docutils literal notranslate"><span class="pre">&#8477;</span></code>.
In response to the command <code class="docutils literal notranslate"><span class="pre">#check</span> <span class="pre">mul_comm</span> <span class="pre">a</span> <span class="pre">b</span></code>,
Lean reports that <code class="docutils literal notranslate"><span class="pre">mul_comm</span> <span class="pre">a</span> <span class="pre">b</span></code> is a proof of the fact <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">b</span> <span class="pre">+</span> <span class="pre">a</span></code>.
The command <code class="docutils literal notranslate"><span class="pre">#check</span> <span class="pre">(a</span> <span class="pre">:</span> <span class="pre">&#8477;)</span></code> states our expectation that the
type of <code class="docutils literal notranslate"><span class="pre">a</span></code> is <code class="docutils literal notranslate"><span class="pre">&#8477;</span></code>,
and Lean will raise an error if that is not the case.
We will explain the output of the last three <code class="docutils literal notranslate"><span class="pre">#check</span></code> commands later,
but in the meanwhile, you can take a look at them,
and experiment with some <code class="docutils literal notranslate"><span class="pre">#check</span></code> commands of your own.</p>
<p>Let&#8217;s try some more examples. The theorem <code class="docutils literal notranslate"><span class="pre">two_mul</span> <span class="pre">a</span></code> says
that <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">a</span></code>. The theorems <code class="docutils literal notranslate"><span class="pre">add_mul</span></code> and <code class="docutils literal notranslate"><span class="pre">mul_add</span></code>
express the distributivity of multiplication over addition,
and the theorem <code class="docutils literal notranslate"><span class="pre">add_assoc</span></code> expresses the associativity of addition.
Use the <code class="docutils literal notranslate"><span class="pre">#check</span></code> command to see the precise statements.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%20(a%20%2B%20b)%20*%20(a%20%2B%20b)%20%3D%20a%20*%20a%20%2B%202%20*%20(a%20*%20b)%20%2B%20b%20*%20b%20%3A%3D%0Abegin%0A%20%20rw%20%5Bmul_add%2C%20add_mul%2C%20add_mul%5D%2C%0A%20%20rw%20%5B%E2%86%90add_assoc%2C%20add_assoc%20(a%20*%20a)%5D%2C%0A%20%20rw%20%5Bmul_comm%20b%20a%2C%20%E2%86%90two_mul%5D%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_287.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">add_mul</span><span class="o">,</span> <span class="n">add_mul</span><span class="o">],</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">&#8592;</span><span class="n">add_assoc</span><span class="o">,</span> <span class="n">add_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)],</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_comm</span> <span class="n">b</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8592;</span><span class="n">two_mul</span><span class="o">]</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Whereas it is possible to figure out what it going on in this proof
by stepping through it in the editor,
it is hard to read on its own.
Lean provides a more structured way of writing proofs like this
using the <code class="docutils literal notranslate"><span class="pre">calc</span></code> keyword.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%20(a%20%2B%20b)%20*%20(a%20%2B%20b)%20%3D%20a%20*%20a%20%2B%202%20*%20(a%20*%20b)%20%2B%20b%20*%20b%20%3A%3D%0Acalc%0A%20%20(a%20%2B%20b)%20*%20(a%20%2B%20b)%0A%20%20%20%20%20%20%3D%20a%20*%20a%20%2B%20b%20*%20a%20%2B%20(a%20*%20b%20%2B%20b%20*%20b)%20%3A%0A%20%20%20%20%20%20%20%20%20%20by%20rw%20%5Bmul_add%2C%20add_mul%2C%20add_mul%5D%0A%20%20...%20%3D%20a%20*%20a%20%2B%20(b%20*%20a%20%2B%20a%20*%20b)%20%2B%20b%20*%20b%20%3A%0A%20%20%20%20%20%20%20%20%20%20by%20rw%20%5B%E2%86%90add_assoc%2C%20add_assoc%20(a%20*%20a)%5D%0A%20%20...%20%3D%20a%20*%20a%20%2B%202%20*%20(a%20*%20b)%20%2B%20b%20*%20b%20%20%20%20%20%3A%0A%20%20%20%20%20%20%20%20%20%20by%20rw%20%5Bmul_comm%20b%20a%2C%20%E2%86%90two_mul%5D%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_308.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">calc</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span>
      <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
          <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">add_mul</span><span class="o">,</span> <span class="n">add_mul</span><span class="o">]</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span>
          <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">&#8592;</span><span class="n">add_assoc</span><span class="o">,</span> <span class="n">add_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)]</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span>     <span class="o">:</span>
          <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_comm</span> <span class="n">b</span> <span class="n">a</span><span class="o">,</span> <span class="bp">&#8592;</span><span class="n">two_mul</span><span class="o">]</span>
</pre></div>
</div>
</div><p>Notice that there is no more <code class="docutils literal notranslate"><span class="pre">begin</span> <span class="pre">...</span> <span class="pre">end</span></code> block:
an expression that begins with <code class="docutils literal notranslate"><span class="pre">calc</span></code> is a <em>proof term</em>.
A <code class="docutils literal notranslate"><span class="pre">calc</span></code> expression can also be used inside a tactic proof,
but Lean interprets it as the instruction to use the resulting
proof term to solve the goal exactly.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">calc</span></code> syntax is finicky: the dots and colons and justification
have to be in the format indicated above.
Lean ignores whitespace like spaces, tabs, and returns,
so you have some flexibility to make the calculation look more attractive.
One way to write a <code class="docutils literal notranslate"><span class="pre">calc</span></code> proof is to outline it first
using the <code class="docutils literal notranslate"><span class="pre">sorry</span></code> tactic for justification,
make sure Lean accepts the expression modulo these,
and then justify the individual steps using tactics.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%20(a%20%2B%20b)%20*%20(a%20%2B%20b)%20%3D%20a%20*%20a%20%2B%202%20*%20(a%20*%20b)%20%2B%20b%20*%20b%20%3A%3D%0Acalc%0A%20%20(a%20%2B%20b)%20*%20(a%20%2B%20b)%0A%20%20%20%20%20%20%3D%20a%20*%20a%20%2B%20b%20*%20a%20%2B%20(a%20*%20b%20%2B%20b%20*%20b)%20%3A%0A%20%20%20%20begin%0A%20%20%20%20%20%20sorry%0A%20%20%20%20end%0A%20%20...%20%3D%20a%20*%20a%20%2B%20(b%20*%20a%20%2B%20a%20*%20b)%20%2B%20b%20*%20b%20%3A%20by%20sorry%0A%20%20...%20%3D%20a%20*%20a%20%2B%202%20*%20(a%20*%20b)%20%2B%20b%20*%20b%20%20%20%20%20%3A%20by%20sorry%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_341.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">calc</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span>
      <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
    <span class="kd">begin</span>
      <span class="n">sorry</span>
    <span class="kd">end</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">sorry</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span>     <span class="o">:</span> <span class="kd">by</span> <span class="n">sorry</span>
</pre></div>
</div>
</div><p>Try proving the following identity using both a pure <code class="docutils literal notranslate"><span class="pre">rw</span></code> proof
and a more structured <code class="docutils literal notranslate"><span class="pre">calc</span></code> proof:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20d%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%20(a%20%2B%20b)%20*%20(c%20%2B%20d)%20%3D%20a%20*%20c%20%2B%20a%20*%20d%20%2B%20b%20*%20c%20%2B%20b%20*%20d%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_362.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">c</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">d</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>The following exercise is a little more challenging.
You can use the theorems listed underneath.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20d%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20(a%20b%20%3A%20%E2%84%9D)%20%3A%20(a%20%2B%20b)%20*%20(a%20-%20b)%20%3D%20a%5E2%20-%20b%5E2%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A%0A%23check%20pow_two%20a%0A%23check%20mul_sub%20a%20b%20c%0A%23check%20add_mul%20a%20b%20c%0A%23check%20add_sub%20a%20b%20c%0A%23check%20sub_sub%20a%20b%20c%0A%23check%20add_zero%20a%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_376.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>

<span class="k">#check</span> <span class="n">pow_two</span> <span class="n">a</span>
<span class="k">#check</span> <span class="n">mul_sub</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="k">#check</span> <span class="n">add_mul</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="k">#check</span> <span class="n">add_sub</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="k">#check</span> <span class="n">sub_sub</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="k">#check</span> <span class="n">add_zero</span> <span class="n">a</span>
</pre></div>
</div>
</div><p>We can also perform rewriting in an assumption in the context.
For example, <code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">mul_comm</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">at</span> <span class="pre">hyp</span></code> replaces <code class="docutils literal notranslate"><span class="pre">a*b</span></code> by <code class="docutils literal notranslate"><span class="pre">b*a</span></code>
in the assumption <code class="docutils literal notranslate"><span class="pre">hyp</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20d%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20(a%20b%20c%20d%20%3A%20%E2%84%9D)%20(hyp%20%3A%20c%20%3D%20d%20*%20a%20%2B%20b)%20(hyp'%20%3A%20b%20%3D%20a%20*%20d)%20%3A%0A%20%20c%20%3D%202%20*%20a%20*%20d%20%3A%3D%0Abegin%0A%20%20rw%20hyp'%20at%20hyp%2C%0A%20%20rw%20mul_comm%20d%20a%20at%20hyp%2C%0A%20%20rw%20%E2%86%90%20two_mul%20(a*d)%20at%20hyp%2C%0A%20%20rw%20%E2%86%90%20mul_assoc%202%20a%20d%20at%20hyp%2C%0A%20%20exact%20hyp%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_400.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">hyp</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">hyp&#39;</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">c</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">d</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">hyp&#39;</span> <span class="n">at</span> <span class="n">hyp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">d</span> <span class="n">a</span> <span class="n">at</span> <span class="n">hyp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="bp">&#8592;</span> <span class="n">two_mul</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">d</span><span class="o">)</span> <span class="n">at</span> <span class="n">hyp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="bp">&#8592;</span> <span class="n">mul_assoc</span> <span class="mi">2</span> <span class="n">a</span> <span class="n">d</span> <span class="n">at</span> <span class="n">hyp</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">hyp</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>In the last step, the <code class="docutils literal notranslate"><span class="pre">exact</span></code> tactic can use <code class="docutils literal notranslate"><span class="pre">hyp</span></code> to solve the goal
because at that point <code class="docutils literal notranslate"><span class="pre">hyp</span></code> matches the goal exactly.</p>
<p>We close this section by noting that <code class="docutils literal notranslate"><span class="pre">mathlib</span></code> provides a
useful bit of automation with a <code class="docutils literal notranslate"><span class="pre">ring</span></code> tactic,
which is designed to prove identities in any ring.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20d%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%20(c%20*%20b)%20*%20a%20%3D%20b%20*%20(a%20*%20c)%20%3A%3D%0Aby%20ring%0A%0Aexample%20%3A%20(a%20%2B%20b)%20*%20(a%20%2B%20b)%20%3D%20a%20*%20a%20%2B%202%20*%20(a%20*%20b)%20%2B%20b%20*%20b%20%3A%3D%0Aby%20ring%0A%0Aexample%20%3A%20(a%20%2B%20b)%20*%20(a%20-%20b)%20%3D%20a%5E2%20-%20b%5E2%20%3A%3D%0Aby%20ring%0A%0Aexample%20(hyp%20%3A%20c%20%3D%20d%20*%20a%20%2B%20b)%20(hyp'%20%3A%20b%20%3D%20a%20*%20d)%20%3A%0A%20%20c%20%3D%202%20*%20a%20*%20d%20%3A%3D%0Abegin%0A%20%20rw%20%5Bhyp%2C%20hyp'%5D%2C%0A%20%20ring%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_425.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">ring</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">ring</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">ring</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">hyp</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">hyp&#39;</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">c</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">d</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">hyp</span><span class="o">,</span> <span class="n">hyp&#39;</span><span class="o">],</span>
  <span class="n">ring</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>The <code class="docutils literal notranslate"><span class="pre">ring</span></code> tactic is imported indirectly when we
import <code class="docutils literal notranslate"><span class="pre">data.real.basic</span></code>,
but we will see in the next section that it can be used
for calculations on structures other than the real numbers.
It can be imported explicitly with the command
<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">tactic</span></code>.</p>
</div>
<div class="section" id="proving-identities-in-algebraic-structures">
<span id="id3"></span><h2><span class="section-number">2.2. </span>Proving Identities in Algebraic Structures<a class="headerlink" href="#proving-identities-in-algebraic-structures" title="Permalink to this headline">&#182;</a></h2>
<p>Mathematically, a ring consists of a set, <span class="math notranslate nohighlight">\(R\)</span>,
operations <span class="math notranslate nohighlight">\(+\)</span> <span class="math notranslate nohighlight">\(\times\)</span>, and constants <span class="math notranslate nohighlight">\(0\)</span>
and <span class="math notranslate nohighlight">\(1\)</span>, and an operation <span class="math notranslate nohighlight">\(x \mapsto -x\)</span> such that:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(R\)</span> with <span class="math notranslate nohighlight">\(+\)</span> is an <em>abelian group</em>, with <span class="math notranslate nohighlight">\(0\)</span>
as the additive identity and negation as inverse.</p></li>
<li><p>Multiplication is associative with identity <span class="math notranslate nohighlight">\(1\)</span>,
and multiplication distributes over addition.</p></li>
</ul>
<p>In Lean, we base our algebraic structures on <em>types</em> rather than sets.
Modulo this difference, we can take the ring axioms to be as follows:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20(R%20%3A%20Type*)%20%5Bcomm_ring%20R%5D%0A%0A%23check%20(add_assoc%20%3A%20%E2%88%80%20a%20b%20c%20%3A%20R%2C%20a%20%2B%20b%20%2B%20c%20%3D%20a%20%2B%20(b%20%2B%20c))%0A%23check%20(add_comm%20%3A%20%E2%88%80%20a%20b%20%3A%20R%2C%20a%20%2B%20b%20%3D%20b%20%2B%20a)%0A%23check%20(zero_add%20%3A%20%E2%88%80%20a%20%3A%20R%2C%200%20%2B%20a%20%3D%20a)%0A%23check%20(add_left_neg%20%3A%20%E2%88%80%20a%20%3A%20R%2C%20-a%20%2B%20a%20%3D%200)%0A%23check%20(mul_assoc%20%3A%20%E2%88%80%20a%20b%20c%20%3A%20R%2C%20a%20*%20b%20*%20c%20%3D%20a%20*%20(b%20*%20c))%0A%23check%20(mul_one%20%3A%20%E2%88%80%20a%20%3A%20R%2C%20a%20*%201%20%3D%20a)%0A%23check%20(one_mul%20%3A%20%E2%88%80%20a%20%3A%20R%2C%201%20*%20a%20%3D%20a)%0A%23check%20(mul_add%20%3A%20%E2%88%80%20a%20b%20c%20%3A%20R%2C%20a%20*%20(b%20%2B%20c)%20%3D%20a%20*%20b%20%2B%20a%20*%20c)%0A%23check%20(add_mul%20%3A%20%E2%88%80%20a%20b%20c%20%3A%20R%2C%20(a%20%2B%20b)%20*%20c%20%3D%20a%20*%20c%20%2B%20b%20*%20c)" target="_blank" tryitfile="../examples/basic_skills/unnamed_474.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">add_assoc</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c</span><span class="o">))</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">add_comm</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">zero_add</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">add_left_neg</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">mul_one</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">mul_add</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">add_mul</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
</pre></div>
</div>
</div><p>You will learn more about the square brackets in the first line later,
but for the time being,
suffice it to say that the declaration gives us a type, <code class="docutils literal notranslate"><span class="pre">R</span></code>,
and a ring structure on <code class="docutils literal notranslate"><span class="pre">R</span></code>.
Lean then allows us to use generic ring notation with elements of <code class="docutils literal notranslate"><span class="pre">R</span></code>,
and to make use of a library of theorems about rings.</p>
<p>The names of some of the theorems should look familiar:
they are exactly the ones we used to calculate with the real numbers
in the last section.
Lean is good not only for proving things about concrete mathematical
structures like the natural numbers and the integers,
but also for proving things about abstract structures,
characterized axiomatically, like rings.
Moreover, Lean supports <em>generic reasoning</em> about
both abstract and concrete structures,
and can be trained to recognized appropriate instances.
So any theorem about rings can be applied to concrete rings
like the integers, <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code>, the rational numbers,  <code class="docutils literal notranslate"><span class="pre">&#8474;</span></code>,
and the complex numbers <code class="docutils literal notranslate"><span class="pre">&#8450;</span></code>.
It can also be applied to any instance of an abstract
structure that extends rings,
such as any <em>ordered ring</em> or any <em>field</em>.</p>
<p>Not all important properties of the real numbers hold in an
arbitrary ring, however.
For example, multiplication on the real numbers
is commutative,
but that does not hold in general.
If you have taken a course in linear algebra,
you will recognize that, for every <span class="math notranslate nohighlight">\(n\)</span>,
the <span class="math notranslate nohighlight">\(n\)</span> by <span class="math notranslate nohighlight">\(n\)</span> matrices of real numbers
form a ring in which commutativity fails. If we declare <code class="docutils literal notranslate"><span class="pre">R</span></code> to be a
<em>commutative</em> ring, in fact, all the theorems
in the last section continue to hold when we replace
<code class="docutils literal notranslate"><span class="pre">&#8477;</span></code> by <code class="docutils literal notranslate"><span class="pre">R</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Avariables%20(R%20%3A%20Type*)%20%5Bcomm_ring%20R%5D%0Avariables%20a%20b%20c%20d%20%3A%20R%0A%0Aexample%20%3A%20(c%20*%20b)%20*%20a%20%3D%20b%20*%20(a%20*%20c)%20%3A%3D%0Aby%20ring%0A%0Aexample%20%3A%20(a%20%2B%20b)%20*%20(a%20%2B%20b)%20%3D%20a%20*%20a%20%2B%202%20*%20(a%20*%20b)%20%2B%20b%20*%20b%20%3A%3D%0Aby%20ring%0A%0Aexample%20%3A%20(a%20%2B%20b)%20*%20(a%20-%20b)%20%3D%20a%5E2%20-%20b%5E2%20%3A%3D%0Aby%20ring%0A%0Aexample%20(hyp%20%3A%20c%20%3D%20d%20*%20a%20%2B%20b)%20(hyp'%20%3A%20b%20%3D%20a%20*%20d)%20%3A%0A%20%20c%20%3D%202%20*%20a%20*%20d%20%3A%3D%0Abegin%0A%20%20rw%20%5Bhyp%2C%20hyp'%5D%2C%0A%20%20ring%0Aend" target="_blank" tryitfile="../examples/basic_skills/unnamed_525.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span>
<span class="kd">variables</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">R</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">ring</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">ring</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">ring</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">hyp</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">hyp&#39;</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">c</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">d</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">hyp</span><span class="o">,</span> <span class="n">hyp&#39;</span><span class="o">],</span>
  <span class="n">ring</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>We leave it to you to check that all the other proofs go through unchanged.</p>
<p>The goal of this section is to strengthen the skills
you have developed in the last section
and apply them to reasoning axiomatically about rings.
We will start with the axioms listed above,
and use them to derive other facts.
Most of the facts we prove are already in <code class="docutils literal notranslate"><span class="pre">mathlib</span></code>.
We will give the versions we prove the same names
to help you learn the contents of the library
as well as the naming conventions.
To avoid error messages from Lean,
we will put our versions in a new <em>namespace</em>
called <code class="docutils literal notranslate"><span class="pre">my_ring.</span></code></p>
<p>The next example shows that we do not need <code class="docutils literal notranslate"><span class="pre">add_zero</span></code> or <code class="docutils literal notranslate"><span class="pre">add_right_neg</span></code>
as ring axioms, because they follow from the other axioms.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20my_ring%0A%0Avariables%20%7BR%20%3A%20Type*%7D%20%5Bring%20R%5D%0A%0Atheorem%20add_zero%20(a%20%3A%20R)%20%3A%20a%20%2B%200%20%3D%20a%20%3A%3D%0Aby%20rw%20%5Badd_comm%2C%20zero_add%5D%0A%0Atheorem%20add_right_neg%20(a%20%3A%20R)%20%3A%20a%20%2B%20-a%20%3D%200%20%3A%3D%0Aby%20rw%20%5Badd_comm%2C%20add_left_neg%5D%0A%0Aend%20my_ring%0A%0A%23check%20%40my_ring.add_zero%0A%23check%20%40add_zero" target="_blank" tryitfile="../examples/basic_skills/unnamed_566.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">namespace</span> <span class="n">my_ring</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">R</span><span class="o">]</span>

<span class="kd">theorem</span> <span class="n">add_zero</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">add_comm</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">]</span>

<span class="kd">theorem</span> <span class="n">add_right_neg</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">add_comm</span><span class="o">,</span> <span class="n">add_left_neg</span><span class="o">]</span>

<span class="kd">end</span> <span class="n">my_ring</span>

<span class="k">#check</span> <span class="bp">@</span><span class="n">my_ring.add_zero</span>
<span class="k">#check</span> <span class="bp">@</span><span class="n">add_zero</span>
</pre></div>
</div>
</div><p>The net effect is that we can temporarily reprove a theorem in the library,
and then go on using the library version after that.
But don&#8217;t cheat!
In the exercises that follow, take care to use only the
general facts about rings that we have proved earlier in this section.</p>
<p>(If you are paying careful attention, you may have noticed that we
changed the round brackets in <code class="docutils literal notranslate"><span class="pre">(R</span> <span class="pre">:</span> <span class="pre">Type*)</span></code> for
curly brackets in <code class="docutils literal notranslate"><span class="pre">{R</span> <span class="pre">:</span> <span class="pre">Type*}</span></code>.
This declares <code class="docutils literal notranslate"><span class="pre">R</span></code> to be an <em>implicit argument</em>.
We will explain what this means in a moment,
but don&#8217;t worry about it in the meanwhile.)</p>
<p>Here is a useful theorem:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20my_ring%0A%0Avariables%20%7BR%20%3A%20Type*%7D%20%5Bring%20R%5D%0A%0A--%20BEGIN%0Atheorem%20neg_add_cancel_left%20(a%20b%20%3A%20R)%20%3A%20-a%20%2B%20(a%20%2B%20b)%20%3D%20b%20%3A%3D%0Aby%20rw%20%5B%E2%86%90add_assoc%2C%20add_left_neg%2C%20zero_add%5D%0A--%20END%0A%0Aend%20my_ring" target="_blank" tryitfile="../examples/basic_skills/unnamed_598.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">neg_add_cancel_left</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">&#8592;</span><span class="n">add_assoc</span><span class="o">,</span> <span class="n">add_left_neg</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">]</span>
</pre></div>
</div>
</div><p>Prove the companion version:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20my_ring%0A%0Avariables%20%7BR%20%3A%20Type*%7D%20%5Bring%20R%5D%0A%0A--%20BEGIN%0Atheorem%20neg_add_cancel_right%20(a%20b%20%3A%20R)%20%3A%20(a%20%2B%20b)%20%2B%20-b%20%3D%20a%20%3A%3D%0Asorry%0A--%20END%0A%0Aend%20my_ring" target="_blank" tryitfile="../examples/basic_skills/unnamed_613.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">neg_add_cancel_right</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="bp">-</span><span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>Use these to prove the following:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20my_ring%0A%0Avariables%20%7BR%20%3A%20Type*%7D%20%5Bring%20R%5D%0A%0A--%20BEGIN%0Atheorem%20add_left_cancel%20%7Ba%20b%20c%20%3A%20R%7D%20(h%20%3A%20a%20%2B%20b%20%3D%20a%20%2B%20c)%20%3A%20b%20%3D%20c%20%3A%3D%0Asorry%0A%0Atheorem%20add_right_cancel%20%7Ba%20b%20c%20%3A%20R%7D%20(h%20%3A%20a%20%2B%20b%20%3D%20c%20%2B%20b)%20%3A%20a%20%3D%20c%20%3A%3D%0Asorry%0A--%20END%0A%0Aend%20my_ring" target="_blank" tryitfile="../examples/basic_skills/unnamed_628.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">add_left_cancel</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">theorem</span> <span class="n">add_right_cancel</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>If you are clever, you can do each of them with three rewrites.</p>
<p>We can now explain the use of the curly braces.
Imagine you are in a situation where you have <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, and <code class="docutils literal notranslate"><span class="pre">c</span></code>
in your context,
as well as a hypothesis <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">c</span></code>,
and you would like to draw the conclusion <code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">=</span> <span class="pre">c</span></code>.
In Lean, you can apply a theorem to hypotheses and facts just
the same way that you can apply them to objects,
so you might think that <code class="docutils literal notranslate"><span class="pre">add_left_cancel</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">c</span> <span class="pre">h</span></code> is a
proof of the fact <code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">=</span> <span class="pre">c</span></code>.
But notice that explicitly writing <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, and <code class="docutils literal notranslate"><span class="pre">c</span></code>
is redundant, because the hypothesis <code class="docutils literal notranslate"><span class="pre">h</span></code> makes it clear that
those are the objects we have in mind.
In this case, typing a few extra characters is not onerous,
but if we wanted to apply <code class="docutils literal notranslate"><span class="pre">add_left_cancel</span></code> to more complicated expressions,
writing them would be tedious.
In cases like these,
Lean allows us to mark arguments as <em>implicit</em>,
meaning that they are supposed to be left out and inferred by other means,
such as later arguments and hypotheses.
The curly brackets in <code class="docutils literal notranslate"><span class="pre">{a</span> <span class="pre">b</span> <span class="pre">c</span> <span class="pre">:</span> <span class="pre">R}</span></code> do exactly that.
So, given the statement of the theorem above,
the correct expression is simply <code class="docutils literal notranslate"><span class="pre">add_left_cancel</span> <span class="pre">h</span></code>.</p>
<p>To illustrate, let us show that <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">*</span> <span class="pre">0</span> <span class="pre">=</span> <span class="pre">0</span></code>
follows from the ring axioms.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20my_ring%0A%0Avariables%20%7BR%20%3A%20Type*%7D%20%5Bring%20R%5D%0A%0A--%20BEGIN%0Atheorem%20mul_zero%20(a%20%3A%20R)%20%3A%20a%20*%200%20%3D%200%20%3A%3D%0Abegin%0A%20%20have%20h%20%3A%20a%20*%200%20%2B%20a%20*%200%20%3D%20a%20*%200%20%2B%200%2C%0A%20%20%7B%20rw%20%5B%E2%86%90mul_add%2C%20add_zero%2C%20add_zero%5D%20%7D%2C%0A%20%20rw%20add_left_cancel%20h%0Aend%0A--%20END%0A%0Aend%20my_ring" target="_blank" tryitfile="../examples/basic_skills/unnamed_672.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">mul_zero</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">0</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">&#8592;</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">add_zero</span><span class="o">,</span> <span class="n">add_zero</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="n">add_left_cancel</span> <span class="n">h</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>We have used a new trick!
If you step through the proof,
you can see what is going on.
The <code class="docutils literal notranslate"><span class="pre">have</span></code> tactic introduces a new goal,
<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">*</span> <span class="pre">0</span> <span class="pre">+</span> <span class="pre">a</span> <span class="pre">*</span> <span class="pre">0</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">*</span> <span class="pre">0</span> <span class="pre">+</span> <span class="pre">0</span></code>,
with the same context as the original goal.
In the next line, we could have omitted the curly brackets,
which serve as an inner <code class="docutils literal notranslate"><span class="pre">begin</span> <span class="pre">...</span> <span class="pre">end</span></code> pair.
Using them promotes a modular style of proof:
the part of the proof inside the brackets establishes the goal
that was introduced by the <code class="docutils literal notranslate"><span class="pre">have</span></code>.
After that, we are back to proving the original goal,
except a new hypothesis <code class="docutils literal notranslate"><span class="pre">h</span></code> has been added:
having proved it, we are now free to use it.
At this point, the goal is exactly the result of <code class="docutils literal notranslate"><span class="pre">add_left_cancel</span> <span class="pre">h</span></code>.
We could equally well have closed the proof with
<code class="docutils literal notranslate"><span class="pre">apply</span> <span class="pre">add_left_cancel</span> <span class="pre">h</span></code> or <code class="docutils literal notranslate"><span class="pre">exact</span> <span class="pre">add_left_cancel</span> <span class="pre">h</span></code>.
We will discuss <code class="docutils literal notranslate"><span class="pre">apply</span></code> and <code class="docutils literal notranslate"><span class="pre">exact</span></code> in the next section.</p>
<p>Remember that multiplication is not assumed to be commutative,
so the following theorem also requires some work.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20my_ring%0A%0Avariables%20%7BR%20%3A%20Type*%7D%20%5Bring%20R%5D%0A%0A--%20BEGIN%0Atheorem%20zero_mul%20(a%20%3A%20R)%20%3A%200%20*%20a%20%3D%200%20%3A%3D%0Asorry%0A--%20END%0A%0Aend%20my_ring" target="_blank" tryitfile="../examples/basic_skills/unnamed_711.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">zero_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>By now, you should also be able replace each <code class="docutils literal notranslate"><span class="pre">sorry</span></code> in the next
exercise with a proof,
still using only facts about rings that we have
established in this section.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20my_ring%0A%0Avariables%20%7BR%20%3A%20Type*%7D%20%5Bring%20R%5D%0A%0A--%20BEGIN%0Atheorem%20neg_eq_of_add_eq_zero%20%7Ba%20b%20%3A%20R%7D%20(h%20%3A%20a%20%2B%20b%20%3D%200)%20%3A%20-a%20%3D%20b%20%3A%3D%0Asorry%0A%0Atheorem%20eq_neg_of_add_eq_zero%20%7Ba%20b%20%3A%20R%7D%20(h%20%3A%20a%20%2B%20b%20%3D%200)%20%3A%20a%20%3D%20-b%20%3A%3D%0Asorry%0A%0Atheorem%20neg_zero%20%3A%20(-0%20%3A%20R)%20%3D%200%20%3A%3D%0Abegin%0A%20%20apply%20neg_eq_of_add_eq_zero%2C%0A%20%20rw%20add_zero%0Aend%0A%0Atheorem%20neg_neg%20(a%20%3A%20R)%20%3A%20-(-a)%20%3D%20a%20%3A%3D%0Asorry%0A--%20END%0A%0Aend%20my_ring" target="_blank" tryitfile="../examples/basic_skills/unnamed_729.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">neg_eq_of_add_eq_zero</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">theorem</span> <span class="n">eq_neg_of_add_eq_zero</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">b</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">theorem</span> <span class="n">neg_zero</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span><span class="mi">0</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">neg_eq_of_add_eq_zero</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">add_zero</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">neg_neg</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="bp">-</span><span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>We had to use the annotation <code class="docutils literal notranslate"><span class="pre">(-0</span> <span class="pre">:</span> <span class="pre">R)</span></code> instead of <code class="docutils literal notranslate"><span class="pre">0</span></code> in the third theorem
because without specifying <code class="docutils literal notranslate"><span class="pre">R</span></code>
it is impossible for Lean to infer which <code class="docutils literal notranslate"><span class="pre">0</span></code> we have in mind.</p>
<p>In Lean, subtraction in a ring is defined to be
addition of the additive inverse.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20my_ring%0A%0Avariables%20%7BR%20%3A%20Type*%7D%20%5Bring%20R%5D%0A%0A--%20BEGIN%0Atheorem%20sub_eq_add_neg%20(a%20b%20%3A%20R)%20%3A%20a%20-%20b%20%3D%20a%20%2B%20-b%20%3A%3D%0Arfl%0A%0Aexample%20(a%20b%20%3A%20R)%20%3A%20a%20-%20b%20%3D%20a%20%2B%20-b%20%3A%3D%0Aby%20reflexivity%0A--%20END%0A%0Aend%20my_ring" target="_blank" tryitfile="../examples/basic_skills/unnamed_761.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">sub_eq_add_neg</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="bp">-</span><span class="n">b</span> <span class="o">:=</span>
<span class="n">rfl</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="bp">-</span><span class="n">b</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">reflexivity</span>
</pre></div>
</div>
</div><p>The proof term <code class="docutils literal notranslate"><span class="pre">rfl</span></code> is short for <code class="docutils literal notranslate"><span class="pre">reflexivity</span></code>.
Presenting it as a proof of <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">-b</span></code> forces Lean
to unfold the definition and recognize both sides as being the same.
The <code class="docutils literal notranslate"><span class="pre">reflexivity</span></code> tactic, which can be abbreviated as <code class="docutils literal notranslate"><span class="pre">refl</span></code>,
does the same.
This is an instance of what is known as a <em>definitional equality</em>
in Lean&#8217;s underlying logic.
This means that not only can one rewrite with <code class="docutils literal notranslate"><span class="pre">sub_eq_add_neg</span></code>
to replace <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">-b</span></code>,
but in some contexts you can use the two sides of the equation
interchangeably.
For example, you now have enough information to prove the theorem
<code class="docutils literal notranslate"><span class="pre">self_sub</span></code> from the last section:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20my_ring%0A%0Avariables%20%7BR%20%3A%20Type*%7D%20%5Bring%20R%5D%0A%0A--%20BEGIN%0Atheorem%20self_sub%20(a%20%3A%20R)%20%3A%20a%20-%20a%20%3D%200%20%3A%3D%0Asorry%0A--%20END%0A%0Aend%20my_ring" target="_blank" tryitfile="../examples/basic_skills/unnamed_791.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">self_sub</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>Extra points if you do it two different ways:
once using <code class="docutils literal notranslate"><span class="pre">rw</span></code>,
and once using either <code class="docutils literal notranslate"><span class="pre">apply</span></code> or <code class="docutils literal notranslate"><span class="pre">exact</span></code>.</p>
<p>For another example of definitional equality,
Lean knows that <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">1</span> <span class="pre">=</span> <span class="pre">2</span></code> holds in any ring.
With a bit of cleverness,
you can use that to prove the theorem <code class="docutils literal notranslate"><span class="pre">two_mul</span></code> from
the last section:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20my_ring%0A%0Avariables%20%7BR%20%3A%20Type*%7D%20%5Bring%20R%5D%0A%0A--%20BEGIN%0Alemma%20one_add_one_eq_two%20%3A%201%20%2B%201%20%3D%20(2%20%3A%20R)%20%3A%3D%0Aby%20refl%0A%0Atheorem%20two_mul%20(a%20%3A%20R)%20%3A%202%20*%20a%20%3D%20a%20%2B%20a%20%3A%3D%0Asorry%0A--%20END%0A%0Aend%20my_ring" target="_blank" tryitfile="../examples/basic_skills/unnamed_814.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">lemma</span> <span class="n">one_add_one_eq_two</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">refl</span>

<span class="kd">theorem</span> <span class="n">two_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>We close this section by noting that some of the facts about
addition and negation that we established above do not
need the full strength of the ring axioms, or even
commutativity of addition. The weaker notion of a <em>group</em>
can be axiomatized as follows:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20(A%20%3A%20Type*)%20%5Badd_group%20A%5D%0A%0A%23check%20(add_assoc%20%3A%20%E2%88%80%20a%20b%20c%20%3A%20A%2C%20a%20%2B%20b%20%2B%20c%20%3D%20a%20%2B%20(b%20%2B%20c))%0A%23check%20(zero_add%20%3A%20%E2%88%80%20a%20%3A%20A%2C%200%20%2B%20a%20%3D%20a)%0A%23check%20(add_left_neg%20%3A%20%E2%88%80%20a%20%3A%20A%2C%20-a%20%2B%20a%20%3D%200)" target="_blank" tryitfile="../examples/basic_skills/unnamed_836.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">A</span><span class="o">]</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">add_assoc</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c</span><span class="o">))</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">zero_add</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">add_left_neg</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
</pre></div>
</div>
</div><p>It is conventional to use additive notation when
the group operation is commutative,
and multiplicative notation otherwise.
So Lean defines a multiplicative version as well as the
additive version (and also their abelian variants,
<code class="docutils literal notranslate"><span class="pre">add_comm_group</span></code> and <code class="docutils literal notranslate"><span class="pre">comm_group</span></code>).</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20(G%20%3A%20Type*)%20%5Bgroup%20G%5D%0A%0A%23check%20(mul_assoc%20%3A%20%E2%88%80%20a%20b%20c%20%3A%20G%2C%20a%20*%20b%20*%20c%20%3D%20a%20*%20(b%20*%20c))%0A%23check%20(one_mul%20%3A%20%E2%88%80%20a%20%3A%20G%2C%201%20*%20a%20%3D%20a)%0A%23check%20(mul_left_inv%20%3A%20%E2%88%80%20a%20%3A%20G%2C%20a%E2%81%BB%C2%B9%20*%20a%20%3D%201)" target="_blank" tryitfile="../examples/basic_skills/unnamed_851.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">mul_left_inv</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">a</span><span class="bp">&#8315;&#185;</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</div>
</div><p>If you are feeling cocky, try proving the following facts about
groups, using only these axioms.
You will need to prove a number of helper lemmas along the way.
The proofs we have carried out in this section provide some hints.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20%7BG%20%3A%20Type*%7D%20%5Bgroup%20G%5D%0A%0A%23check%20(mul_assoc%20%3A%20%E2%88%80%20a%20b%20c%20%3A%20G%2C%20a%20*%20b%20*%20c%20%3D%20a%20*%20(b%20*%20c))%0A%23check%20(one_mul%20%3A%20%E2%88%80%20a%20%3A%20G%2C%201%20*%20a%20%3D%20a)%0A%23check%20(mul_left_inv%20%3A%20%E2%88%80%20a%20%3A%20G%2C%20a%E2%81%BB%C2%B9%20*%20a%20%3D%201)%0A%0Anamespace%20my_group%0A%0Atheorem%20mul_one%20(a%20%3A%20G)%20%3A%20a%20*%201%20%3D%20a%20%3A%3D%0Asorry%0A%0Atheorem%20mul_right_inv%20(a%20%3A%20G)%20%3A%20a%20*%20a%E2%81%BB%C2%B9%20%3D%201%20%3A%3D%0Asorry%0A%0Atheorem%20mul_inv_rev%20(a%20b%20%3A%20G)%20%3A%20(a%20*%20b)%E2%81%BB%C2%B9%20%3D%20b%E2%81%BB%C2%B9%20*%20a%20%E2%81%BB%C2%B9%20%3A%3D%0Asorry%0A%0Aend%20my_group" target="_blank" tryitfile="../examples/basic_skills/unnamed_864.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">mul_left_inv</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">a</span><span class="bp">&#8315;&#185;</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">my_group</span>

<span class="kd">theorem</span> <span class="n">mul_one</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">theorem</span> <span class="n">mul_right_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">&#8315;&#185;</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">theorem</span> <span class="n">mul_inv_rev</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span><span class="bp">&#8315;&#185;</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">&#8315;&#185;</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">&#8315;&#185;</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">end</span> <span class="n">my_group</span>
</pre></div>
</div>
</div></div>
<div class="section" id="using-theorems-and-lemmas">
<span id="id4"></span><h2><span class="section-number">2.3. </span>Using Theorems and Lemmas<a class="headerlink" href="#using-theorems-and-lemmas" title="Permalink to this headline">&#182;</a></h2>
<p>Rewriting is great for proving equations,
but what about other sorts of theorems?
For example, how can we prove an inequality,
like the fact that <span class="math notranslate nohighlight">\(a + e^b \le a + e^c\)</span> holds whenever <span class="math notranslate nohighlight">\(b \le c\)</span>?
We have already seen that theorems can be applied to arguments and hypotheses,
and that the <code class="docutils literal notranslate"><span class="pre">apply</span></code> and <code class="docutils literal notranslate"><span class="pre">exact</span></code> tactics can be used to solve goals.
In this section, we will make good use of these tools.</p>
<p>Consider the library theorems <code class="docutils literal notranslate"><span class="pre">le_refl</span></code> and <code class="docutils literal notranslate"><span class="pre">le_trans</span></code>:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20%3A%20%E2%84%9D%0A%0A%23check%20(le_refl%20%3A%20%E2%88%80%20a%20%3A%20%E2%84%9D%2C%20a%20%E2%89%A4%20a)%0A%23check%20(le_trans%20%3A%20a%20%E2%89%A4%20b%20%E2%86%92%20b%20%E2%89%A4%20c%20%E2%86%92%20a%20%E2%89%A4%20c)" target="_blank" tryitfile="../examples/basic_skills/unnamed_901.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">variables</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">le_refl</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_trans</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">c</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">c</span><span class="o">)</span>
</pre></div>
</div>
</div><p>The library designers have set the arguments to <code class="docutils literal notranslate"><span class="pre">le_trans</span></code> implicit,
so that Lean will <em>not</em> let you provide them explicitly.
Rather, it expects to infer them from the context in which they are used.
For example, when hypotheses <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">a</span> <span class="pre">&#8804;</span> <span class="pre">b</span></code> and  <code class="docutils literal notranslate"><span class="pre">h'</span> <span class="pre">:</span> <span class="pre">b</span> <span class="pre">&#8804;</span> <span class="pre">c</span></code>
are in the context,
all the following work:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0A--%20BEGIN%0Avariables%20a%20b%20c%20%3A%20%E2%84%9D%0Avariables%20(h%20%3A%20a%20%E2%89%A4%20b)%20(h'%20%3A%20b%20%E2%89%A4%20c)%0A%0A%23check%20(le_refl%20%3A%20%E2%88%80%20a%20%3A%20real%2C%20a%20%E2%89%A4%20a)%0A%23check%20(le_refl%20a%20%3A%20a%20%E2%89%A4%20a)%0A%23check%20(le_trans%20%3A%20a%20%E2%89%A4%20b%20%E2%86%92%20b%20%E2%89%A4%20c%20%E2%86%92%20a%20%E2%89%A4%20c)%0A%23check%20(le_trans%20h%20%3A%20b%20%E2%89%A4%20c%20%E2%86%92%20a%20%E2%89%A4%20c)%0A%23check%20(le_trans%20h%20h'%20%3A%20a%20%E2%89%A4%20c)%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_917.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">variables</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#8477;</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">c</span><span class="o">)</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">le_refl</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="o">:</span> <span class="n">real</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_refl</span> <span class="n">a</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_trans</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">c</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">c</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_trans</span> <span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">c</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">c</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_trans</span> <span class="n">h</span> <span class="n">h&#39;</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">c</span><span class="o">)</span>
</pre></div>
</div>
</div><p>The <code class="docutils literal notranslate"><span class="pre">apply</span></code> tactic takes a proof of a general statement or implication,
tries to match the conclusion with the current goal,
and leaves the hypotheses, if any, as new goals.
If the given proof matches the goal exactly,
you can use the <code class="docutils literal notranslate"><span class="pre">exact</span></code> tactic instead of <code class="docutils literal notranslate"><span class="pre">apply</span></code>.
So, all of these work:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0A--%20BEGIN%0Aexample%20(x%20y%20z%20%3A%20%E2%84%9D)%20(h%E2%82%80%20%3A%20x%20%E2%89%A4%20y)%20(h%E2%82%81%20%3A%20y%20%E2%89%A4%20z)%20%3A%20x%20%E2%89%A4%20z%20%3A%3D%0Abegin%0A%20%20apply%20le_trans%2C%0A%20%20%7B%20apply%20h%E2%82%80%20%7D%2C%0A%20%20apply%20h%E2%82%81%0Aend%0A%0Aexample%20(x%20y%20z%20%3A%20%E2%84%9D)%20(h%E2%82%80%20%3A%20x%20%E2%89%A4%20y)%20(h%E2%82%81%20%3A%20y%20%E2%89%A4%20z)%20%3A%20x%20%E2%89%A4%20z%20%3A%3D%0Abegin%0A%20%20apply%20le_trans%20h%E2%82%80%2C%0A%20%20apply%20h%E2%82%81%0Aend%0A%0Aexample%20(x%20y%20z%20%3A%20%E2%84%9D)%20(h%E2%82%80%20%3A%20x%20%E2%89%A4%20y)%20(h%E2%82%81%20%3A%20y%20%E2%89%A4%20z)%20%3A%20x%20%E2%89%A4%20z%20%3A%3D%0Aby%20exact%20le_trans%20h%E2%82%80%20h%E2%82%81%0A%0Aexample%20(x%20y%20z%20%3A%20%E2%84%9D)%20(h%E2%82%80%20%3A%20x%20%E2%89%A4%20y)%20(h%E2%82%81%20%3A%20y%20%E2%89%A4%20z)%20%3A%20x%20%E2%89%A4%20z%20%3A%3D%0Ale_trans%20h%E2%82%80%20h%E2%82%81%0A%0Aexample%20(x%20%3A%20%E2%84%9D)%20%3A%20x%20%E2%89%A4%20x%20%3A%3D%0Aby%20apply%20le_refl%0A%0Aexample%20(x%20%3A%20%E2%84%9D)%20%3A%20x%20%E2%89%A4%20x%20%3A%3D%0Aby%20exact%20le_refl%20x%0A%0Aexample%20(x%20%3A%20%E2%84%9D)%20%3A%20x%20%E2%89%A4%20x%20%3A%3D%0Ale_refl%20x%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_939.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">z</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">le_trans</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">h&#8320;</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">h&#8321;</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">z</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">le_trans</span> <span class="n">h&#8320;</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">h&#8321;</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">z</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">exact</span> <span class="n">le_trans</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">z</span> <span class="o">:=</span>
<span class="n">le_trans</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">apply</span> <span class="n">le_refl</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">exact</span> <span class="n">le_refl</span> <span class="n">x</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">le_refl</span> <span class="n">x</span>
</pre></div>
</div>
</div><p>In the first example, applying <code class="docutils literal notranslate"><span class="pre">le_trans</span></code>
creates two goals,
and we use the curly braces to enclose the proof
of the first one.
In the fourth example and in the last example, we avoid going into tactic mode entirely:
<code class="docutils literal notranslate"><span class="pre">le_trans</span> <span class="pre">h&#8320;</span> <span class="pre">h&#8321;</span></code> and <code class="docutils literal notranslate"><span class="pre">le_refl</span> <span class="pre">x</span></code> are the proof terms we need.</p>
<p>Here are a few more library theorems:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0A%23check%20(le_refl%20%20%3A%20%E2%88%80%20a%2C%20a%20%E2%89%A4%20a)%0A%23check%20(le_trans%20%3A%20a%20%E2%89%A4%20b%20%E2%86%92%20b%20%E2%89%A4%20c%20%E2%86%92%20a%20%E2%89%A4%20c)%0A%23check%20(lt_of_le_of_lt%20%3A%20a%20%E2%89%A4%20b%20%E2%86%92%20b%20%3C%20c%20%E2%86%92%20a%20%3C%20c)%0A%23check%20(lt_of_lt_of_le%20%3A%20a%20%3C%20b%20%E2%86%92%20b%20%E2%89%A4%20c%20%E2%86%92%20a%20%3C%20c)%0A%23check%20(lt_trans%20%3A%20a%20%3C%20b%20%E2%86%92%20b%20%3C%20c%20%E2%86%92%20a%20%3C%20c)%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_982.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="k">#check</span> <span class="o">(</span><span class="n">le_refl</span>  <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_trans</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">c</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">c</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">lt_of_le_of_lt</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">c</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">c</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">lt_of_lt_of_le</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">c</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">c</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">lt_trans</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">c</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">c</span><span class="o">)</span>
</pre></div>
</div>
</div><p>Use them together with <code class="docutils literal notranslate"><span class="pre">apply</span></code> and <code class="docutils literal notranslate"><span class="pre">exact</span></code> to prove the following:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20(a%20b%20c%20d%20e%20%3A%20%E2%84%9D)%20(h%E2%82%80%20%3A%20a%20%E2%89%A4%20b)%20(h%E2%82%81%20%3A%20b%20%3C%20c)%20(h%E2%82%82%20%3A%20c%20%E2%89%A4%20d)%0A%20%20%20%20(h%E2%82%83%20%3A%20d%20%3C%20e)%20%3A%0A%20%20a%20%3C%20e%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_998.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8322;</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&#8804;</span> <span class="n">d</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h&#8323;</span> <span class="o">:</span> <span class="n">d</span> <span class="bp">&lt;</span> <span class="n">e</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">e</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>In fact, Lean has a tactic that does this sort of thing automatically:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20d%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20(a%20b%20c%20d%20e%20%3A%20%E2%84%9D)%20(h%E2%82%80%20%3A%20a%20%E2%89%A4%20b)%20(h%E2%82%81%20%3A%20b%20%3C%20c)%20(h%E2%82%82%20%3A%20c%20%E2%89%A4%20d)%0A%20%20%20%20(h%E2%82%83%20%3A%20d%20%3C%20e)%20%3A%0A%20%20a%20%3C%20e%20%3A%3D%0Aby%20linarith%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1013.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8322;</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&#8804;</span> <span class="n">d</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h&#8323;</span> <span class="o">:</span> <span class="n">d</span> <span class="bp">&lt;</span> <span class="n">e</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">e</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">linarith</span>
</pre></div>
</div>
</div><p>The <code class="docutils literal notranslate"><span class="pre">linarith</span></code> tactic is designed to handle <em>linear arithmetic</em>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20d%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20(h%20%3A%202%20*%20a%20%E2%89%A4%203%20*%20b)%20(h'%20%3A%201%20%E2%89%A4%20a)%20(h''%20%3A%20d%20%3D%202)%20%3A%0A%20%20d%20%2B%20a%20%E2%89%A4%205%20*%20b%20%3A%3D%0Aby%20linarith%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1028.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;&#39;</span> <span class="o">:</span> <span class="n">d</span> <span class="bp">=</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">d</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="mi">5</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">linarith</span>
</pre></div>
</div>
</div><p>In addition to equations and inequalities in the context,
<code class="docutils literal notranslate"><span class="pre">linarith</span></code> will use additional inequalities that you pass as arguments.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20analysis.special_functions.exp_log%0A%0Aopen%20real%0A%0Avariables%20a%20b%20c%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20(h%20%3A%201%20%E2%89%A4%20a)%20(h'%20%3A%20b%20%E2%89%A4%20c)%20%3A%0A%20%202%20%2B%20a%20%2B%20exp%20b%20%E2%89%A4%203%20*%20a%20%2B%20exp%20c%20%3A%3D%0Aby%20linarith%20%5Bexp_le_exp.mpr%20h'%5D%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1043.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span>
  <span class="mi">2</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">exp</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">exp</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">linarith</span> <span class="o">[</span><span class="n">exp_le_exp.mpr</span> <span class="n">h&#39;</span><span class="o">]</span>
</pre></div>
</div>
</div><p>Here are some more theorems in the library that can be used to establish
inequalities on the real numbers.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20analysis.special_functions.exp_log%0A%0Aopen%20real%0A%0Avariables%20%20a%20b%20c%20d%20%3A%20%E2%84%9D%0A%0A%23check%20(exp_le_exp%20%3A%20exp%20a%20%E2%89%A4%20exp%20b%20%E2%86%94%20a%20%E2%89%A4%20b)%0A%23check%20(exp_lt_exp%20%3A%20exp%20a%20%3C%20exp%20b%20%E2%86%94%20a%20%3C%20b)%0A%23check%20(log_le_log%20%3A%200%20%3C%20a%20%E2%86%92%200%20%3C%20b%20%E2%86%92%20(log%20a%20%E2%89%A4%20log%20b%20%E2%86%94%20a%20%E2%89%A4%20b))%0A%23check%20(log_lt_log%20%3A%200%20%3C%20a%20%E2%86%92%20a%20%3C%20b%20%E2%86%92%20log%20a%20%3C%20log%20b)%0A%23check%20(add_le_add%20%3A%20a%20%E2%89%A4%20b%20%E2%86%92%20c%20%E2%89%A4%20d%20%E2%86%92%20a%20%2B%20c%20%E2%89%A4%20b%20%2B%20d)%0A%23check%20(add_lt_add_of_le_of_lt%20%3A%20a%20%E2%89%A4%20b%20%E2%86%92%20c%20%3C%20d%20%E2%86%92%20a%20%2B%20c%20%3C%20b%20%2B%20d)%0A%23check%20(add_lt_add_of_le_of_lt%20%3A%20a%20%E2%89%A4%20b%20%E2%86%92%20c%20%3C%20d%20%E2%86%92%20a%20%2B%20c%20%3C%20b%20%2B%20d)%0A%23check%20(add_nonneg%20%3A%200%20%E2%89%A4%20a%20%E2%86%92%200%20%E2%89%A4%20b%20%E2%86%92%200%20%E2%89%A4%20a%20%2B%20b)%0A%23check%20(add_pos%20%3A%200%20%3C%20a%20%E2%86%92%200%20%3C%20b%20%E2%86%92%200%20%3C%20a%20%2B%20b)%0A%23check%20(add_pos_of_pos_of_nonneg%20%3A%200%20%3C%20a%20%E2%86%92%200%20%E2%89%A4%20b%20%E2%86%92%200%20%3C%20a%20%2B%20b)%0A%23check%20(exp_pos%20%3A%20%E2%88%80%20a%2C%200%20%3C%20exp%20a)" target="_blank" tryitfile="../examples/basic_skills/unnamed_1060.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="n">analysis.special_functions.exp_log</span>

<span class="kn">open</span> <span class="n">real</span>

<span class="kd">variables</span>  <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">&#8477;</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">exp_le_exp</span> <span class="o">:</span> <span class="n">exp</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">exp</span> <span class="n">b</span> <span class="bp">&#8596;</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">exp_lt_exp</span> <span class="o">:</span> <span class="n">exp</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">exp</span> <span class="n">b</span> <span class="bp">&#8596;</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">log_le_log</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">&#8594;</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="o">(</span><span class="n">log</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">log</span> <span class="n">b</span> <span class="bp">&#8596;</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">))</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">log_lt_log</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">log</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">log</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">add_le_add</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">c</span> <span class="bp">&#8804;</span> <span class="n">d</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">add_lt_add_of_le_of_lt</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">d</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">add_lt_add_of_le_of_lt</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">d</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">add_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">a</span> <span class="bp">&#8594;</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">add_pos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">&#8594;</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">add_pos_of_pos_of_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">&#8594;</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">exp_pos</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">exp</span> <span class="n">a</span><span class="o">)</span>
</pre></div>
</div>
</div><p>Some of the theorems, <code class="docutils literal notranslate"><span class="pre">exp_le_exp</span></code>, <code class="docutils literal notranslate"><span class="pre">exp_lt_exp</span></code>, and <code class="docutils literal notranslate"><span class="pre">log_le_log</span></code>
use a <em>bi-implication</em>, which represents the
phrase &#8220;if and only if.&#8221;
(You can type it in VS Code with <code class="docutils literal notranslate"><span class="pre">\lr</span></code> of <code class="docutils literal notranslate"><span class="pre">\iff</span></code>).
We will discuss this connective in greater detail in the next chapter.
Such a theorem can be used with <code class="docutils literal notranslate"><span class="pre">rw</span></code> to rewrite a goal to
an equivalent one:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20analysis.special_functions.exp_log%0A%0Aopen%20real%0A%0A--%20BEGIN%0Aexample%20(a%20b%20%3A%20%E2%84%9D)%20(h%20%3A%20a%20%E2%89%A4%20b)%20%3A%20exp%20a%20%E2%89%A4%20exp%20b%20%3A%3D%0Abegin%0A%20%20rw%20exp_le_exp%2C%0A%20%20exact%20h%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1088.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">exp</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">exp</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">exp_le_exp</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>In this section, however, we will use that fact that if <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">A</span> <span class="pre">&#8596;</span> <span class="pre">B</span></code>
is such an equivalence,
then <code class="docutils literal notranslate"><span class="pre">h.mp</span></code> establishes the forward direction, <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&#8594;</span> <span class="pre">B</span></code>,
and <code class="docutils literal notranslate"><span class="pre">h.mpr</span></code> establishes the reverse direction, <code class="docutils literal notranslate"><span class="pre">B</span> <span class="pre">&#8594;</span> <span class="pre">A</span></code>.
Here, <code class="docutils literal notranslate"><span class="pre">mp</span></code> stands for &#8220;modus ponens&#8221; and
<code class="docutils literal notranslate"><span class="pre">mpr</span></code> stands for &#8220;modus ponens reverse.&#8221;
You can also use <code class="docutils literal notranslate"><span class="pre">h.1</span></code> and <code class="docutils literal notranslate"><span class="pre">h.2</span></code> for <code class="docutils literal notranslate"><span class="pre">h.mp</span></code> and <code class="docutils literal notranslate"><span class="pre">h.mpr</span></code>,
respectively, if you prefer.
Thus the following proof works:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20analysis.special_functions.exp_log%0A%0Aopen%20real%0A%0Avariables%20a%20b%20c%20d%20e%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20(h%E2%82%80%20%3A%20a%20%E2%89%A4%20b)%20(h%E2%82%81%20%3A%20c%20%3C%20d)%20%3A%20a%20%2B%20exp%20c%20%2B%20e%20%3C%20b%20%2B%20exp%20d%20%2B%20e%20%3A%3D%0Abegin%0A%20%20apply%20add_lt_add_of_lt_of_le%2C%0A%20%20%7B%20apply%20add_lt_add_of_le_of_lt%20h%E2%82%80%2C%0A%20%20%20%20apply%20exp_lt_exp.mpr%20h%E2%82%81%20%7D%2C%0A%20%20apply%20le_refl%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1112.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">exp</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">e</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">exp</span> <span class="n">d</span> <span class="bp">+</span> <span class="n">e</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">add_lt_add_of_lt_of_le</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">add_lt_add_of_le_of_lt</span> <span class="n">h&#8320;</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">exp_lt_exp.mpr</span> <span class="n">h&#8321;</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">le_refl</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>The first line, <code class="docutils literal notranslate"><span class="pre">apply</span> <span class="pre">add_lt_add_of_lt_of_le</span></code>,
creates two goals,
and once again we use the curly brackets to separate the
proof of the first from the proof of the second.</p>
<p>Try the following examples on your own.
The example in the middle shows you that the <code class="docutils literal notranslate"><span class="pre">norm_num</span></code>
tactic can be used to solve concrete numeric goals.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20analysis.special_functions.exp_log%0A%0Aopen%20real%0A%0Avariables%20a%20b%20c%20d%20e%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20(h%E2%82%80%20%3A%20d%20%E2%89%A4%20e)%20%3A%20c%20%2B%20exp%20(a%20%2B%20d)%20%E2%89%A4%20c%20%2B%20exp%20(a%20%2B%20e)%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A%0Aexample%20%3A%20(0%20%3A%20%E2%84%9D)%20%3C%201%20%3A%3D%0Aby%20norm_num%0A%0Aexample%20(h%20%3A%20a%20%E2%89%A4%20b)%20%3A%20log%20(1%20%2B%20exp%20a)%20%E2%89%A4%20log%20(1%20%2B%20exp%20b)%20%3A%3D%0Abegin%0A%20%20have%20h%E2%82%80%20%3A%200%20%3C%201%20%2B%20exp%20a%2C%0A%20%20%7B%20sorry%20%7D%2C%0A%20%20have%20h%E2%82%81%20%3A%200%20%3C%201%20%2B%20exp%20b%2C%0A%20%20%7B%20sorry%20%7D%2C%0A%20%20apply%20(log_le_log%20h%E2%82%80%20h%E2%82%81).mpr%2C%0A%20%20sorry%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1139.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">d</span> <span class="bp">&#8804;</span> <span class="n">e</span><span class="o">)</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">exp</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span> <span class="bp">&#8804;</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">exp</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">e</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">norm_num</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">log</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">exp</span> <span class="n">a</span><span class="o">)</span> <span class="bp">&#8804;</span> <span class="n">log</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">exp</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">h&#8320;</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">exp</span> <span class="n">a</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">sorry</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">h&#8321;</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">exp</span> <span class="n">b</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">sorry</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="o">(</span><span class="n">log_le_log</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span><span class="o">)</span><span class="bp">.</span><span class="n">mpr</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>From these examples, it should be clear that being able to
find the library theorems you need constitutes an important
part of formalization.
There are a number of strategies you can use:</p>
<ul class="simple">
<li><p>You can browse mathlib in its
<a class="reference external" href="https://github.com/leanprover-community/mathlib">GitHub repository</a>.</p></li>
<li><p>You can use the API documentation on the mathlib
<a class="reference external" href="https://leanprover-community.github.io/mathlib_docs/">web pages</a>.</p></li>
<li><p>You can rely on mathlib naming conventions and tab completion in
the editor to guess a theorem name.
In Lean, a theorem named <code class="docutils literal notranslate"><span class="pre">A_of_B_of_C</span></code> establishes
something of the form <code class="docutils literal notranslate"><span class="pre">A</span></code> from hypotheses of the form <code class="docutils literal notranslate"><span class="pre">B</span></code> and <code class="docutils literal notranslate"><span class="pre">C</span></code>,
where <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code>, and <code class="docutils literal notranslate"><span class="pre">C</span></code>
approximate the way we might read the goals out loud.
So a theorem establishing something like <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span> <span class="pre">&#8804;</span> <span class="pre">...</span></code> will probably
start with <code class="docutils literal notranslate"><span class="pre">add_le</span></code>.
Typing <code class="docutils literal notranslate"><span class="pre">add_le</span></code> and hitting tab will give you some helpful choices.</p></li>
<li><p>If you right-click on an existing theorem in VS Code,
the editor will show a menu with the option to
jump to the file where the theorem is defined,
and you can find similar theorems nearby.</p></li>
<li><p>You can use the <code class="docutils literal notranslate"><span class="pre">library_search</span></code> tactic,
which tries to find the relevant theorem in the library.</p></li>
</ul>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0Aimport%20tactic%0A%0Aexample%20(a%20%3A%20%E2%84%9D)%20%3A%200%20%E2%89%A4%20a%5E2%20%3A%3D%0Abegin%0A%20%20--%20library_search%2C%0A%20%20exact%20pow_two_nonneg%20a%0Aend" target="_blank" tryitfile="../examples/basic_skills/unnamed_1196.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="c1">-- library_search,</span>
  <span class="n">exact</span> <span class="n">pow_two_nonneg</span> <span class="n">a</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>To try out <code class="docutils literal notranslate"><span class="pre">library_search</span></code> in this example,
delete the <code class="docutils literal notranslate"><span class="pre">exact</span></code> command and uncomment the previous line.
Using these tricks,
see if you can find what you need to do the
next example:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20import%20analysis.special_functions.exp_log%0Aimport%20tactic%0A%0Aopen%20real%0A%0Avariables%20a%20b%20c%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20(h%20%3A%20a%20%E2%89%A4%20b)%20%3A%20c%20-%20exp%20b%20%E2%89%A4%20c%20-%20exp%20a%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1213.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">-</span> <span class="n">exp</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">c</span> <span class="bp">-</span> <span class="n">exp</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Also, confirm that <code class="docutils literal notranslate"><span class="pre">linarith</span></code> can do it with a bit of help.</p>
<p>Here is another example of an inequality:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%20tactic%0A%0Avariables%20a%20b%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%202*a*b%20%E2%89%A4%20a%5E2%20%2B%20b%5E2%20%3A%3D%0Abegin%0A%20%20have%20h%20%3A%200%20%E2%89%A4%20a%5E2%20-%202*a*b%20%2B%20b%5E2%2C%0A%20%20calc%0A%20%20%20%20a%5E2%20-%202*a*b%20%2B%20b%5E2%20%3D%20(a%20-%20b)%5E2%20%20%20%20%20%3A%20by%20ring%0A%20%20%20%20...%20%E2%89%A5%200%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20by%20apply%20pow_two_nonneg%2C%0A%20%20calc%0A%20%20%20%202*a*b%0A%20%20%20%20%20%20%20%20%3D%202*a*b%20%2B%200%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20by%20ring%0A%20%20%20%20...%20%E2%89%A4%202*a*b%20%2B%20(a%5E2%20-%202*a*b%20%2B%20b%5E2)%20%3A%20add_le_add%20(le_refl%20_)%20h%0A%20%20%20%20...%20%3D%20a%5E2%20%2B%20b%5E2%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20by%20ring%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1233.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span>     <span class="o">:</span> <span class="kd">by</span> <span class="n">ring</span>
    <span class="bp">...</span> <span class="bp">&#8805;</span> <span class="mi">0</span>                           <span class="o">:</span> <span class="kd">by</span> <span class="n">apply</span> <span class="n">pow_two_nonneg</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="mi">2</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span>
        <span class="bp">=</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">0</span>                   <span class="o">:</span> <span class="kd">by</span> <span class="n">ring</span>
    <span class="bp">...</span> <span class="bp">&#8804;</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">add_le_add</span> <span class="o">(</span><span class="n">le_refl</span> <span class="n">_</span><span class="o">)</span> <span class="n">h</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span>                   <span class="o">:</span> <span class="kd">by</span> <span class="n">ring</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Mathlib tends to put spaces around binary operations like <code class="docutils literal notranslate"><span class="pre">*</span></code> and <code class="docutils literal notranslate"><span class="pre">^</span></code>,
but in this example, the more compressed format increases readability.
There are a number of things worth noticing in this example.
First, an expression <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8805;</span> <span class="pre">t</span></code> is definitionally equivalent to <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">&#8804;</span> <span class="pre">s</span></code>.
In principle, this means one should be able to use them interchangeably.
But some of Lean&#8217;s automation does not recognize the equivalence,
so mathlib tends to favor <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code> over <code class="docutils literal notranslate"><span class="pre">&#8805;</span></code>.
Second, we have used the <code class="docutils literal notranslate"><span class="pre">ring</span></code> tactic extensively.
It is a real timesaver!
Finally, notice that in the second line of the
second <code class="docutils literal notranslate"><span class="pre">calc</span></code> proof,
instead of writing <code class="docutils literal notranslate"><span class="pre">by</span> <span class="pre">exact</span> <span class="pre">add_le_add</span> <span class="pre">(le_refl</span> <span class="pre">_)</span> <span class="pre">h</span></code>,
we can simply write the proof term <code class="docutils literal notranslate"><span class="pre">add_le_add</span> <span class="pre">(le_refl</span> <span class="pre">_)</span> <span class="pre">h</span></code>.</p>
<p>In fact, the only cleverness in the proof above is figuring
out the hypothesis <code class="docutils literal notranslate"><span class="pre">h</span></code>.
Once we have it, the second calculation involves only
linear arithmetic, and <code class="docutils literal notranslate"><span class="pre">linarith</span></code> can handle it:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%20tactic%0A%0Avariables%20a%20b%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%202*a*b%20%E2%89%A4%20a%5E2%20%2B%20b%5E2%20%3A%3D%0Abegin%0A%20%20have%20h%20%3A%200%20%E2%89%A4%20a%5E2%20-%202*a*b%20%2B%20b%5E2%2C%0A%20%20calc%0A%20%20%20%20a%5E2%20-%202*a*b%20%2B%20b%5E2%20%3D%20(a%20-%20b)%5E2%20%3A%20by%20ring%0A%20%20%20%20...%20%E2%89%A5%200%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20by%20apply%20pow_two_nonneg%2C%0A%20%20linarith%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1273.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="o">,</span>
  <span class="k">calc</span>
    <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">ring</span>
    <span class="bp">...</span> <span class="bp">&#8805;</span> <span class="mi">0</span>                       <span class="o">:</span> <span class="kd">by</span> <span class="n">apply</span> <span class="n">pow_two_nonneg</span><span class="o">,</span>
  <span class="n">linarith</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>How nice! We challenge you to use these ideas to prove the
following theorem. You can use the theorem <code class="docutils literal notranslate"><span class="pre">abs_le_of_le_of_neg_le</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%20tactic%0A%0Avariables%20a%20b%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%20abs%20(a*b)%20%E2%89%A4%20(a%5E2%20%2B%20b%5E2)%20%2F%202%20%3A%3D%0Asorry%0A%0A%23check%20abs_le_of_le_of_neg_le%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1293.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="o">)</span> <span class="bp">&#8804;</span> <span class="o">(</span><span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="k">#check</span> <span class="n">abs_le_of_le_of_neg_le</span>
</pre></div>
</div>
</div><p>If you managed to solve this, congratulations!
You are well on your way to becoming a master formalizer.</p>
</div>
<div class="section" id="more-on-order-and-divisibility">
<h2><span class="section-number">2.4. </span>More on Order and Divisibility<a class="headerlink" href="#more-on-order-and-divisibility" title="Permalink to this headline">&#182;</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">min</span></code> function on the real numbers is uniquely characterized
by the following three facts:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20d%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0A%23check%20(min_le_left%20a%20b%20%3A%20min%20a%20b%20%E2%89%A4%20a)%0A%23check%20(min_le_right%20a%20b%20%3A%20min%20a%20b%20%E2%89%A4%20b)%0A%23check%20(le_min%20%3A%20c%20%E2%89%A4%20a%20%E2%86%92%20c%20%E2%89%A4%20b%20%E2%86%92%20c%20%E2%89%A4%20min%20a%20b)%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1318.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="k">#check</span> <span class="o">(</span><span class="n">min_le_left</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">min</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">min_le_right</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">min</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_min</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">&#8804;</span> <span class="n">a</span> <span class="bp">&#8594;</span> <span class="n">c</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">c</span> <span class="bp">&#8804;</span> <span class="n">min</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span>
</pre></div>
</div>
</div><p>Can you guess the names of the theorems that characterize
<code class="docutils literal notranslate"><span class="pre">max</span></code> in a similar way?</p>
<p>Using the theorem <code class="docutils literal notranslate"><span class="pre">le_antisymm</span></code>, we can show that two
real numbers are equal if each is less than or equal to the other.
Using this and the facts above,
we can show that <code class="docutils literal notranslate"><span class="pre">min</span></code> is commutative:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%20min%20a%20b%20%3D%20min%20b%20a%20%3A%3D%0Abegin%0A%20%20apply%20le_antisymm%2C%0A%20%20%7B%20show%20min%20a%20b%20%E2%89%A4%20min%20b%20a%2C%0A%20%20%20%20apply%20le_min%2C%0A%20%20%20%20%7B%20apply%20min_le_right%20%7D%2C%0A%20%20%20%20apply%20min_le_left%20%7D%2C%0A%20%20%7B%20show%20min%20b%20a%20%E2%89%A4%20min%20a%20b%2C%0A%20%20%20%20apply%20le_min%2C%0A%20%20%20%20%7B%20apply%20min_le_right%20%7D%2C%0A%20%20%20%20apply%20min_le_left%20%7D%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1338.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">min</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">min</span> <span class="n">b</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">le_antisymm</span><span class="o">,</span>
  <span class="o">{</span> <span class="k">show</span> <span class="n">min</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">min</span> <span class="n">b</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">le_min</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">apply</span> <span class="n">min_le_right</span> <span class="o">},</span>
    <span class="n">apply</span> <span class="n">min_le_left</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">show</span> <span class="n">min</span> <span class="n">b</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">min</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">le_min</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">apply</span> <span class="n">min_le_right</span> <span class="o">},</span>
    <span class="n">apply</span> <span class="n">min_le_left</span> <span class="o">}</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Here we have used curly brackets to separate proofs of
different goals.
Our usage is inconsistent:
at the outer level,
we use curly brackets and indentation for both goals,
whereas for the nested proofs,
we use curly brackets only until a single goal remains.
Both conventions are reasonable and useful.
We also use the <code class="docutils literal notranslate"><span class="pre">show</span></code> tactic to structure
the proof
and indicate what is being proved in each block.
The proof still works without the <code class="docutils literal notranslate"><span class="pre">show</span></code> commands,
but using them makes the proof easier to read and maintain.</p>
<p>It may bother you that the the proof is repetitive.
To foreshadow skills you will learn later on,
we note that one way to avoid the repetition
is to state a local lemma and then use it:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%20min%20a%20b%20%3D%20min%20b%20a%20%3A%3D%0Abegin%0A%20%20have%20h%20%3A%20%E2%88%80%20x%20y%2C%20min%20x%20y%20%E2%89%A4%20min%20y%20x%2C%0A%20%20%7B%20intros%20x%20y%2C%0A%20%20%20%20apply%20le_min%2C%0A%20%20%20%20apply%20min_le_right%2C%0A%20%20%20%20apply%20min_le_left%20%7D%2C%0A%20%20apply%20le_antisymm%2C%20apply%20h%2C%20apply%20h%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1378.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">min</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">min</span> <span class="n">b</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">min</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">min</span> <span class="n">y</span> <span class="n">x</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">le_min</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">min_le_right</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">min_le_left</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">le_antisymm</span><span class="o">,</span> <span class="n">apply</span> <span class="n">h</span><span class="o">,</span> <span class="n">apply</span> <span class="n">h</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>We will say more about the universal quantifier in
a later chapter,
but suffice it to say here that the hypothesis
<code class="docutils literal notranslate"><span class="pre">h</span></code> says that the desired inequality holds for
any <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>,
and the <code class="docutils literal notranslate"><span class="pre">intros</span></code> tactic introduces an arbitrary
<code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> to establish the conclusion.
The first <code class="docutils literal notranslate"><span class="pre">apply</span></code> after <code class="docutils literal notranslate"><span class="pre">le_antisymm</span></code> implicitly
uses <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">a</span> <span class="pre">b</span></code>, whereas the second one uses <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">b</span> <span class="pre">a</span></code>.</p>
<p>Another solution is to use the <code class="docutils literal notranslate"><span class="pre">repeat</span></code> tactic,
which applies a tactic (or a block) as many times
as it can.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%20min%20a%20b%20%3D%20min%20b%20a%20%3A%3D%0Abegin%0A%20%20apply%20le_antisymm%2C%0A%20%20repeat%20%7B%0A%20%20%20%20apply%20le_min%2C%0A%20%20%20%20apply%20min_le_right%2C%0A%20%20%20%20apply%20min_le_left%20%7D%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1412.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">min</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">min</span> <span class="n">b</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">le_antisymm</span><span class="o">,</span>
  <span class="n">repeat</span> <span class="o">{</span>
    <span class="n">apply</span> <span class="n">le_min</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">min_le_right</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">min_le_left</span> <span class="o">}</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>In any case,
whether or not you use these tricks,
we encourage you to prove the following:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%20max%20a%20b%20%3D%20max%20b%20a%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A%0Aexample%20%3A%20min%20(min%20a%20b)%20c%20%3D%20min%20a%20(min%20b%20c)%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1433.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">max</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">max</span> <span class="n">b</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">min</span> <span class="o">(</span><span class="n">min</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">min</span> <span class="n">a</span> <span class="o">(</span><span class="n">min</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>Of course, you are welcome to prove the associativity of <code class="docutils literal notranslate"><span class="pre">max</span></code> as well.</p>
<p>It is an interesting fact that <code class="docutils literal notranslate"><span class="pre">min</span></code> distributes over <code class="docutils literal notranslate"><span class="pre">max</span></code>
the way that multiplication distributes over addition,
and vice-versa.
In other words, on the real numbers, we have the identity
<code class="docutils literal notranslate"><span class="pre">min</span> <span class="pre">a</span> <span class="pre">(max</span> <span class="pre">b</span> <span class="pre">c)</span> <span class="pre">&#8804;</span> <span class="pre">max</span> <span class="pre">(min</span> <span class="pre">a</span> <span class="pre">b)</span> <span class="pre">(min</span> <span class="pre">a</span> <span class="pre">c)</span></code>
as well as the corresponding version with <code class="docutils literal notranslate"><span class="pre">max</span></code> and <code class="docutils literal notranslate"><span class="pre">min</span></code>
switched.
But in the next section we will see that this does <em>not</em> follow
from the transitivity and reflexivity of <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code> and
the characterizing properties of <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> enumerated above.
We need to use the fact that <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code> on the real numbers is a <em>total order</em>,
which is to say,
it satisfies <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">x</span> <span class="pre">y,</span> <span class="pre">x</span> <span class="pre">&#8804;</span> <span class="pre">y</span> <span class="pre">&#8744;</span> <span class="pre">y</span> <span class="pre">&#8804;</span> <span class="pre">x</span></code>.
Here the disjunction symbol, <code class="docutils literal notranslate"><span class="pre">&#8744;</span></code>, represents &#8220;or&#8221;.
In the first case, we have <code class="docutils literal notranslate"><span class="pre">min</span> <span class="pre">x</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">x</span></code>,
and in the second case, we have <code class="docutils literal notranslate"><span class="pre">min</span> <span class="pre">x</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">y</span></code>.
We will learn how to reason by cases in a later chapter,
so for now we will stick to examples that don&#8217;t require the case split.</p>
<p>Here is one such example:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20c%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Alemma%20aux%20%3A%20min%20a%20b%20%2B%20c%20%E2%89%A4%20min%20(a%20%2B%20c)%20(b%20%2B%20c)%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A%0Aexample%20%3A%20min%20a%20b%20%2B%20c%20%3D%20min%20(a%20%2B%20c)%20(b%20%2B%20c)%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1474.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">lemma</span> <span class="n">aux</span> <span class="o">:</span> <span class="n">min</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">&#8804;</span> <span class="n">min</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">min</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">min</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>It is clear that <code class="docutils literal notranslate"><span class="pre">aux</span></code> provides one of the two inequalities
needed to prove the equality,
but applying it to suitable values yields the other direction
as well.
As a hint, you can use the theorem <code class="docutils literal notranslate"><span class="pre">add_neg_cancel_right</span></code>
and the <code class="docutils literal notranslate"><span class="pre">linarith</span></code> tactic.</p>
<p>For another challenge,
mathlib&#8217;s manic naming convention is on proud display
in the library&#8217;s name for the triangle inequality:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0A--%20BEGIN%0A%23check%20(abs_add_le_abs_add_abs%20%3A%20%E2%88%80%20a%20b%20%3A%20%E2%84%9D%2C%20abs%20(a%20%2B%20b)%20%E2%89%A4%20abs%20a%20%2B%20abs%20b)%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1503.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="k">#check</span> <span class="o">(</span><span class="n">abs_add_le_abs_add_abs</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">&#8804;</span> <span class="n">abs</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">abs</span> <span class="n">b</span><span class="o">)</span>
</pre></div>
</div>
</div><p>Use it to prove the following variant:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.basic%0A%0Avariables%20a%20b%20%3A%20%E2%84%9D%0A%0A--%20BEGIN%0Aexample%20%3A%20abs%20a%20-%20abs%20b%20%E2%89%A4%20abs%20(a%20-%20b)%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1513.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">abs</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">abs</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">abs</span> <span class="o">(</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>See if you can do this in three lines or less.
You can use the theorem <code class="docutils literal notranslate"><span class="pre">sub_add_cancel</span></code>.</p>
<p>Another important relation that we will make use of
in the sections to come is the divisibility relation
on the natural numbers, <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8739;</span> <span class="pre">y</span></code>.
Be careful: the divisibility symbol is <em>not</em> the
ordinary bar on your keyboard.
Rather, it is a unicode character obtained by
typing <code class="docutils literal notranslate"><span class="pre">\|</span></code> in VS Code.
By convention, mathlib uses <code class="docutils literal notranslate"><span class="pre">dvd</span></code>
to refer to it in theorem names.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.nat.gcd%0A%0Avariables%20x%20y%20z%20%3A%20%E2%84%95%0A%0Aexample%20(h%E2%82%80%20%3A%20x%20%E2%88%A3%20y)%20(h%E2%82%81%20%3A%20y%20%E2%88%A3%20z)%20%3A%20x%20%E2%88%A3%20z%20%3A%3D%0Advd_trans%20h%E2%82%80%20h%E2%82%81%0A%0Aexample%20%3A%20x%20%E2%88%A3%20y%20*%20x%20*%20z%20%3A%3D%0Abegin%0A%20%20apply%20dvd_mul_of_dvd_left%2C%0A%20%20apply%20dvd_mul_left%0Aend%0A%0Aexample%20%3A%20x%20%E2%88%A3%20x%5E2%20%3A%3D%0Abegin%0A%20%20rw%20nat.pow_two%2C%0A%20%20apply%20dvd_mul_left%0Aend" target="_blank" tryitfile="../examples/basic_skills/unnamed_1539.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="n">data.nat.gcd</span>

<span class="kd">variables</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8469;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8739;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&#8739;</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8739;</span> <span class="n">z</span> <span class="o">:=</span>
<span class="n">dvd_trans</span> <span class="n">h&#8320;</span> <span class="n">h&#8321;</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8739;</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">z</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">dvd_mul_of_dvd_left</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">dvd_mul_left</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8739;</span> <span class="n">x</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">nat.pow_two</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">dvd_mul_left</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>You can also use <code class="docutils literal notranslate"><span class="pre">nat.pow_succ</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">nat.pow_two</span></code> to expand <code class="docutils literal notranslate"><span class="pre">x^2</span></code> into a product,
with slightly different effect.
(In the context of the natural numbers,
<code class="docutils literal notranslate"><span class="pre">succ</span></code> refers to the successor function;
in Lean, <code class="docutils literal notranslate"><span class="pre">2</span></code> is definitionally equal to <code class="docutils literal notranslate"><span class="pre">succ</span> <span class="pre">1</span></code>.)
See if you can guess the names of the theorems
you need to prove the following:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.nat.gcd%0A%0Avariables%20w%20x%20y%20z%20%3A%20%E2%84%95%0A%0Aexample%20(h%20%3A%20x%20%E2%88%A3%20w)%3A%20x%20%E2%88%A3%20y%20*%20(x%20*%20z)%20%2B%20x%5E2%20%2B%20w%5E2%20%3A%3D%0Abegin%0A%20%20sorry%0Aend" target="_blank" tryitfile="../examples/basic_skills/unnamed_1569.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="n">data.nat.gcd</span>

<span class="kd">variables</span> <span class="n">w</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8469;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8739;</span> <span class="n">w</span><span class="o">):</span> <span class="n">x</span> <span class="bp">&#8739;</span> <span class="n">y</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">z</span><span class="o">)</span> <span class="bp">+</span> <span class="n">x</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">w</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>With respect to divisibility, the <em>greatest common divisor</em>,
<code class="docutils literal notranslate"><span class="pre">gcd</span></code>, and least common multiple, <code class="docutils literal notranslate"><span class="pre">lcm</span></code>,
are analogous to <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code>.
Since every number divides <code class="docutils literal notranslate"><span class="pre">0</span></code>,
<code class="docutils literal notranslate"><span class="pre">0</span></code> is really the greatest element with respect to divisibility:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.nat.gcd%0A%0Aopen%20nat%0A%0Avariables%20n%20%3A%20%E2%84%95%0A%0A%23check%20(gcd_zero_right%20n%20%3A%20gcd%20n%200%20%3D%20n)%0A%23check%20(gcd_zero_left%20n%20%20%3A%20gcd%200%20n%20%3D%20n)%0A%23check%20(lcm_zero_right%20n%20%3A%20lcm%20n%200%20%3D%200)%0A%23check%20(lcm_zero_left%20n%20%20%3A%20lcm%200%20n%20%3D%200)" target="_blank" tryitfile="../examples/basic_skills/unnamed_1586.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="n">data.nat.gcd</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="kd">variables</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">gcd_zero_right</span> <span class="n">n</span> <span class="o">:</span> <span class="n">gcd</span> <span class="n">n</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">gcd_zero_left</span> <span class="n">n</span>  <span class="o">:</span> <span class="n">gcd</span> <span class="mi">0</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">lcm_zero_right</span> <span class="n">n</span> <span class="o">:</span> <span class="n">lcm</span> <span class="n">n</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">lcm_zero_left</span> <span class="n">n</span>  <span class="o">:</span> <span class="n">lcm</span> <span class="mi">0</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
</pre></div>
</div>
</div><p>The functions <code class="docutils literal notranslate"><span class="pre">gcd</span></code> and <code class="docutils literal notranslate"><span class="pre">lcm</span></code> for natural numbers are in the
<code class="docutils literal notranslate"><span class="pre">nat</span></code> namespace,
which means that the full identifiers are <code class="docutils literal notranslate"><span class="pre">nat.gcd</span></code> and <code class="docutils literal notranslate"><span class="pre">nat.lcm</span></code>.
Similarly, the names of the theorems listed are prefixed by <code class="docutils literal notranslate"><span class="pre">nat</span></code>.
The command <code class="docutils literal notranslate"><span class="pre">open</span> <span class="pre">nat</span></code> opens the namespace,
allowing us to use the shorter names.</p>
<p>See if you can guess the names of the theorems you will need to
prove the following:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.nat.gcd%0A%0Aopen%20nat%0A%0Avariables%20m%20n%20%3A%20%E2%84%95%0A%0A--%20BEGIN%0Aexample%20%3A%20gcd%20m%20n%20%3D%20gcd%20n%20m%20%3A%3D%0Abegin%0A%20%20sorry%0Aend%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1609.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">gcd</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">gcd</span> <span class="n">n</span> <span class="n">m</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</pre></div>
</div>
</div></div>
<div class="section" id="proving-facts-about-algebraic-structures">
<span id="id5"></span><h2><span class="section-number">2.5. </span>Proving Facts about Algebraic Structures<a class="headerlink" href="#proving-facts-about-algebraic-structures" title="Permalink to this headline">&#182;</a></h2>
<p>In Section <a class="reference internal" href="#proving-identities-in-algebraic-structures"><span class="std std-numref">Section 2.2</span></a>,
we saw that many common identities governing the real numbers hold
in more general classes of algebraic structures,
such as commutative rings.
We can use any axioms we want to describe an algebraic structure,
not just equations.
For example, a <em>partial order</em> consists of a set with a
binary relation that is reflexive and transitive,
like <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code> on the real numbers.
Lean knows about partial orders:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20%7B%CE%B1%20%3A%20Type*%7D%20%5Bpartial_order%20%CE%B1%5D%0Avariables%20x%20y%20z%20%3A%20%CE%B1%0A%0A%23check%20x%20%E2%89%A4%20y%0A%23check%20(le_refl%20x%20%3A%20x%20%E2%89%A4%20x)%0A%23check%20(le_trans%20%3A%20x%20%E2%89%A4%20y%20%E2%86%92%20y%20%E2%89%A4%20z%20%E2%86%92%20x%20%E2%89%A4%20z)" target="_blank" tryitfile="../examples/basic_skills/unnamed_1641.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">&#945;</span><span class="o">]</span>
<span class="kd">variables</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#945;</span>

<span class="k">#check</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_refl</span> <span class="n">x</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">x</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_trans</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">z</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">z</span><span class="o">)</span>
</pre></div>
</div>
</div><p>Here we are adopting the mathlib convention of using
letters like <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, <code class="docutils literal notranslate"><span class="pre">&#946;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&#947;</span></code>
(entered as <code class="docutils literal notranslate"><span class="pre">\a</span></code>, <code class="docutils literal notranslate"><span class="pre">\b</span></code>, and <code class="docutils literal notranslate"><span class="pre">\g</span></code>)
for arbitrary types.
The library often uses letters like <code class="docutils literal notranslate"><span class="pre">R</span></code> and <code class="docutils literal notranslate"><span class="pre">G</span></code>
for the carries of algebraic structures likes rings and groups,
respectively,
but in general Greek letters are used for types,
especially when there is little or no structure
associated with them.</p>
<p>Associated to any partial order, <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code>,
there is also a <em>strict partial order</em>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>,
which acts somewhat like <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> on the real numbers.
Saying that <code class="docutils literal notranslate"><span class="pre">x</span></code> is less than <code class="docutils literal notranslate"><span class="pre">y</span></code> in this order
is equivalent to saying that it is less-than-or-equal to <code class="docutils literal notranslate"><span class="pre">y</span></code>
and not equal to <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20order.basic%0A%0Avariables%20%7B%CE%B1%20%3A%20Type*%7D%20%5Bpartial_order%20%CE%B1%5D%0Avariables%20x%20y%20z%20%3A%20%CE%B1%0A%0A--%20BEGIN%0A%23check%20x%20%3C%20y%0A%23check%20(lt_irrefl%20x%20%3A%20%C2%AC%20x%20%3C%20x)%0A%23check%20(lt_trans%20%3A%20x%20%3C%20y%20%E2%86%92%20y%20%3C%20z%20%E2%86%92%20x%20%3C%20z)%0A%23check%20(lt_of_le_of_lt%20%3A%20x%20%E2%89%A4%20y%20%E2%86%92%20y%20%3C%20z%20%E2%86%92%20x%20%3C%20z)%0A%23check%20(lt_of_lt_of_le%20%3A%20x%20%3C%20y%20%E2%86%92%20y%20%E2%89%A4%20z%20%E2%86%92%20x%20%3C%20z)%0A%0Aexample%20%3A%20x%20%3C%20y%20%E2%86%94%20x%20%E2%89%A4%20y%20%E2%88%A7%20x%20%E2%89%A0%20y%20%3A%3D%0Alt_iff_le_and_ne%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1668.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="k">#check</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">lt_irrefl</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">&#172;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">lt_trans</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">z</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">z</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">lt_of_le_of_lt</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">z</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">z</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">lt_of_lt_of_le</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">z</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">z</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">&#8596;</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8743;</span> <span class="n">x</span> <span class="bp">&#8800;</span> <span class="n">y</span> <span class="o">:=</span>
<span class="n">lt_iff_le_and_ne</span>
</pre></div>
</div>
</div><p>In this example, the symbol <code class="docutils literal notranslate"><span class="pre">&#8743;</span></code> stands for &#8220;and,&#8221;
the symbol <code class="docutils literal notranslate"><span class="pre">&#172;</span></code> stands for &#8220;not,&#8221; and
<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8800;</span> <span class="pre">y</span></code> abbreviates <code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">(x</span> <span class="pre">=</span> <span class="pre">y)</span></code>.
In a later chapter, you will learn how to use
these logical connectives to <em>prove</em> that <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>
has the properties indicated.</p>
<p>A <em>lattice</em> is a structure that extends a partial
order with operations <code class="docutils literal notranslate"><span class="pre">&#8851;</span></code> and <code class="docutils literal notranslate"><span class="pre">&#8852;</span></code> that are
analogous to <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> on the real numbers:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20order.lattice%0A%0Avariables%20%7B%CE%B1%20%3A%20Type*%7D%20%5Blattice%20%CE%B1%5D%0Avariables%20x%20y%20z%20%3A%20%CE%B1%0A%0A%23check%20x%20%E2%8A%93%20y%0A%23check%20(inf_le_left%20%3A%20x%20%E2%8A%93%20y%20%E2%89%A4%20x)%0A%23check%20(inf_le_right%20%3A%20x%20%E2%8A%93%20y%20%E2%89%A4%20y)%0A%23check%20(le_inf%20%3A%20z%20%E2%89%A4%20x%20%E2%86%92%20z%20%E2%89%A4%20y%20%E2%86%92%20z%20%E2%89%A4%20x%20%E2%8A%93%20y)%0A%0A%23check%20x%20%E2%8A%94%20y%0A%23check%20(le_sup_left%20%3A%20x%20%E2%89%A4%20x%20%E2%8A%94%20y)%0A%23check%20(le_sup_right%3A%20y%20%E2%89%A4%20x%20%E2%8A%94%20y)%0A%23check%20(sup_le%20%3A%20x%20%E2%89%A4%20z%20%E2%86%92%20y%20%E2%89%A4%20z%20%E2%86%92%20x%20%E2%8A%94%20y%20%E2%89%A4%20z)" target="_blank" tryitfile="../examples/basic_skills/unnamed_1699.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="n">order.lattice</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">lattice</span> <span class="n">&#945;</span><span class="o">]</span>
<span class="kd">variables</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#945;</span>

<span class="k">#check</span> <span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">y</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">inf_le_left</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">inf_le_right</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">y</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_inf</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="bp">&#8594;</span> <span class="n">z</span> <span class="bp">&#8804;</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="n">z</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">y</span><span class="o">)</span>

<span class="k">#check</span> <span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">y</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_sup_left</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">y</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">le_sup_right</span><span class="o">:</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">y</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">sup_le</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">z</span> <span class="bp">&#8594;</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">z</span> <span class="bp">&#8594;</span> <span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">y</span> <span class="bp">&#8804;</span> <span class="n">z</span><span class="o">)</span>
</pre></div>
</div>
</div><p>The characterizations of <code class="docutils literal notranslate"><span class="pre">&#8851;</span></code> and <code class="docutils literal notranslate"><span class="pre">&#8852;</span></code> justify calling them
the <em>greatest lower bound</em> and <em>least upper bound</em>, respectively.
You can type them in VS code using <code class="docutils literal notranslate"><span class="pre">\glb</span></code> and <code class="docutils literal notranslate"><span class="pre">\lub</span></code>.
The symbols are also often called then <em>infimum</em> and
the <em>supremum</em>,
and mathlib refers to them as <code class="docutils literal notranslate"><span class="pre">inf</span></code> and <code class="docutils literal notranslate"><span class="pre">sup</span></code> in
theorem names.
To further complicate matters,
they are also often called <em>meet</em> and <em>join</em>.
Therefore, if you work with lattices,
you have to keep the following dictionary in mind:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#8851;</span></code> is the <em>greatest lower bound</em>, <em>infimum</em>, or <em>meet</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#8852;</span></code> is the <em>least upper bound</em>, <em>supremum</em>, or <em>join</em>.</p></li>
</ul>
<p>Some instances of lattices include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> on any total order, such as the integers or real numbers with <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#8745;</span></code> and <code class="docutils literal notranslate"><span class="pre">&#8746;</span></code> on the collection of subsets of some domain, with the ordering <code class="docutils literal notranslate"><span class="pre">&#8838;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#8743;</span></code> and <code class="docutils literal notranslate"><span class="pre">&#8744;</span></code> on boolean truth values, with ordering <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8804;</span> <span class="pre">y</span></code> if either <code class="docutils literal notranslate"><span class="pre">x</span></code> is false or <code class="docutils literal notranslate"><span class="pre">y</span></code> is true</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gcd</span></code> and <code class="docutils literal notranslate"><span class="pre">lcm</span></code> on the natural numbers (or positive natural numbers), with the divisibility ordering, <code class="docutils literal notranslate"><span class="pre">&#8739;</span></code></p></li>
<li><p>the collection of linear subspaces of a vector space,
where the greatest lower bound is given by the intersection,
the least upper bound is given by the sum of the two spaces,
and the ordering is inclusion</p></li>
<li><p>the collection of topologies on a set (or, in Lean, a type),
where the greatest lower bound of two topologies consists of
the topology that is generated by their union,
the least upper bound is their intersection,
and the ordering is reverse inclusion</p></li>
</ul>
<p>You can check that, as with <code class="docutils literal notranslate"><span class="pre">min</span></code> / <code class="docutils literal notranslate"><span class="pre">max</span></code> and <code class="docutils literal notranslate"><span class="pre">gcd</span></code> / <code class="docutils literal notranslate"><span class="pre">lcm</span></code>,
you can prove the commutativity and associativity of the infimum and supremum
using only their characterizing axioms,
together with <code class="docutils literal notranslate"><span class="pre">le_refl</span></code> and <code class="docutils literal notranslate"><span class="pre">le_trans</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20order.lattice%0A%0Avariables%20%7B%CE%B1%20%3A%20Type*%7D%20%5Blattice%20%CE%B1%5D%0Avariables%20x%20y%20z%20%3A%20%CE%B1%0A%0A--%20BEGIN%0Aexample%20%3A%20x%20%E2%8A%93%20y%20%3D%20y%20%E2%8A%93%20x%20%3A%3D%20sorry%0Aexample%20%3A%20x%20%E2%8A%93%20y%20%E2%8A%93%20z%20%3D%20x%20%E2%8A%93%20(y%20%E2%8A%93%20z)%20%3A%3D%20sorry%0Aexample%20%3A%20x%20%E2%8A%94%20y%20%3D%20y%20%E2%8A%94%20x%20%3A%3D%20sorry%0Aexample%20%3A%20x%20%E2%8A%94%20y%20%E2%8A%94%20z%20%3D%20x%20%E2%8A%94%20(y%20%E2%8A%94%20z)%20%3A%3D%20sorry%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1758.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">&#8851;</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">y</span> <span class="bp">&#8851;</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">&#8851;</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&#8851;</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">&#8852;</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">y</span> <span class="bp">&#8852;</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">&#8852;</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&#8852;</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>
</div>
</div><p>You can find these theorems in the mathlib as <code class="docutils literal notranslate"><span class="pre">inf_comm</span></code>, <code class="docutils literal notranslate"><span class="pre">inf_assoc</span></code>,
<code class="docutils literal notranslate"><span class="pre">sup_comm</span></code>, and <code class="docutils literal notranslate"><span class="pre">sup_assoc</span></code>, respectively.</p>
<p>Another good exercise is to prove the <em>absorption laws</em>
using only those axioms:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20order.lattice%0A%0Avariables%20%7B%CE%B1%20%3A%20Type*%7D%20%5Blattice%20%CE%B1%5D%0Avariables%20x%20y%20z%20%3A%20%CE%B1%0A%0A--%20BEGIN%0Aexample%20%3A%20x%20%E2%8A%93%20(x%20%E2%8A%94%20y)%20%3D%20x%20%3A%3D%20sorry%0Aexample%20%3A%20x%20%E2%8A%94%20(x%20%E2%8A%93%20y)%20%3D%20x%20%3A%3D%20sorry%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1778.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8851;</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8852;</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>
</div>
</div><p>These can be found in mathlib with the names <code class="docutils literal notranslate"><span class="pre">inf_sup_self</span></code> and <code class="docutils literal notranslate"><span class="pre">sup_inf_self</span></code>.</p>
<p>A lattice that satisfies the additional identities
<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8851;</span> <span class="pre">(y</span> <span class="pre">&#8852;</span> <span class="pre">z)</span> <span class="pre">=</span> <span class="pre">(x</span> <span class="pre">&#8851;</span> <span class="pre">y)</span> <span class="pre">&#8852;</span> <span class="pre">(x</span> <span class="pre">&#8851;</span> <span class="pre">z)</span></code> and
<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8852;</span> <span class="pre">(y</span> <span class="pre">&#8851;</span> <span class="pre">z)</span> <span class="pre">=</span> <span class="pre">(x</span> <span class="pre">&#8852;</span> <span class="pre">y)</span> <span class="pre">&#8851;</span> <span class="pre">(x</span> <span class="pre">&#8852;</span> <span class="pre">z)</span></code>
is called a <em>distributive lattice</em>. Lean knows about these too:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20order.lattice%0A%0Avariables%20%7B%CE%B1%20%3A%20Type*%7D%20%5Bdistrib_lattice%20%CE%B1%5D%0Avariables%20x%20y%20z%20%3A%20%CE%B1%0A%0A%23check%20(inf_sup_left%20%3A%20x%20%E2%8A%93%20(y%20%E2%8A%94%20z)%20%3D%20(x%20%E2%8A%93%20y)%20%E2%8A%94%20(x%20%E2%8A%93%20z))%0A%23check%20(inf_sup_right%20%3A%20(x%20%E2%8A%94%20y)%20%E2%8A%93%20z%20%3D%20(x%20%E2%8A%93%20z)%20%E2%8A%94%20(y%20%E2%8A%93%20z))%0A%23check%20(sup_inf_left%20%3A%20x%20%E2%8A%94%20(y%20%E2%8A%93%20z)%20%3D%20(x%20%E2%8A%94%20y)%20%E2%8A%93%20(x%20%E2%8A%94%20z))%0A%23check%20(sup_inf_right%20%3A%20(x%20%E2%8A%93%20y)%20%E2%8A%94%20z%20%3D%20(x%20%E2%8A%94%20z)%20%E2%8A%93%20(y%20%E2%8A%94%20z))" target="_blank" tryitfile="../examples/basic_skills/unnamed_1797.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="n">order.lattice</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">distrib_lattice</span> <span class="n">&#945;</span><span class="o">]</span>
<span class="kd">variables</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#945;</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">inf_sup_left</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8851;</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&#8852;</span> <span class="n">z</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&#8852;</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">z</span><span class="o">))</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">inf_sup_right</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&#8851;</span> <span class="n">z</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">z</span><span class="o">)</span> <span class="bp">&#8852;</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&#8851;</span> <span class="n">z</span><span class="o">))</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">sup_inf_left</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8852;</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&#8851;</span> <span class="n">z</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&#8851;</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">z</span><span class="o">))</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">sup_inf_right</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&#8852;</span> <span class="n">z</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">z</span><span class="o">)</span> <span class="bp">&#8851;</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&#8852;</span> <span class="n">z</span><span class="o">))</span>
</pre></div>
</div>
</div><p>The left and right versions are easily shown to be
equivalent, given the commutativity of <code class="docutils literal notranslate"><span class="pre">&#8851;</span></code> and <code class="docutils literal notranslate"><span class="pre">&#8852;</span></code>.
It is a good exercise to show that not every lattice
is distributive
by providing an explicit description of a
nondistributive lattice with finitely many elements.
It is also a good exercise to show that in any lattice,
either distributivity law implies the other:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20order.lattice%0A%0Avariables%20%7B%CE%B1%20%3A%20Type*%7D%20%5Blattice%20%CE%B1%5D%0Avariables%20a%20b%20c%20%3A%20%CE%B1%0A%0Aexample%20(h%20%3A%20%E2%88%80%20x%20y%20z%20%3A%20%CE%B1%2C%20x%20%E2%8A%93%20(y%20%E2%8A%94%20z)%20%3D%20(x%20%E2%8A%93%20y)%20%E2%8A%94%20(x%20%E2%8A%93%20z))%20%3A%0A%20%20(a%20%E2%8A%94%20b)%20%E2%8A%93%20c%20%3D%20(a%20%E2%8A%93%20c)%20%E2%8A%94%20(b%20%E2%8A%93%20c)%20%3A%3D%0Asorry%0A%0Aexample%20(h%20%3A%20%E2%88%80%20x%20y%20z%20%3A%20%CE%B1%2C%20x%20%E2%8A%94%20(y%20%E2%8A%93%20z)%20%3D%20(x%20%E2%8A%94%20y)%20%E2%8A%93%20(x%20%E2%8A%94%20z))%20%3A%0A%20%20(a%20%E2%8A%93%20b)%20%E2%8A%94%20c%20%3D%20(a%20%E2%8A%94%20c)%20%E2%8A%93%20(b%20%E2%8A%94%20c)%20%3A%3D%0Asorry" target="_blank" tryitfile="../examples/basic_skills/unnamed_1818.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="n">order.lattice</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">lattice</span> <span class="n">&#945;</span><span class="o">]</span>
<span class="kd">variables</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#945;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&#8851;</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&#8852;</span> <span class="n">z</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&#8852;</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8851;</span> <span class="n">z</span><span class="o">))</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">&#8852;</span> <span class="n">b</span><span class="o">)</span> <span class="bp">&#8851;</span> <span class="n">c</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">&#8851;</span> <span class="n">c</span><span class="o">)</span> <span class="bp">&#8852;</span> <span class="o">(</span><span class="n">b</span> <span class="bp">&#8851;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&#8852;</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&#8851;</span> <span class="n">z</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&#8851;</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&#8852;</span> <span class="n">z</span><span class="o">))</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">&#8851;</span> <span class="n">b</span><span class="o">)</span> <span class="bp">&#8852;</span> <span class="n">c</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">&#8852;</span> <span class="n">c</span><span class="o">)</span> <span class="bp">&#8851;</span> <span class="o">(</span><span class="n">b</span> <span class="bp">&#8852;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>It is possible to combine axiomatic structures into larger ones.
For example, an <em>ordered ring</em> consists of a ring together with a
partial order on the carrier
satisfying additional axioms that say that the ring operations
are compatible with the order:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20%7BR%20%3A%20Type*%7D%20%5Bordered_ring%20R%5D%0Avariables%20a%20b%20c%20%3A%20R%0A%0A%23check%20(add_le_add_left%20%3A%20a%20%E2%89%A4%20b%20%E2%86%92%20%E2%88%80%20c%2C%20c%20%2B%20a%20%E2%89%A4%20c%20%2B%20b)%0A%23check%20(mul_pos%20%3A%200%20%3C%20a%20%E2%86%92%200%20%3C%20b%20%E2%86%92%200%20%3C%20a%20*%20b)%0A%23check%20(zero_ne_one%20%3A%20(0%20%3A%20R)%20%E2%89%A0%201)" target="_blank" tryitfile="../examples/basic_skills/unnamed_1839.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">R</span><span class="o">]</span>
<span class="kd">variables</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">add_le_add_left</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="bp">&#8704;</span> <span class="n">c</span><span class="o">,</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">mul_pos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">&#8594;</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">zero_ne_one</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="bp">&#8800;</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</div>
</div><p>In a later chapter, we will see how to derive the following from <code class="docutils literal notranslate"><span class="pre">mul_pos</span></code>
and the definition of <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20%7BR%20%3A%20Type*%7D%20%5Bordered_ring%20R%5D%0Avariables%20a%20b%20c%20%3A%20R%0A%0A--%20BEGIN%0A%23check%20(mul_nonneg%20%3A%200%20%E2%89%A4%20a%20%E2%86%92%200%20%E2%89%A4%20b%20%E2%86%92%200%20%E2%89%A4%20a%20*%20b)%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1853.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="k">#check</span> <span class="o">(</span><span class="n">mul_nonneg</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">a</span> <span class="bp">&#8594;</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span>
</pre></div>
</div>
</div><p>It is then an extended exercise to show that many common facts
used to reason about arithmetic and the ordering on the real
numbers hold generically for any ordered ring.
Here are a couple of examples you can try,
using only properties of rings, partial orders, and the facts
enumerated in the last two examples:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20%7BR%20%3A%20Type*%7D%20%5Bordered_ring%20R%5D%0Avariables%20a%20b%20c%20%3A%20R%0A%0A--%20BEGIN%0Aexample%20%3A%20a%20%E2%89%A4%20b%20%E2%86%94%200%20%E2%89%A4%20b%20-%20a%20%3A%3D%20sorry%0A%0Aexample%20(h%20%3A%20a%20%E2%89%A4%20b)%20(h'%20%3A%200%20%E2%89%A4%20c)%20%3A%20a%20*%20c%20%E2%89%A4%20b%20*%20c%20%3A%3D%20sorry%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1869.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">&#8596;</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">-</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8804;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">&#8804;</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>
</div>
</div><p>Finally, here is one last example.
A <em>metric space</em> consists of a set equipped with a notion of
distance, <code class="docutils literal notranslate"><span class="pre">dist</span> <span class="pre">x</span> <span class="pre">y</span></code>,
mapping any pair of elements to a real number.
The distance function is assumed to satisfy the following axioms:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20topology.metric_space.basic%0A%0Avariables%20%7BX%20%3A%20Type*%7D%20%5Bmetric_space%20X%5D%0Avariables%20x%20y%20z%20%3A%20X%0A%0A%23check%20(dist_self%20x%20%3A%20dist%20x%20x%20%3D%200)%0A%23check%20(dist_comm%20x%20y%20%3A%20dist%20x%20y%20%3D%20dist%20y%20x)%0A%23check%20(dist_triangle%20x%20y%20z%20%3A%20dist%20x%20z%20%E2%89%A4%20dist%20x%20y%20%2B%20dist%20y%20z)" target="_blank" tryitfile="../examples/basic_skills/unnamed_1886.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="n">topology.metric_space.basic</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">X</span><span class="o">]</span>
<span class="kd">variables</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">X</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">dist_self</span> <span class="n">x</span> <span class="o">:</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">dist_comm</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">dist</span> <span class="n">y</span> <span class="n">x</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">dist_triangle</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">z</span> <span class="bp">&#8804;</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y</span> <span class="n">z</span><span class="o">)</span>
</pre></div>
</div>
</div><p>Having mastered this section,
you can show that it follows from these axioms that distances are
always nonnegative:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20topology.metric_space.basic%0A%0Avariables%20%7BX%20%3A%20Type*%7D%20%5Bmetric_space%20X%5D%0A%0A--%20BEGIN%0Aexample%20(x%20y%20%3A%20X)%20%3A%200%20%E2%89%A4%20dist%20x%20y%20%3A%3D%20sorry%0A--%20END" target="_blank" tryitfile="../examples/basic_skills/unnamed_1901.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>
</div>
</div><p>We recommend making use of the theorem <code class="docutils literal notranslate"><span class="pre">nonneg_of_mul_nonneg_left</span></code>.
As you may have guessed, this theorem is called <code class="docutils literal notranslate"><span class="pre">dist_nonneg</span></code> in mathlib.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Mathematics in Lean</a></h1>








<!-- <h3>Navigation</h3> -->
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Basic Skills</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#calculating">2.1. Calculating</a></li>
<li class="toctree-l2"><a class="reference internal" href="#proving-identities-in-algebraic-structures">2.2. Proving Identities in Algebraic Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-theorems-and-lemmas">2.3. Using Theorems and Lemmas</a></li>
<li class="toctree-l2"><a class="reference internal" href="#more-on-order-and-divisibility">2.4. More on Order and Divisibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="#proving-facts-about-algebraic-structures">2.5. Proving Facts about Algebraic Structures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="the_natural_numbers.html">3. The Natural Numbers</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="mathematics_in_lean.pdf">PDF version</a></li>
    
    <li class="toctree-l1"><a href="https://leanprover.github.io/">Lean Home</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Jeremy Avigad, Kevin Buzzard, Robert Y. Lewis, Patrick Massot.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/basic_skills.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>