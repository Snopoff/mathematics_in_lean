
<!DOCTYPE html>

<html>
  <head>
    <meta charset="ascii" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4. Sets and Functions &#8212; Mathematics in Lean 0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="3. Logic" href="logic.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="sets-and-functions">
<span id="sets-functions-and-relations"></span><h1><span class="section-number">4. </span>Sets and Functions<a class="headerlink" href="#sets-and-functions" title="Permalink to this headline">&#182;</a></h1>
<p>The vocabulary of sets, relations, and functions provides a uniform
language for carrying out constructions in all the branches of
mathematics.
Since functions and relations can be defined in terms of sets,
axiomatic set theory can be used as a foundation for mathematics.</p>
<p>Lean&#8217;s foundation is based instead on the primitive notion of a <em>type</em>,
and it includes ways of defining functions between types.
Every expression in Lean has a type:
there are natural numbers, real numbers, functions from reals to reals,
groups, vector spaces, and so on.
Some expressions <em>are</em> types,
which is to say,
their type is <code class="docutils literal notranslate"><span class="pre">Type</span></code>.
Lean and mathlib provide ways of defining new types,
and ways of defining objects of those types.</p>
<p>Conceptually, you can think of a type as just a set of objects.
Requiring every object to have a type has some advantages.
For example, it makes it possible to overload notation like <code class="docutils literal notranslate"><span class="pre">+</span></code>,
and it sometimes makes input less verbose
because Lean can infer a lot of information from
an object&#8217;s type.
The type system also enables Lean to flag errors when you
apply a function to the wrong number of arguments,
or apply a function to arguments of the wrong type.</p>
<p>Lean&#8217;s library does define elementary set-theoretic notions.
In contrast to set theory,
in Lean a set is always a set of objects of some type,
such as a set natural numbers or a set of functions
from real numbers to real numbers.
The distinction between types and set takes some getting used to,
but this chapter will take you through the essentials.</p>
<div class="section" id="sets">
<span id="id1"></span><h2><span class="section-number">4.1. </span>Sets<a class="headerlink" href="#sets" title="Permalink to this headline">&#182;</a></h2>
<p id="index-0">If <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> is any type, the type <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">&#945;</span></code> consists of sets
of elements of <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>.
This type supports the usual set-theoretic operations and relations.
For example, <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8838;</span> <span class="pre">t</span></code> says that <code class="docutils literal notranslate"><span class="pre">s</span></code> is a subset of <code class="docutils literal notranslate"><span class="pre">t</span></code>,
<code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8745;</span> <span class="pre">t</span></code> denotes the intersection of <code class="docutils literal notranslate"><span class="pre">s</span></code> and <code class="docutils literal notranslate"><span class="pre">t</span></code>,
and <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8746;</span> <span class="pre">t</span></code> denotes their union.
The subset relation can be typed with <code class="docutils literal notranslate"><span class="pre">\ss</span></code> or <code class="docutils literal notranslate"><span class="pre">\sub</span></code>,
intersection can be typed with <code class="docutils literal notranslate"><span class="pre">\i</span></code> or <code class="docutils literal notranslate"><span class="pre">\cap</span></code>,
and union can be typed with <code class="docutils literal notranslate"><span class="pre">\un</span></code> or <code class="docutils literal notranslate"><span class="pre">\cup</span></code>.
The library also defines the set <code class="docutils literal notranslate"><span class="pre">univ</span></code>,
which consists of all the elements of type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>,
and the empty set, <code class="docutils literal notranslate"><span class="pre">&#8709;</span></code>, which can be typed as <code class="docutils literal notranslate"><span class="pre">\empty</span></code>.
Given <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> and <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">set</span> <span class="pre">&#945;</span></code>,
the expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code> says that <code class="docutils literal notranslate"><span class="pre">x</span></code> is a member of <code class="docutils literal notranslate"><span class="pre">s</span></code>.
Theorems that mention set membership often include <code class="docutils literal notranslate"><span class="pre">mem</span></code>
in their name.
The expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8713;</span> <span class="pre">s</span></code> abbreviates <code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code>.
You can type <code class="docutils literal notranslate"><span class="pre">&#8712;</span></code> as <code class="docutils literal notranslate"><span class="pre">\in</span></code> or <code class="docutils literal notranslate"><span class="pre">\mem</span></code> and <code class="docutils literal notranslate"><span class="pre">&#8713;</span></code> as <code class="docutils literal notranslate"><span class="pre">\notin</span></code>.</p>
<p id="index-1">One way to prove things about sets is to use <code class="docutils literal notranslate"><span class="pre">rw</span></code>
or the simplifier to expand the definitions.
In the second example below, we use <code class="docutils literal notranslate"><span class="pre">simp</span> <span class="pre">only</span></code>
to tell the simplifier to use only the list
of identities we give it,
and not its full database of identities.
Unlike <code class="docutils literal notranslate"><span class="pre">rw</span></code>, <code class="docutils literal notranslate"><span class="pre">simp</span></code> can perform simplifications
inside a universal or existential quantifier.
If you step through the proof,
you can see the effects of these commands.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0Aopen%20set%0A%0Aexample%20(h%20%3A%20s%20%E2%8A%86%20t)%20%3A%20s%20%E2%88%A9%20u%20%E2%8A%86%20t%20%E2%88%A9%20u%20%3A%3D%0Abegin%0A%20%20rw%20%5Bsubset_def%2C%20inter_def%2C%20inter_def%5D%2C%0A%20%20rw%20subset_def%20at%20h%2C%0A%20%20dsimp%2C%0A%20%20rintros%20x%20%E2%9F%A8xs%2C%20xu%E2%9F%A9%2C%0A%20%20exact%20%E2%9F%A8h%20_%20xs%2C%20xu%E2%9F%A9%2C%0Aend%0A%0Aexample%20(h%20%3A%20s%20%E2%8A%86%20t)%20%3A%20s%20%E2%88%A9%20u%20%E2%8A%86%20t%20%E2%88%A9%20u%20%3A%3D%0Abegin%0A%20%20simp%20only%20%5Bsubset_def%2C%20mem_inter_eq%5D%20at%20*%2C%0A%20%20rintros%20x%20%E2%9F%A8xs%2C%20xu%E2%9F%A9%2C%0A%20%20exact%20%E2%9F%A8h%20_%20xs%2C%20xu%E2%9F%A9%2C%0Aend" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_80.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">variable</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="n">u</span> <span class="o">:</span> <span class="n">set</span> <span class="n">&#945;</span><span class="o">)</span>

<span class="kn">open</span> <span class="n">set</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">t</span> <span class="bp">&#8745;</span> <span class="n">u</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">subset_def</span><span class="o">,</span> <span class="n">inter_def</span><span class="o">,</span> <span class="n">inter_def</span><span class="o">],</span>
  <span class="n">rw</span> <span class="n">subset_def</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">dsimp</span><span class="o">,</span>
  <span class="n">rintros</span> <span class="n">x</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xu</span><span class="o">&#10217;,</span>
  <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">h</span> <span class="n">_</span> <span class="n">xs</span><span class="o">,</span> <span class="n">xu</span><span class="o">&#10217;,</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">t</span> <span class="bp">&#8745;</span> <span class="n">u</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">subset_def</span><span class="o">,</span> <span class="n">mem_inter_eq</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
  <span class="n">rintros</span> <span class="n">x</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xu</span><span class="o">&#10217;,</span>
  <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">h</span> <span class="n">_</span> <span class="n">xs</span><span class="o">,</span> <span class="n">xu</span><span class="o">&#10217;,</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>In this example, we open the <code class="docutils literal notranslate"><span class="pre">set</span></code> namespace to have
access to the shorter names for the theorems.
But, in fact, we can delete the calls to <code class="docutils literal notranslate"><span class="pre">rw</span></code> and <code class="docutils literal notranslate"><span class="pre">simp</span></code>
entirely:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20(h%20%3A%20s%20%E2%8A%86%20t)%20%3A%20s%20%E2%88%A9%20u%20%E2%8A%86%20t%20%E2%88%A9%20u%20%3A%3D%0Abegin%0A%20%20intros%20x%20xsu%2C%0A%20%20exact%20%E2%9F%A8h%20xsu.1%2C%20xsu.2%E2%9F%A9%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_110.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">t</span> <span class="bp">&#8745;</span> <span class="n">u</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">xsu</span><span class="o">,</span>
  <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">h</span> <span class="n">xsu.1</span><span class="o">,</span> <span class="n">xsu.2</span><span class="o">&#10217;</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>What is going on here is known as <em>definitional reduction</em>:
to make sense of the <code class="docutils literal notranslate"><span class="pre">intros</span></code> command and the anonymous constructors
Lean is forced to expand the definitions.
The following examples also illustrate the phenomenon:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Atheorem%20foo%20(h%20%3A%20s%20%E2%8A%86%20t)%20%3A%20s%20%E2%88%A9%20u%20%E2%8A%86%20t%20%E2%88%A9%20u%20%3A%3D%0A%CE%BB%20x%20%E2%9F%A8xs%2C%20xu%E2%9F%A9%2C%20%E2%9F%A8h%20xs%2C%20xu%E2%9F%A9%0A%0Aexample%20(h%20%3A%20s%20%E2%8A%86%20t)%20%3A%20s%20%E2%88%A9%20u%20%E2%8A%86%20t%20%E2%88%A9%20u%20%3A%3D%0Aby%20exact%20%CE%BB%20x%20%E2%9F%A8xs%2C%20xu%E2%9F%A9%2C%20%E2%9F%A8h%20xs%2C%20xu%E2%9F%A9%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_128.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">foo</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">t</span> <span class="bp">&#8745;</span> <span class="n">u</span> <span class="o">:=</span>
<span class="bp">&#955;</span> <span class="n">x</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xu</span><span class="o">&#10217;,</span> <span class="o">&#10216;</span><span class="n">h</span> <span class="n">xs</span><span class="o">,</span> <span class="n">xu</span><span class="o">&#10217;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">t</span> <span class="bp">&#8745;</span> <span class="n">u</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">exact</span> <span class="bp">&#955;</span> <span class="n">x</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xu</span><span class="o">&#10217;,</span> <span class="o">&#10216;</span><span class="n">h</span> <span class="n">xs</span><span class="o">,</span> <span class="n">xu</span><span class="o">&#10217;</span>
</pre></div>
</div>
</div><p>Due to a quirk of how Lean processes its input,
the first example fails if we replace <code class="docutils literal notranslate"><span class="pre">theorem</span> <span class="pre">foo</span></code> with <code class="docutils literal notranslate"><span class="pre">example</span></code>.
This illustrates the pitfalls of relying on definitional reduction
too heavily.
It is often convenient,
but sometimes we have to fall back on unfolding definitions manually.</p>
<p>To deal with unions, we can use <code class="docutils literal notranslate"><span class="pre">set.union_def</span></code> and <code class="docutils literal notranslate"><span class="pre">set.mem_union</span></code>.
Since <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8746;</span> <span class="pre">t</span></code> unfolds to <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8744;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t</span></code>,
we can also use the <code class="docutils literal notranslate"><span class="pre">cases</span></code> tactic to force a definitional reduction.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20s%20%E2%88%A9%20(t%20%E2%88%AA%20u)%20%E2%8A%86%20(s%20%E2%88%A9%20t)%20%E2%88%AA%20(s%20%E2%88%A9%20u)%20%3A%3D%0Abegin%0A%20%20intros%20x%20hx%2C%0A%20%20have%20xs%20%3A%20x%20%E2%88%88%20s%20%3A%3D%20hx.1%2C%0A%20%20have%20xtu%20%3A%20x%20%E2%88%88%20t%20%E2%88%AA%20u%20%3A%3D%20hx.2%2C%0A%20%20cases%20xtu%20with%20xt%20xu%2C%0A%20%20%7B%20left%2C%0A%20%20%20%20show%20x%20%E2%88%88%20s%20%E2%88%A9%20t%2C%0A%20%20%20%20exact%20%E2%9F%A8xs%2C%20xt%E2%9F%A9%20%7D%2C%0A%20%20right%2C%0A%20%20show%20x%20%E2%88%88%20s%20%E2%88%A9%20u%2C%0A%20%20exact%20%E2%9F%A8xs%2C%20xu%E2%9F%A9%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_152.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="o">(</span><span class="n">t</span> <span class="bp">&#8746;</span> <span class="n">u</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span><span class="o">)</span> <span class="bp">&#8746;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">xs</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">hx.1</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">xtu</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">t</span> <span class="bp">&#8746;</span> <span class="n">u</span> <span class="o">:=</span> <span class="n">hx.2</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">xtu</span> <span class="k">with</span> <span class="n">xt</span> <span class="n">xu</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">left</span><span class="o">,</span>
    <span class="k">show</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xt</span><span class="o">&#10217;</span> <span class="o">},</span>
  <span class="n">right</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">u</span><span class="o">,</span>
  <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xu</span><span class="o">&#10217;</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Since intersection binds tighter than union,
the use of parentheses in the expression <code class="docutils literal notranslate"><span class="pre">(s</span> <span class="pre">&#8745;</span> <span class="pre">t)</span> <span class="pre">&#8746;</span> <span class="pre">(s</span> <span class="pre">&#8745;</span> <span class="pre">u)</span></code>
is unnecessary, but they make the meaning of the expression clearer.
The following is a shorter proof of the same fact:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20s%20%E2%88%A9%20(t%20%E2%88%AA%20u)%20%E2%8A%86%20(s%20%E2%88%A9%20t)%20%E2%88%AA%20(s%20%E2%88%A9%20u)%20%3A%3D%0Abegin%0A%20%20rintros%20x%20%E2%9F%A8xs%2C%20xt%20%7C%20xu%E2%9F%A9%2C%0A%20%20%7B%20left%2C%20exact%20%E2%9F%A8xs%2C%20xt%E2%9F%A9%20%7D%2C%0A%20%20right%2C%20exact%20%E2%9F%A8xs%2C%20xu%E2%9F%A9%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_178.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="o">(</span><span class="n">t</span> <span class="bp">&#8746;</span> <span class="n">u</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span><span class="o">)</span> <span class="bp">&#8746;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rintros</span> <span class="n">x</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xt</span> <span class="bp">|</span> <span class="n">xu</span><span class="o">&#10217;,</span>
  <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xt</span><span class="o">&#10217;</span> <span class="o">},</span>
  <span class="n">right</span><span class="o">,</span> <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xu</span><span class="o">&#10217;</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>As an exercise, try proving the other inclusion:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Aopen%20set%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20(s%20%E2%88%A9%20t)%20%E2%88%AA%20(s%20%E2%88%A9%20u)%20%E2%8A%86%20s%20%E2%88%A9%20(t%20%E2%88%AA%20u)%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_196.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span><span class="o">)</span> <span class="bp">&#8746;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">u</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="o">(</span><span class="n">t</span> <span class="bp">&#8746;</span> <span class="n">u</span><span class="o">):=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>It might help to know that when using <code class="docutils literal notranslate"><span class="pre">rintros</span></code>,
sometimes we need to use parentheses around a disjunctive pattern
<code class="docutils literal notranslate"><span class="pre">h1</span> <span class="pre">|</span> <span class="pre">h2</span></code> to get Lean to parse it correctly.</p>
<p>The library also defines set difference, <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">\</span> <span class="pre">t</span></code>,
where the backslash is a special unicode character
entered as <code class="docutils literal notranslate"><span class="pre">\\</span></code>.
The expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">\</span> <span class="pre">t</span></code> expands to <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8743;</span> <span class="pre">x</span> <span class="pre">&#8713;</span> <span class="pre">t</span></code>.
(The <code class="docutils literal notranslate"><span class="pre">&#8713;</span></code> can be entered as <code class="docutils literal notranslate"><span class="pre">\notin</span></code>.)
It can be rewritten manually using <code class="docutils literal notranslate"><span class="pre">set.diff_eq</span></code> and <code class="docutils literal notranslate"><span class="pre">dsimp</span></code>
or <code class="docutils literal notranslate"><span class="pre">set.mem_diff</span></code>,
but the following two proofs of the same inclusion
show how to avoid using them.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20s%20%5C%20t%20%5C%20u%20%E2%8A%86%20s%20%5C%20(t%20%E2%88%AA%20u)%20%3A%3D%0Abegin%0A%20%20intros%20x%20xstu%2C%0A%20%20have%20xs%20%3A%20x%20%E2%88%88%20s%20%3A%3D%20xstu.1.1%2C%0A%20%20have%20xnt%20%3A%20x%20%E2%88%89%20t%20%3A%3D%20xstu.1.2%2C%0A%20%20have%20xnu%20%3A%20x%20%E2%88%89%20u%20%3A%3D%20xstu.2%2C%0A%20%20split%2C%0A%20%20%7B%20exact%20xs%20%7D%2C%20dsimp%2C%0A%20%20intro%20xtu%2C%20--%20x%20%E2%88%88%20t%20%E2%88%A8%20x%20%E2%88%88%20u%0A%20%20cases%20xtu%20with%20xt%20xu%2C%0A%20%20%7B%20show%20false%2C%20from%20xnt%20xt%20%7D%2C%0A%20%20show%20false%2C%20from%20xnu%20xu%0Aend%0A%0Aexample%20%3A%20s%20%5C%20t%20%5C%20u%20%E2%8A%86%20s%20%5C%20(t%20%E2%88%AA%20u)%20%3A%3D%0Abegin%0A%20%20rintros%20x%20%E2%9F%A8%E2%9F%A8xs%2C%20xnt%E2%9F%A9%2C%20xnu%E2%9F%A9%2C%0A%20%20use%20xs%2C%0A%20%20rintros%20(xt%20%7C%20xu)%3B%20contradiction%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_224.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">\</span> <span class="n">t</span> <span class="bp">\</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">s</span> <span class="bp">\</span> <span class="o">(</span><span class="n">t</span> <span class="bp">&#8746;</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">xstu</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">xs</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">xstu.1.1</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">xnt</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8713;</span> <span class="n">t</span> <span class="o">:=</span> <span class="n">xstu.1.2</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">xnu</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8713;</span> <span class="n">u</span> <span class="o">:=</span> <span class="n">xstu.2</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">xs</span> <span class="o">},</span> <span class="n">dsimp</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">xtu</span><span class="o">,</span> <span class="c1">-- x &#8712; t &#8744; x &#8712; u</span>
  <span class="n">cases</span> <span class="n">xtu</span> <span class="k">with</span> <span class="n">xt</span> <span class="n">xu</span><span class="o">,</span>
  <span class="o">{</span> <span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">xnt</span> <span class="n">xt</span> <span class="o">},</span>
  <span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">xnu</span> <span class="n">xu</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">\</span> <span class="n">t</span> <span class="bp">\</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">s</span> <span class="bp">\</span> <span class="o">(</span><span class="n">t</span> <span class="bp">&#8746;</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rintros</span> <span class="n">x</span> <span class="o">&#10216;&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xnt</span><span class="o">&#10217;,</span> <span class="n">xnu</span><span class="o">&#10217;,</span>
  <span class="n">use</span> <span class="n">xs</span><span class="o">,</span>
  <span class="n">rintros</span> <span class="o">(</span><span class="n">xt</span> <span class="bp">|</span> <span class="n">xu</span><span class="o">)</span><span class="bp">;</span> <span class="n">contradiction</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>As an exercise, prove the reverse inclusion:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20s%20%5C%20(t%20%E2%88%AA%20u)%20%E2%8A%86%20s%20%5C%20t%20%5C%20u%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_256.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">\</span> <span class="o">(</span><span class="n">t</span> <span class="bp">&#8746;</span> <span class="n">u</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="n">s</span> <span class="bp">\</span> <span class="n">t</span> <span class="bp">\</span> <span class="n">u</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>To prove that two sets are equal,
it suffices to show that every element of one is an element
of the other.
This principle is known as &#8220;extensionality,&#8221;
and, unsurprisingly,
the <code class="docutils literal notranslate"><span class="pre">ext</span></code> tactic is equipped to handle it.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Aopen%20set%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20s%20%E2%88%A9%20t%20%3D%20t%20%E2%88%A9%20s%20%3A%3D%0Abegin%0A%20%20ext%20x%2C%0A%20%20simp%20only%20%5Bmem_inter_eq%5D%2C%0A%20%20split%2C%0A%20%20%7B%20rintros%20%E2%9F%A8xs%2C%20xt%E2%9F%A9%2C%20exact%20%E2%9F%A8xt%2C%20xs%E2%9F%A9%20%7D%2C%0A%20%20rintros%20%E2%9F%A8xt%2C%20xs%E2%9F%A9%2C%20exact%20%E2%9F%A8xs%2C%20xt%E2%9F%A9%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_285.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">&#8745;</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mem_inter_eq</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xt</span><span class="o">&#10217;,</span> <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span> <span class="n">xs</span><span class="o">&#10217;</span> <span class="o">},</span>
  <span class="n">rintros</span> <span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span> <span class="n">xs</span><span class="o">&#10217;,</span> <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xt</span><span class="o">&#10217;</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Once again, deleting the line <code class="docutils literal notranslate"><span class="pre">simp</span> <span class="pre">only</span> <span class="pre">[mem_inter_eq]</span></code>
does not harm the proof.
In fact, if you like inscrutable proof terms,
the following one-line proof is for you:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.basic%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20s%20%E2%88%A9%20t%20%3D%20t%20%E2%88%A9%20s%20%3A%3D%0Aset.ext%20%24%20%CE%BB%20x%2C%20%E2%9F%A8%CE%BB%20%E2%9F%A8xs%2C%20xt%E2%9F%A9%2C%20%E2%9F%A8xt%2C%20xs%E2%9F%A9%2C%20%CE%BB%20%E2%9F%A8xt%2C%20xs%E2%9F%A9%2C%20%E2%9F%A8xs%2C%20xt%E2%9F%A9%E2%9F%A9%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_310.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">&#8745;</span> <span class="n">s</span> <span class="o">:=</span>
<span class="n">set.ext</span> <span class="bp">$</span> <span class="bp">&#955;</span> <span class="n">x</span><span class="o">,</span> <span class="o">&#10216;</span><span class="bp">&#955;</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xt</span><span class="o">&#10217;,</span> <span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span> <span class="n">xs</span><span class="o">&#10217;,</span> <span class="bp">&#955;</span> <span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span> <span class="n">xs</span><span class="o">&#10217;,</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xt</span><span class="o">&#10217;&#10217;</span>
</pre></div>
</div>
</div><p>The dollar sign is a useful syntax:
writing <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">$</span> <span class="pre">...</span></code>
is essentially the same as writing <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">(...)</span></code>,
but it saves us the trouble of having to close
a set of parentheses at the end of a long expression.
Here is an even shorter proof,
using the simplifier:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20s%20%E2%88%A9%20t%20%3D%20t%20%E2%88%A9%20s%20%3A%3D%0Aby%20ext%20x%3B%20simp%20%5Band.comm%5D%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_330.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">&#8745;</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">ext</span> <span class="n">x</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">and.comm</span><span class="o">]</span>
</pre></div>
</div>
</div><p>An alternative to using <code class="docutils literal notranslate"><span class="pre">ext</span></code> is to use
the theorem <code class="docutils literal notranslate"><span class="pre">subset.antisymm</span></code>
which allows us to prove an equation <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">=</span> <span class="pre">t</span></code>
between sets by proving <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8838;</span> <span class="pre">t</span></code> and <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">&#8838;</span> <span class="pre">s</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Aopen%20set%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20s%20%E2%88%A9%20t%20%3D%20t%20%E2%88%A9%20s%20%3A%3D%0Abegin%0A%20%20apply%20subset.antisymm%2C%0A%20%20%7B%20rintros%20x%20%E2%9F%A8xs%2C%20xt%E2%9F%A9%2C%20exact%20%E2%9F%A8xt%2C%20xs%E2%9F%A9%20%7D%2C%0A%20%20rintros%20x%20%E2%9F%A8xt%2C%20xs%E2%9F%A9%2C%20exact%20%E2%9F%A8xs%2C%20xt%E2%9F%A9%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_347.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">&#8745;</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">subset.antisymm</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="n">x</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xt</span><span class="o">&#10217;,</span> <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span> <span class="n">xs</span><span class="o">&#10217;</span> <span class="o">},</span>
  <span class="n">rintros</span> <span class="n">x</span> <span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span> <span class="n">xs</span><span class="o">&#10217;,</span> <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="n">xt</span><span class="o">&#10217;</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Try finishing this proof term:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.basic%0A%0Aopen%20set%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20s%20%E2%88%A9%20t%20%3D%20t%20%E2%88%A9%20s%20%3A%3D%0Asubset.antisymm%20sorry%20sorry%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_367.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">&#8745;</span> <span class="n">s</span> <span class="o">:=</span>
<span class="n">subset.antisymm</span> <span class="n">sorry</span> <span class="n">sorry</span>
</pre></div>
</div>
</div><p>Remember that you can replace <cite>sorry</cite> by an underscore,
and when you hover over it,
Lean will show you what it expects at that point.</p>
<p>Here are some set-theoretic identities you might enjoy proving:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Aopen%20set%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0Avariables%20(s%20t%20u%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20s%20%E2%88%A9%20(s%20%E2%88%AA%20t)%20%3D%20s%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20s%20%E2%88%AA%20(s%20%E2%88%A9%20t)%20%3D%20s%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20(s%20%5C%20t)%20%E2%88%AA%20t%20%3D%20s%20%E2%88%AA%20t%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20(s%20%5C%20t)%20%E2%88%AA%20(t%20%5C%20s)%20%3D%20(s%20%E2%88%AA%20t)%20%5C%20(s%20%E2%88%A9%20t)%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_387.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">s</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8746;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">s</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">s</span> <span class="bp">\</span> <span class="n">t</span><span class="o">)</span> <span class="bp">&#8746;</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">t</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">s</span> <span class="bp">\</span> <span class="n">t</span><span class="o">)</span> <span class="bp">&#8746;</span> <span class="o">(</span><span class="n">t</span> <span class="bp">\</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">t</span><span class="o">)</span> <span class="bp">\</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>When it comes to representing sets,
here is what is going on underneath the hood.
In type theory, a <em>property</em> or <em>predicate</em> on a type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>
is just a function <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code>.
This makes sense:
given <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>, <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">a</span></code> is just the proposition
that <code class="docutils literal notranslate"><span class="pre">P</span></code> holds of <code class="docutils literal notranslate"><span class="pre">a</span></code>.
In the library, <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">&#945;</span></code> is defined to be <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code> is defined to be <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">x</span></code>.
In other words, sets are really properties, treated as objects.</p>
<p>The library also defines set-builder notation.
The expression <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">y</span> <span class="pre">|</span> <span class="pre">P</span> <span class="pre">y</span> <span class="pre">}</span></code> unfolds to <code class="docutils literal notranslate"><span class="pre">(&#955;</span> <span class="pre">y,</span> <span class="pre">P</span> <span class="pre">y)</span></code>,
so <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">{</span> <span class="pre">y</span> <span class="pre">|</span> <span class="pre">P</span> <span class="pre">y</span> <span class="pre">}</span></code> reduces to <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">x</span></code>.
So we can turn the property of being even into the set of even numbers:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.basic%20data.nat.parity%0A%0Aopen%20set%20nat%0A%0Adef%20evens%20%3A%20set%20%E2%84%95%20%3A%3D%20%7Bn%20%7C%20even%20n%7D%0Adef%20odds%20%3A%20%20set%20%E2%84%95%20%3A%3D%20%7Bn%20%7C%20%C2%AC%20even%20n%7D%0A%0Aexample%20%3A%20evens%20%E2%88%AA%20odds%20%3D%20univ%20%3A%3D%0Abegin%0A%20%20rw%20%5Bevens%2C%20odds%5D%2C%0A%20%20ext%20n%2C%0A%20%20simp%2C%0A%20%20apply%20classical.em%0Aend" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_425.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">data.set.basic</span> <span class="n">data.nat.parity</span>

<span class="kn">open</span> <span class="n">set</span> <span class="n">nat</span>

<span class="kd">def</span> <span class="n">evens</span> <span class="o">:</span> <span class="n">set</span> <span class="n">&#8469;</span> <span class="o">:=</span> <span class="o">{</span><span class="n">n</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">n</span><span class="o">}</span>
<span class="kd">def</span> <span class="n">odds</span> <span class="o">:</span>  <span class="n">set</span> <span class="n">&#8469;</span> <span class="o">:=</span> <span class="o">{</span><span class="n">n</span> <span class="bp">|</span> <span class="bp">&#172;</span> <span class="n">even</span> <span class="n">n</span><span class="o">}</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">evens</span> <span class="bp">&#8746;</span> <span class="n">odds</span> <span class="bp">=</span> <span class="n">univ</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">evens</span><span class="o">,</span> <span class="n">odds</span><span class="o">],</span>
  <span class="n">ext</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">classical.em</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>You should step through this proof and make sure
you understand what is going on.
Try deleting the line <code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">[evens,</span> <span class="pre">odds]</span></code>
and confirm that the proof still works.</p>
<p>In fact, set-builder notation is used to define</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8745;</span> <span class="pre">t</span></code> as <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8743;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t}</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8746;</span> <span class="pre">t</span></code> as <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8744;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t}</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#8709;</span></code> as <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">false}</span></code>, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">univ</span></code> as <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">true}</span></code>.</p></li>
</ul>
<p>We often need to indicate the type of <code class="docutils literal notranslate"><span class="pre">&#8709;</span></code> and <code class="docutils literal notranslate"><span class="pre">univ</span></code>
explicitly,
because Lean has trouble guessing which ones we mean.
The following examples show how Lean unfolds the last
two definitions when needed. In the second one,
<code class="docutils literal notranslate"><span class="pre">trivial</span></code> is the canonical proof of <code class="docutils literal notranslate"><span class="pre">true</span></code> in the library.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=open%20set%0A%0A--%20BEGIN%0Aexample%20(x%20%3A%20%E2%84%95)%20(h%20%3A%20x%20%E2%88%88%20(%E2%88%85%20%3A%20set%20%E2%84%95))%20%3A%20false%20%3A%3D%0Ah%0A%0Aexample%20(x%20%3A%20%E2%84%95)%20%3A%20x%20%E2%88%88%20(univ%20%3A%20set%20%E2%84%95)%20%3A%3D%0Atrivial%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_461.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="o">(</span><span class="bp">&#8709;</span> <span class="o">:</span> <span class="n">set</span> <span class="n">&#8469;</span><span class="o">))</span> <span class="o">:</span> <span class="n">false</span> <span class="o">:=</span>
<span class="n">h</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="o">(</span><span class="n">univ</span> <span class="o">:</span> <span class="n">set</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">trivial</span>
</pre></div>
</div>
</div><p>As an exercise, prove the following inclusion.
Use <code class="docutils literal notranslate"><span class="pre">intro</span> <span class="pre">n</span></code> to unfold the definition of subset,
and use the simplifier to reduce the
set-theoretic constructions to logic.
We also recommend using the theorems
<code class="docutils literal notranslate"><span class="pre">prime.eq_two_or_odd</span></code> and <code class="docutils literal notranslate"><span class="pre">even_iff</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.nat.prime%20data.nat.parity%20tactic%0A%0Aopen%20set%20nat%0A%0Aexample%20%3A%20%7B%20n%20%7C%20prime%20n%20%7D%20%E2%88%A9%20%7B%20n%20%7C%20n%20%3E%202%7D%20%E2%8A%86%20%7B%20n%20%7C%20%C2%AC%20even%20n%20%7D%20%3A%3D%0Asorry" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_480.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">data.nat.prime</span> <span class="n">data.nat.parity</span> <span class="n">tactic</span>

<span class="kn">open</span> <span class="n">set</span> <span class="n">nat</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">{</span> <span class="n">n</span> <span class="bp">|</span> <span class="n">prime</span> <span class="n">n</span> <span class="o">}</span> <span class="bp">&#8745;</span> <span class="o">{</span> <span class="n">n</span> <span class="bp">|</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">2</span><span class="o">}</span> <span class="bp">&#8838;</span> <span class="o">{</span> <span class="n">n</span> <span class="bp">|</span> <span class="bp">&#172;</span> <span class="n">even</span> <span class="n">n</span> <span class="o">}</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p id="index-2">Lean introduces the notation <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s,</span> <span class="pre">...</span></code>,
&#8220;for every <code class="docutils literal notranslate"><span class="pre">x</span></code> in <code class="docutils literal notranslate"><span class="pre">s</span></code> &#8230; ,&#8221;
as an abbreviation for  <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">x,</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8594;</span> <span class="pre">...</span></code>.
It also introduces the notation <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s,</span> <span class="pre">...,</span></code>
&#8220;there exists an <code class="docutils literal notranslate"><span class="pre">x</span></code> in <code class="docutils literal notranslate"><span class="pre">s</span></code> such that &#8230; .&#8221;
These are sometimes known as <em>bounded quantifiers</em>,
because the construction serves to restrict their significance
to the set <code class="docutils literal notranslate"><span class="pre">s</span></code>.
As a result, theorems in the library that make use of them
often contain <code class="docutils literal notranslate"><span class="pre">ball</span></code> or <code class="docutils literal notranslate"><span class="pre">bex</span></code> in the name.
The theorem <code class="docutils literal notranslate"><span class="pre">bex_def</span></code> asserts that <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s,</span> <span class="pre">...</span></code> is equivalent
to <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8743;</span> <span class="pre">...,</span></code>
but when they are used with <code class="docutils literal notranslate"><span class="pre">rintros</span></code>, <code class="docutils literal notranslate"><span class="pre">use</span></code>,
and anonymous constructors,
these two expressions behave roughly the same.
As a result, we usually don&#8217;t need to use <code class="docutils literal notranslate"><span class="pre">bex_def</span></code>
to transform them explicitly.
Here is are some examples of how they are used:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.nat.prime%20data.nat.parity%0A%0Aopen%20nat%0A%0A--%20BEGIN%0Avariable%20(s%20%3A%20set%20%E2%84%95)%0A%0Aexample%20(h%E2%82%80%20%3A%20%E2%88%80%20x%20%E2%88%88%20s%2C%20%C2%AC%20even%20x)%20(h%E2%82%81%20%3A%20%E2%88%80%20x%20%E2%88%88%20s%2C%20prime%20x)%20%3A%0A%20%20%E2%88%80%20x%20%E2%88%88%20s%2C%20%C2%AC%20even%20x%20%E2%88%A7%20prime%20x%20%3A%3D%0Abegin%0A%20%20intros%20x%20xs%2C%0A%20%20split%2C%0A%20%20%7B%20apply%20h%E2%82%80%20x%20xs%20%7D%2C%0A%20%20apply%20h%E2%82%81%20x%20xs%0Aend%0A%0Aexample%20(h%20%3A%20%E2%88%83%20x%20%E2%88%88%20s%2C%20%C2%AC%20even%20x%20%E2%88%A7%20prime%20x)%20%3A%0A%20%20%E2%88%83%20x%20%E2%88%88%20s%2C%20prime%20x%20%3A%3D%0Abegin%0A%20%20rcases%20h%20with%20%E2%9F%A8x%2C%20xs%2C%20_%2C%20prime_x%E2%9F%A9%2C%0A%20%20use%20%5Bx%2C%20xs%2C%20prime_x%5D%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_522.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">&#8469;</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">even</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="n">prime</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">&#8704;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">even</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">prime</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">xs</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">h&#8320;</span> <span class="n">x</span> <span class="n">xs</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">h&#8321;</span> <span class="n">x</span> <span class="n">xs</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">even</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">prime</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">&#8707;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="n">prime</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">xs</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">prime_x</span><span class="o">&#10217;,</span>
  <span class="n">use</span> <span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">xs</span><span class="o">,</span> <span class="n">prime_x</span><span class="o">]</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>See if you can prove these slight variations:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.nat.prime%20data.nat.parity%0A%0Aopen%20nat%0A%0A--%20BEGIN%0Avariables%20(s%20t%20%3A%20set%20%E2%84%95)%20(ssubt%20%3A%20s%20%E2%8A%86%20t)%0A%0Ainclude%20ssubt%0A%0Aexample%20(h%E2%82%80%20%3A%20%E2%88%80%20x%20%E2%88%88%20t%2C%20%C2%AC%20even%20x)%20(h%E2%82%81%20%3A%20%E2%88%80%20x%20%E2%88%88%20t%2C%20prime%20x)%20%3A%0A%20%20%E2%88%80%20x%20%E2%88%88%20s%2C%20%C2%AC%20even%20x%20%E2%88%A7%20prime%20x%20%3A%3D%0Asorry%0A%0Aexample%20(h%20%3A%20%E2%88%83%20x%20%E2%88%88%20s%2C%20%C2%AC%20even%20x%20%E2%88%A7%20prime%20x)%20%3A%0A%20%20%E2%88%83%20x%20%E2%88%88%20t%2C%20prime%20x%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_550.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variables</span> <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">ssubt</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">t</span><span class="o">)</span>

<span class="kn">include</span> <span class="n">ssubt</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h&#8320;</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">t</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">even</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#8321;</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">t</span><span class="o">,</span> <span class="n">prime</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">&#8704;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">even</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">prime</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">even</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">prime</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">&#8707;</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">t</span><span class="o">,</span> <span class="n">prime</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p id="index-3">The <code class="docutils literal notranslate"><span class="pre">include</span></code> command is needed because <code class="docutils literal notranslate"><span class="pre">ssubt</span></code> does not
appear in the statement of the theorem.
Lean does not look inside tactic blocks when it decides
what variables and hypotheses to include,
so if you delete that line,
you will not see the hypothesis within a <code class="docutils literal notranslate"><span class="pre">begin</span> <span class="pre">...</span> <span class="pre">end</span></code> proof.
If you are proving theorems in a library,
you can delimit the scope of and <code class="docutils literal notranslate"><span class="pre">include</span></code> by putting it
between <code class="docutils literal notranslate"><span class="pre">section</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code>,
so that later theorems do not include it as an unnecessary hypothesis.</p>
<p>Indexed unions and intersections are
another important set-theoretic construction.
We can model a sequence <span class="math notranslate nohighlight">\(A_0, A_1, A_2, \ldots\)</span> of sets of
elements of <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>
as a function <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">:</span> <span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">set</span> <span class="pre">&#945;</span></code>,
in which case <code class="docutils literal notranslate"><span class="pre">&#8899;</span> <span class="pre">i,</span> <span class="pre">A</span> <span class="pre">i</span></code> denotes their union,
and <code class="docutils literal notranslate"><span class="pre">&#8898;</span> <span class="pre">i,</span> <span class="pre">A</span> <span class="pre">i</span></code> denotes their intersection.
There is nothing special about the natural numbers here,
so <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> can be replaced by any type <code class="docutils literal notranslate"><span class="pre">I</span></code>
used to index the sets.
The following illustrates their use.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Aopen%20set%0A%0A--%20BEGIN%0Avariables%20%CE%B1%20I%20%3A%20Type*%0Avariables%20A%20B%20%3A%20I%20%E2%86%92%20set%20%CE%B1%0Avariable%20%20s%20%3A%20set%20%CE%B1%0A%0Aexample%20%3A%20s%20%E2%88%A9%20(%E2%8B%83%20i%2C%20A%20i)%20%3D%20%E2%8B%83%20i%2C%20(A%20i%20%E2%88%A9%20s)%20%3A%3D%0Abegin%0A%20%20ext%20x%2C%0A%20%20simp%20only%20%5Bmem_inter_eq%2C%20mem_Union%5D%2C%0A%20%20split%2C%0A%20%20%7B%20rintros%20%E2%9F%A8xs%2C%20%E2%9F%A8i%2C%20xAi%E2%9F%A9%E2%9F%A9%2C%0A%20%20%20%20exact%20%E2%9F%A8i%2C%20xAi%2C%20xs%E2%9F%A9%20%7D%2C%0A%20%20rintros%20%E2%9F%A8i%2C%20xAi%2C%20xs%E2%9F%A9%2C%0A%20%20exact%20%E2%9F%A8xs%2C%20%E2%9F%A8i%2C%20xAi%E2%9F%A9%E2%9F%A9%0Aend%0A%0Aexample%20%3A%20(%E2%8B%82%20i%2C%20A%20i%20%E2%88%A9%20B%20i)%20%3D%20(%E2%8B%82%20i%2C%20A%20i)%20%E2%88%A9%20(%E2%8B%82%20i%2C%20B%20i)%20%3A%3D%0Abegin%0A%20%20ext%20x%2C%0A%20%20simp%20only%20%5Bmem_inter_eq%2C%20mem_Inter%5D%2C%0A%20%20split%2C%0A%20%20%7B%20intro%20h%2C%0A%20%20%20%20split%2C%0A%20%20%20%20%7B%20intro%20i%2C%0A%20%20%20%20%20%20exact%20(h%20i).1%20%7D%2C%0A%20%20%20%20intro%20i%2C%0A%20%20%20%20exact%20(h%20i).2%20%7D%2C%0A%20%20rintros%20%E2%9F%A8h1%2C%20h2%E2%9F%A9%20i%2C%0A%20%20split%2C%0A%20%20%7B%20exact%20h1%20i%20%7D%2C%0A%20%20exact%20h2%20i%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_612.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variables</span> <span class="n">&#945;</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span>
<span class="kd">variables</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">&#8594;</span> <span class="n">set</span> <span class="n">&#945;</span>
<span class="kd">variable</span>  <span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">&#945;</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="o">(</span><span class="bp">&#8899;</span> <span class="n">i</span><span class="o">,</span> <span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">&#8899;</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span> <span class="bp">&#8745;</span> <span class="n">s</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mem_inter_eq</span><span class="o">,</span> <span class="n">mem_Union</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="o">&#10216;</span><span class="n">i</span><span class="o">,</span> <span class="n">xAi</span><span class="o">&#10217;&#10217;,</span>
    <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">i</span><span class="o">,</span> <span class="n">xAi</span><span class="o">,</span> <span class="n">xs</span><span class="o">&#10217;</span> <span class="o">},</span>
  <span class="n">rintros</span> <span class="o">&#10216;</span><span class="n">i</span><span class="o">,</span> <span class="n">xAi</span><span class="o">,</span> <span class="n">xs</span><span class="o">&#10217;,</span>
  <span class="n">exact</span> <span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span> <span class="o">&#10216;</span><span class="n">i</span><span class="o">,</span> <span class="n">xAi</span><span class="o">&#10217;&#10217;</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8898;</span> <span class="n">i</span><span class="o">,</span> <span class="n">A</span> <span class="n">i</span> <span class="bp">&#8745;</span> <span class="n">B</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">&#8898;</span> <span class="n">i</span><span class="o">,</span> <span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="bp">&#8745;</span> <span class="o">(</span><span class="bp">&#8898;</span> <span class="n">i</span><span class="o">,</span> <span class="n">B</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mem_inter_eq</span><span class="o">,</span> <span class="n">mem_Inter</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">intro</span> <span class="n">i</span><span class="o">,</span>
      <span class="n">exact</span> <span class="o">(</span><span class="n">h</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="o">},</span>
    <span class="n">intro</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">h</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="o">},</span>
  <span class="n">rintros</span> <span class="o">&#10216;</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">&#10217;</span> <span class="n">i</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">h1</span> <span class="n">i</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">h2</span> <span class="n">i</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Parentheses are often needed with an
indexed union or intersection because,
as with the quantifiers,
the scope of the bound variable extends as far as it can.</p>
<p>Try proving the following identity.
One direction requires classical logic!
We recommend using <code class="docutils literal notranslate"><span class="pre">by_cases</span> <span class="pre">xs</span> <span class="pre">:</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code>
at an appropriate point in the proof.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20tactic%0A%0Aopen%20set%0A%0Avariables%20%CE%B1%20I%20%3A%20Type*%0Avariable%20%20A%20%3A%20I%20%E2%86%92%20set%20%CE%B1%0Avariable%20%20s%20%3A%20set%20%CE%B1%0A%0A--%20BEGIN%0Aopen_locale%20classical%0A%0Aexample%20%3A%20s%20%E2%88%AA%20(%E2%8B%82%20i%2C%20A%20i)%20%3D%20%E2%8B%82%20i%2C%20(A%20i%20%E2%88%AA%20s)%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_662.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="n">open_locale</span> <span class="n">classical</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8746;</span> <span class="o">(</span><span class="bp">&#8898;</span> <span class="n">i</span><span class="o">,</span> <span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">&#8898;</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span> <span class="bp">&#8746;</span> <span class="n">s</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>Mathlib also has bounded unions and intersections,
which are analogous to the bounded quantifiers.
You can unpack their meaning with <code class="docutils literal notranslate"><span class="pre">mem_bUnion_iff</span></code>
and <code class="docutils literal notranslate"><span class="pre">mem_bInter_iff</span></code>.
As the following examples show,
Lean&#8217;s simplifier carries out these replacements as well.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.lattice%0Aimport%20data.nat.prime%0A%0Aopen%20set%20nat%0A%0A--%20BEGIN%0Adef%20primes%20%3A%20set%20%E2%84%95%20%3A%3D%20%7Bx%20%7C%20prime%20x%7D%0A%0Aexample%20%3A%20(%E2%8B%83%20p%20%E2%88%88%20primes%2C%20%7Bx%20%7C%20p%5E2%20%E2%88%A3%20x%7D)%20%3D%20%7Bx%20%7C%20%E2%88%83%20p%20%E2%88%88%20primes%2C%20p%5E2%20%E2%88%A3%20x%7D%20%3A%3D%0Aby%20%7B%20ext%2C%20rw%20mem_bUnion_iff%2C%20refl%20%7D%0A%0Aexample%20%3A%20(%E2%8B%83%20p%20%E2%88%88%20primes%2C%20%7Bx%20%7C%20p%5E2%20%E2%88%A3%20x%7D)%20%3D%20%7Bx%20%7C%20%E2%88%83%20p%20%E2%88%88%20primes%2C%20p%5E2%20%E2%88%A3%20x%7D%20%3A%3D%0Aby%20%7B%20ext%2C%20simp%20%7D%0A%0Aexample%20%3A%20(%E2%8B%82%20p%20%E2%88%88%20primes%2C%20%7Bx%20%7C%20%C2%AC%20p%20%E2%88%A3%20x%7D)%20%E2%8A%86%20%7Bx%20%7C%20x%20%3C%202%7D%20%3A%3D%0Abegin%0A%20%20intro%20x%2C%0A%20%20contrapose!%2C%0A%20%20simp%2C%0A%20%20apply%20exists_prime_and_dvd%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_705.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">primes</span> <span class="o">:</span> <span class="n">set</span> <span class="n">&#8469;</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">prime</span> <span class="n">x</span><span class="o">}</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8899;</span> <span class="n">p</span> <span class="bp">&#8712;</span> <span class="n">primes</span><span class="o">,</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">p</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">x</span><span class="o">})</span> <span class="bp">=</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="bp">&#8707;</span> <span class="n">p</span> <span class="bp">&#8712;</span> <span class="n">primes</span><span class="o">,</span> <span class="n">p</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">x</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span><span class="o">,</span> <span class="n">rw</span> <span class="n">mem_bUnion_iff</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8899;</span> <span class="n">p</span> <span class="bp">&#8712;</span> <span class="n">primes</span><span class="o">,</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">p</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">x</span><span class="o">})</span> <span class="bp">=</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="bp">&#8707;</span> <span class="n">p</span> <span class="bp">&#8712;</span> <span class="n">primes</span><span class="o">,</span> <span class="n">p</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">x</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="o">}</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8898;</span> <span class="n">p</span> <span class="bp">&#8712;</span> <span class="n">primes</span><span class="o">,</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="bp">&#172;</span> <span class="n">p</span> <span class="bp">&#8739;</span> <span class="n">x</span><span class="o">})</span> <span class="bp">&#8838;</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">2</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">contrapose</span><span class="bp">!</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">exists_prime_and_dvd</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Try solving the following example, which is similar.
If you start typing <code class="docutils literal notranslate"><span class="pre">eq_univ</span></code>,
tab completion will tell you that <code class="docutils literal notranslate"><span class="pre">apply</span> <span class="pre">eq_univ_of_forall</span></code>
is a good way to start the proof.
We also recommend using the theorem <code class="docutils literal notranslate"><span class="pre">exists_infinite_primes</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.lattice%0Aimport%20data.nat.prime%0A%0Aopen%20set%20nat%0A%0Adef%20primes%20%3A%20set%20%E2%84%95%20%3A%3D%20%7Bx%20%7C%20prime%20x%7D%0A%0A--%20BEGIN%0Aexample%20%3A%20(%E2%8B%83%20p%20%E2%88%88%20primes%2C%20%7Bx%20%7C%20x%20%E2%89%A4%20p%7D)%20%3D%20univ%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_736.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8899;</span> <span class="n">p</span> <span class="bp">&#8712;</span> <span class="n">primes</span><span class="o">,</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">p</span><span class="o">})</span> <span class="bp">=</span> <span class="n">univ</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>Give a collection of sets, <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">set</span> <span class="pre">(set</span> <span class="pre">&#945;)</span></code>,
their union, <code class="docutils literal notranslate"><span class="pre">&#8899;&#8320;</span> <span class="pre">s</span></code>, has type <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">&#945;</span></code>
and is defined as <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">&#8707;</span> <span class="pre">t</span> <span class="pre">&#8712;</span> <span class="pre">s,</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t}</span></code>.
Similarly, their intersection, <code class="docutils literal notranslate"><span class="pre">&#8898;&#8320;</span> <span class="pre">s</span></code>, is defined as
<code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">&#8704;</span> <span class="pre">t</span> <span class="pre">&#8712;</span> <span class="pre">s,</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t}</span></code>.
These operations are called <code class="docutils literal notranslate"><span class="pre">sUnion</span></code> and <code class="docutils literal notranslate"><span class="pre">sInter</span></code>, respectively.
The following examples show their relationship to bounded union
and intersection.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.lattice%0A%0Aopen%20set%0A%0A--%20BEGIN%0Avariables%20%7B%CE%B1%20%3A%20Type*%7D%20(s%20%3A%20set%20(set%20%CE%B1))%0A%0Aexample%20%3A%20%E2%8B%83%E2%82%80%20s%20%3D%20%E2%8B%83%20t%20%E2%88%88%20s%2C%20t%20%3A%3D%0Abegin%0A%20%20ext%20x%2C%0A%20%20rw%20mem_bUnion_iff%2C%0A%20%20refl%0Aend%0A%0Aexample%20%3A%20%E2%8B%82%E2%82%80%20s%20%3D%20%E2%8B%82%20t%20%E2%88%88%20s%2C%20t%20%3A%3D%0Abegin%0A%20%20ext%20x%2C%0A%20%20rw%20mem_bInter_iff%2C%0A%20%20refl%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_769.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variables</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">&#945;</span><span class="o">))</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8899;&#8320;</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">&#8899;</span> <span class="n">t</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mem_bUnion_iff</span><span class="o">,</span>
  <span class="n">refl</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8898;&#8320;</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">&#8898;</span> <span class="n">t</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mem_bInter_iff</span><span class="o">,</span>
  <span class="n">refl</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>In the library, these identities are called
<code class="docutils literal notranslate"><span class="pre">sUnion_eq_bUnion</span></code> and <code class="docutils literal notranslate"><span class="pre">sInter_eq_bInter</span></code>.</p>
</div>
<div class="section" id="functions">
<span id="id2"></span><h2><span class="section-number">4.2. </span>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">&#182;</a></h2>
<p>If <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code> is a function and  <code class="docutils literal notranslate"><span class="pre">p</span></code> is a set of
elements of type <code class="docutils literal notranslate"><span class="pre">&#946;</span></code>,
the library defines <code class="docutils literal notranslate"><span class="pre">preimage</span> <span class="pre">f</span> <span class="pre">p</span></code>, written <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">&#8315;&#185;'</span> <span class="pre">p</span></code>,
to be <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">p}</span></code>.
The expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">f</span> <span class="pre">&#8315;&#185;'</span> <span class="pre">p</span></code> reduces to <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code>.
This is often convenient, as in the following example:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.function%0A%0Avariables%20%7B%CE%B1%20%CE%B2%20%3A%20Type*%7D%0Avariable%20%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Avariables%20u%20v%20%3A%20set%20%CE%B2%0A%0Aexample%20%3A%20f%20%E2%81%BB%C2%B9'%20(u%20%E2%88%A9%20v)%20%3D%20f%20%E2%81%BB%C2%B9'%20u%20%E2%88%A9%20f%20%E2%81%BB%C2%B9'%20v%20%3A%3D%0Aby%20%7B%20ext%2C%20refl%20%7D" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_808.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">data.set.function</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">&#945;</span> <span class="n">&#946;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variable</span>  <span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#946;</span>
<span class="kd">variables</span> <span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">set</span> <span class="n">&#946;</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="o">(</span><span class="n">u</span> <span class="bp">&#8745;</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">u</span> <span class="bp">&#8745;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">v</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span>
</pre></div>
</div>
</div><p>If <code class="docutils literal notranslate"><span class="pre">s</span></code> is a set of elements of type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>,
the library also defines <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">f</span> <span class="pre">s</span></code>,
written <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">''</span> <span class="pre">s</span></code>,
to be <code class="docutils literal notranslate"><span class="pre">{y</span> <span class="pre">|</span> <span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8743;</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y}</span></code>.
So a hypothesis  <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">&#8712;</span> <span class="pre">f</span> <span class="pre">''</span> <span class="pre">s</span></code> decomposes to a triple
<code class="docutils literal notranslate"><span class="pre">&#10216;x,</span> <span class="pre">xs,</span> <span class="pre">xeq&#10217;</span></code> with <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> satisfying the hypotheses <code class="docutils literal notranslate"><span class="pre">xs</span> <span class="pre">:</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code>
and <code class="docutils literal notranslate"><span class="pre">xeq</span> <span class="pre">:</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></code>.
The <code class="docutils literal notranslate"><span class="pre">rfl</span></code> tag in the <code class="docutils literal notranslate"><span class="pre">rintros</span></code> tactic (see <a class="reference internal" href="logic.html#the-existential-quantifier"><span class="std std-numref">Section 3.2</span></a>) was made precisely
for this sort of situation.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.function%0A%0Avariables%20%7B%CE%B1%20%CE%B2%20%3A%20Type*%7D%0Avariable%20%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Avariables%20s%20t%20%3A%20set%20%CE%B1%0A%0A--%20BEGIN%0Aexample%20%3A%20f%20''%20(s%20%E2%88%AA%20t)%20%3D%20f%20''%20s%20%E2%88%AA%20f%20''%20t%20%3A%3D%0Abegin%0A%20%20ext%20y%2C%20split%2C%0A%20%20%7B%20rintros%20%E2%9F%A8x%2C%20xs%20%7C%20xt%2C%20rfl%E2%9F%A9%2C%0A%20%20%20%20%7B%20left%2C%20use%20%5Bx%2C%20xs%5D%20%7D%2C%0A%20%20%20%20right%2C%20use%20%5Bx%2C%20xt%5D%20%7D%2C%0A%20%20rintros%20(%E2%9F%A8x%2C%20xs%2C%20rfl%E2%9F%A9%20%7C%20%E2%9F%A8x%2C%20xt%2C%20rfl%E2%9F%A9)%2C%0A%20%20%7B%20use%20%5Bx%2C%20or.inl%20xs%5D%20%7D%2C%0A%20%20use%20%5Bx%2C%20or.inr%20xt%5D%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_830.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">y</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">xs</span> <span class="bp">|</span> <span class="n">xt</span><span class="o">,</span> <span class="n">rfl</span><span class="o">&#10217;,</span>
    <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">use</span> <span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">xs</span><span class="o">]</span> <span class="o">},</span>
    <span class="n">right</span><span class="o">,</span> <span class="n">use</span> <span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">xt</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">rintros</span> <span class="o">(&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">xs</span><span class="o">,</span> <span class="n">rfl</span><span class="o">&#10217;</span> <span class="bp">|</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">xt</span><span class="o">,</span> <span class="n">rfl</span><span class="o">&#10217;),</span>
  <span class="o">{</span> <span class="n">use</span> <span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">or.inl</span> <span class="n">xs</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">use</span> <span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">or.inr</span> <span class="n">xt</span><span class="o">]</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Notice also that the <code class="docutils literal notranslate"><span class="pre">use</span></code> tactic applies <code class="docutils literal notranslate"><span class="pre">refl</span></code>
to close goals when it can.</p>
<p>Here is another example:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.function%0A%0Avariables%20%7B%CE%B1%20%CE%B2%20%3A%20Type*%7D%0Avariable%20%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Avariables%20s%20t%20%3A%20set%20%CE%B1%0A%0A--%20BEGIN%0Aexample%20%3A%20s%20%E2%8A%86%20f%20%E2%81%BB%C2%B9'%20(f%20''%20s)%20%3A%3D%0Abegin%0A%20%20intros%20x%20xs%2C%0A%20%20show%20f%20x%20%E2%88%88%20f%20''%20s%2C%0A%20%20use%20%5Bx%2C%20xs%5D%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_856.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="o">(</span><span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">xs</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&#8712;</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span><span class="o">,</span>
  <span class="n">use</span> <span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">xs</span><span class="o">]</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>We can replace the line <code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">[x,</span> <span class="pre">xs]</span></code> by
<code class="docutils literal notranslate"><span class="pre">apply</span> <span class="pre">mem_image_of_mem</span> <span class="pre">f</span> <span class="pre">xs</span></code> if we want to
use a theorem specifically designed for that purpose.
But knowing that the image is defined in terms
of an existential quantifier is often convenient.</p>
<p>The following equivalence is a good exercise:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.function%0A%0Avariables%20%7B%CE%B1%20%CE%B2%20%3A%20Type*%7D%0Avariable%20%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Avariables%20(s%20%3A%20set%20%CE%B1)%20(t%20%3A%20set%20%CE%B2)%0A%0A--%20BEGIN%0Aexample%20%3A%20f%20''%20s%20%E2%8A%86%20t%20%E2%86%94%20s%20%E2%8A%86%20f%20%E2%81%BB%C2%B9'%20t%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_881.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">t</span> <span class="bp">&#8596;</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">t</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>It shows that <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">f</span></code> and <code class="docutils literal notranslate"><span class="pre">preimage</span> <span class="pre">f</span></code> are
an instance of what is known as a <em>Galois connection</em>
between <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">&#945;</span></code> and <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">&#946;</span></code>,
each partially ordered by the subset relation.
In the library, this equivalence is named
<code class="docutils literal notranslate"><span class="pre">image_subset_iff</span></code>.
In practice, the right-hand side is often the
more useful representation,
because <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">&#8712;</span> <span class="pre">f</span> <span class="pre">&#8315;&#185;'</span> <span class="pre">t</span></code> unfolds to <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">y</span> <span class="pre">&#8712;</span> <span class="pre">t</span></code>
whereas working with <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">f</span> <span class="pre">''</span> <span class="pre">s</span></code> requires
decomposing an existential quantifier.</p>
<p>Here is a long list of set-theoretic identities for
you to enjoy.
You don&#8217;t have to do all of them at once;
do a few of them,
and set the rest aside for a rainy day.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.function%0A%0Aopen%20set%20function%0A%0A--%20BEGIN%0Avariables%20%7B%CE%B1%20%CE%B2%20%3A%20Type*%7D%0Avariable%20%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Avariables%20s%20t%20%3A%20set%20%CE%B1%0Avariables%20u%20v%20%3A%20set%20%CE%B2%0A%0Aexample%20(h%20%3A%20injective%20f)%20%3A%20f%20%E2%81%BB%C2%B9'%20(f%20''%20s)%20%E2%8A%86%20s%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20f%20''%20(f%E2%81%BB%C2%B9'%20u)%20%E2%8A%86%20u%20%3A%3D%0Asorry%0A%0Aexample%20(h%20%3A%20surjective%20f)%20%3A%20u%20%E2%8A%86%20f%20''%20(f%E2%81%BB%C2%B9'%20u)%20%3A%3D%0Asorry%0A%0Aexample%20(h%20%3A%20s%20%E2%8A%86%20t)%20%3A%20f%20''%20s%20%E2%8A%86%20f%20''%20t%20%3A%3D%0Asorry%0A%0Aexample%20(h%20%3A%20u%20%E2%8A%86%20v)%20%3A%20f%20%E2%81%BB%C2%B9'%20u%20%E2%8A%86%20f%20%E2%81%BB%C2%B9'%20v%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20f%20%E2%81%BB%C2%B9'%20(u%20%E2%88%AA%20v)%20%3D%20f%20%E2%81%BB%C2%B9'%20u%20%E2%88%AA%20f%20%E2%81%BB%C2%B9'%20v%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20f%20''%20(s%20%E2%88%A9%20t)%20%E2%8A%86%20f%20''%20s%20%E2%88%A9%20f%20''%20t%20%3A%3D%0Asorry%0A%0Aexample%20(h%20%3A%20injective%20f)%20%3A%20f%20''%20s%20%E2%88%A9%20f%20''%20t%20%E2%8A%86%20f%20''%20(s%20%E2%88%A9%20t)%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20f%20''%20s%20%5C%20f%20''%20t%20%E2%8A%86%20f%20''%20(s%20%5C%20t)%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20f%20%E2%81%BB%C2%B9'%20u%20%5C%20f%20%E2%81%BB%C2%B9'%20v%20%E2%8A%86%20f%20%E2%81%BB%C2%B9'%20(u%20%5C%20v)%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20f%20''%20s%20%E2%88%A9%20v%20%3D%20f%20''%20(s%20%E2%88%A9%20f%20%E2%81%BB%C2%B9'%20v)%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20f%20''%20(s%20%E2%88%A9%20f%20%E2%81%BB%C2%B9'%20u)%20%E2%8A%86%20f%20''%20s%20%E2%88%AA%20u%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20s%20%E2%88%A9%20f%20%E2%81%BB%C2%B9'%20u%20%E2%8A%86%20f%20%E2%81%BB%C2%B9'%20(f%20''%20s%20%E2%88%A9%20u)%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20s%20%E2%88%AA%20f%20%E2%81%BB%C2%B9'%20u%20%E2%8A%86%20f%20%E2%81%BB%C2%B9'%20(f%20''%20s%20%E2%88%AA%20u)%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_912.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variables</span> <span class="o">{</span><span class="n">&#945;</span> <span class="n">&#946;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variable</span>  <span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#946;</span>
<span class="kd">variables</span> <span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">&#945;</span>
<span class="kd">variables</span> <span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">set</span> <span class="n">&#946;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="o">(</span><span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="n">s</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="o">(</span><span class="n">f</span><span class="bp">&#8315;&#185;&#39;</span> <span class="n">u</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="n">u</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="o">(</span><span class="n">f</span><span class="bp">&#8315;&#185;&#39;</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">t</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">v</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="o">(</span><span class="n">u</span> <span class="bp">&#8746;</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">u</span> <span class="bp">&#8746;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">v</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">t</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">t</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span> <span class="bp">\</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">t</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">\</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">u</span> <span class="bp">\</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">v</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="o">(</span><span class="n">u</span> <span class="bp">\</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">v</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="o">(</span><span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">u</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">u</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="o">(</span><span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span> <span class="bp">&#8745;</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="n">u</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="o">(</span><span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">s</span> <span class="bp">&#8746;</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>You can also try your hand at the next group of exercises,
which characterize the behavior of images and preimages
with respect to indexed unions and intersections.
In the third exercise, the argument <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">:</span> <span class="pre">I</span></code> is needed
to guarantee that the index set is nonempty.
To prove any of these, we recommend using <code class="docutils literal notranslate"><span class="pre">ext</span></code> or <code class="docutils literal notranslate"><span class="pre">intro</span></code>
to unfold the meaning of an equation or inclusion between sets,
and then calling <code class="docutils literal notranslate"><span class="pre">simp</span></code> to unpack the conditions for membership.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.lattice%0A%0Aopen%20set%20function%0A%0A--%20BEGIN%0Avariables%20%7B%CE%B1%20%CE%B2%20I%20%3A%20Type*%7D%0Avariable%20%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Avariable%20%20A%20%3A%20I%20%E2%86%92%20set%20%CE%B1%0Avariable%20%20B%20%3A%20I%20%E2%86%92%20set%20%CE%B2%0A%0Aexample%20%3A%20f%20''%20(%E2%8B%83%20i%2C%20A%20i)%20%3D%20%E2%8B%83%20i%2C%20f%20''%20A%20i%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20f%20''%20(%E2%8B%82%20i%2C%20A%20i)%20%E2%8A%86%20%E2%8B%82%20i%2C%20f%20''%20A%20i%20%3A%3D%0Asorry%0A%0Aexample%20(i%20%3A%20I)%20(injf%20%3A%20injective%20f)%20%3A%0A%20%20(%E2%8B%82%20i%2C%20f%20''%20A%20i)%20%E2%8A%86%20f%20''%20(%E2%8B%82%20i%2C%20A%20i)%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20f%20%E2%81%BB%C2%B9'%20(%E2%8B%83%20i%2C%20B%20i)%20%3D%20%E2%8B%83%20i%2C%20f%20%E2%81%BB%C2%B9'%20(B%20i)%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20f%20%E2%81%BB%C2%B9'%20(%E2%8B%82%20i%2C%20B%20i)%20%3D%20%E2%8B%82%20i%2C%20f%20%E2%81%BB%C2%B9'%20(B%20i)%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_976.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variables</span> <span class="o">{</span><span class="n">&#945;</span> <span class="n">&#946;</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variable</span>  <span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#946;</span>
<span class="kd">variable</span>  <span class="n">A</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">&#8594;</span> <span class="n">set</span> <span class="n">&#945;</span>
<span class="kd">variable</span>  <span class="n">B</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">&#8594;</span> <span class="n">set</span> <span class="n">&#946;</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="o">(</span><span class="bp">&#8899;</span> <span class="n">i</span><span class="o">,</span> <span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">&#8899;</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">A</span> <span class="n">i</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="o">(</span><span class="bp">&#8898;</span> <span class="n">i</span><span class="o">,</span> <span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="bp">&#8898;</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">A</span> <span class="n">i</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span> <span class="o">(</span><span class="n">injf</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">&#8898;</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="bp">&#8838;</span> <span class="n">f</span> <span class="bp">&#39;&#39;</span> <span class="o">(</span><span class="bp">&#8898;</span> <span class="n">i</span><span class="o">,</span> <span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="o">(</span><span class="bp">&#8899;</span> <span class="n">i</span><span class="o">,</span> <span class="n">B</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">&#8899;</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="o">(</span><span class="n">B</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="o">(</span><span class="bp">&#8898;</span> <span class="n">i</span><span class="o">,</span> <span class="n">B</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">&#8898;</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="bp">&#8315;&#185;&#39;</span> <span class="o">(</span><span class="n">B</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>In type theory, a function <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code> can be applied to any
element of the domain <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>,
but we sometimes want to represent functions that are
meaningfully defined on only some of those elements.
For example, as a function of type <code class="docutils literal notranslate"><span class="pre">&#8477;</span> <span class="pre">&#8594;</span> <span class="pre">&#8477;</span> <span class="pre">&#8594;</span> <span class="pre">&#8477;</span></code>,
division is only meaningful when the second argument is nonzero.
In mathematics, when we write an expression of the form <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">/</span> <span class="pre">t</span></code>,
we should have implicitly or explicitly ruled out
the case that <code class="docutils literal notranslate"><span class="pre">t</span></code> is zero.</p>
<p>But since division has type <code class="docutils literal notranslate"><span class="pre">&#8477;</span> <span class="pre">&#8594;</span> <span class="pre">&#8477;</span> <span class="pre">&#8594;</span> <span class="pre">&#8477;</span></code> in Lean,
it also has to return a value when the second argument is zero.
The strategy generally followed by the library is to assign such
functions convenient values outside their natural domain.
For example, defining <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">0</span></code> to be <code class="docutils literal notranslate"><span class="pre">0</span></code> means that the
identity <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">+</span> <span class="pre">y)</span> <span class="pre">/</span> <span class="pre">z</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">/</span> <span class="pre">z</span> <span class="pre">+</span> <span class="pre">y</span> <span class="pre">/</span> <span class="pre">z</span></code> holds for every
<code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, and <code class="docutils literal notranslate"><span class="pre">z</span></code>.</p>
<p>As a result, when we read an expression <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">/</span> <span class="pre">t</span></code> in Lean,
we should not assume that <code class="docutils literal notranslate"><span class="pre">t</span></code> is a meaningful input value.
When we need to, we can restrict the statement of a theorem to
guarantee that it is.
For example, theorem <code class="docutils literal notranslate"><span class="pre">div_mul_cancel</span></code> asserts <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8800;</span> <span class="pre">0</span> <span class="pre">&#8594;</span> <span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span> <span class="pre">*</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">x</span></code> for
<code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> in suitable algebraic structures.</p>
<p>The library defines a predicate <code class="docutils literal notranslate"><span class="pre">inj_on</span> <span class="pre">f</span> <span class="pre">s</span></code> to say that
<code class="docutils literal notranslate"><span class="pre">f</span></code> is injective on <code class="docutils literal notranslate"><span class="pre">s</span></code>.
It is defined as follows:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.function%0A%0Aopen%20set%0A%0Avariables%20%7B%CE%B1%20%CE%B2%20%3A%20Type*%7D%0Avariables%20(f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20(s%20%3A%20set%20%CE%B1)%0A%0A--%20BEGIN%0Aexample%20%3A%20inj_on%20f%20s%20%E2%86%94%0A%20%20%E2%88%80%20x%E2%82%81%20%E2%88%88%20s%2C%20%E2%88%80%20x%E2%82%82%20%E2%88%88%20s%2C%20f%20x%E2%82%81%20%3D%20f%20x%E2%82%82%20%E2%86%92%20x%E2%82%81%20%3D%20x%E2%82%82%20%3A%3D%0Aiff.refl%20_%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_1118.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">inj_on</span> <span class="n">f</span> <span class="n">s</span> <span class="bp">&#8596;</span>
  <span class="bp">&#8704;</span> <span class="n">x&#8321;</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="bp">&#8704;</span> <span class="n">x&#8322;</span> <span class="bp">&#8712;</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">x&#8321;</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x&#8322;</span> <span class="bp">&#8594;</span> <span class="n">x&#8321;</span> <span class="bp">=</span> <span class="n">x&#8322;</span> <span class="o">:=</span>
<span class="n">iff.refl</span> <span class="n">_</span>
</pre></div>
</div>
</div><p>The statement <code class="docutils literal notranslate"><span class="pre">injective</span> <span class="pre">f</span></code> is provably equivalent
to <code class="docutils literal notranslate"><span class="pre">inj_on</span> <span class="pre">f</span> <span class="pre">univ</span></code>.
Similarly, the library defines <code class="docutils literal notranslate"><span class="pre">range</span> <span class="pre">f</span></code> to be
<code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">&#8707;y,</span> <span class="pre">f</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">x}</span></code>,
so <code class="docutils literal notranslate"><span class="pre">range</span> <span class="pre">f</span></code> is provably equal to <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">''</span> <span class="pre">univ</span></code>.
This is a common theme in mathlib:
although many properties of functions are defined relative
to their full domain,
there are often relativized versions that restrict
the statements to a subset of the domain type.</p>
<p>Here is are some examples of <code class="docutils literal notranslate"><span class="pre">inj_on</span></code> and <code class="docutils literal notranslate"><span class="pre">range</span></code> in use:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20analysis.special_functions.exp_log%0A%0Aopen%20set%20real%0A%0A--%20BEGIN%0Aexample%20%3A%20inj_on%20log%20%7B%20x%20%7C%20x%20%3E%200%20%7D%20%3A%3D%0Abegin%0A%20%20intros%20x%20xpos%20y%20ypos%2C%0A%20%20intro%20e%2C%20%20%20--%20log%20x%20%3D%20log%20y%0A%20%20calc%0A%20%20%20%20x%20%20%20%3D%20exp%20(log%20x)%20%3A%20by%20rw%20exp_log%20xpos%0A%20%20%20%20...%20%3D%20exp%20(log%20y)%20%3A%20by%20rw%20e%0A%20%20%20%20...%20%3D%20y%20%20%20%20%20%20%20%20%20%20%20%3A%20by%20rw%20exp_log%20ypos%0Aend%0A%0Aexample%20%3A%20range%20exp%20%3D%20%7B%20y%20%7C%20y%20%3E%200%20%7D%20%3A%3D%0Abegin%0A%20%20ext%20y%2C%20split%2C%0A%20%20%7B%20rintros%20%E2%9F%A8x%2C%20rfl%E2%9F%A9%2C%0A%20%20%20%20apply%20exp_pos%20%7D%2C%0A%20%20intro%20ypos%2C%0A%20%20use%20log%20y%2C%0A%20%20rw%20exp_log%20ypos%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_1146.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">inj_on</span> <span class="n">log</span> <span class="o">{</span> <span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">xpos</span> <span class="n">y</span> <span class="n">ypos</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">e</span><span class="o">,</span>   <span class="c1">-- log x = log y</span>
  <span class="k">calc</span>
    <span class="n">x</span>   <span class="bp">=</span> <span class="n">exp</span> <span class="o">(</span><span class="n">log</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">exp_log</span> <span class="n">xpos</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">exp</span> <span class="o">(</span><span class="n">log</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">e</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">y</span>           <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">exp_log</span> <span class="n">ypos</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">range</span> <span class="n">exp</span> <span class="bp">=</span> <span class="o">{</span> <span class="n">y</span> <span class="bp">|</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">y</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">rfl</span><span class="o">&#10217;,</span>
    <span class="n">apply</span> <span class="n">exp_pos</span> <span class="o">},</span>
  <span class="n">intro</span> <span class="n">ypos</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">log</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">exp_log</span> <span class="n">ypos</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Try proving these:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.sqrt%0A%0Aopen%20set%20real%0A%0Aexample%20%3A%20inj_on%20sqrt%20%7B%20x%20%7C%20x%20%E2%89%A5%200%20%7D%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20inj_on%20(%CE%BB%20x%2C%20x%5E2)%20%7B%20x%20%3A%20%E2%84%9D%20%7C%20x%20%E2%89%A5%200%20%7D%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20sqrt%20''%20%7B%20x%20%7C%20x%20%E2%89%A5%200%20%7D%20%3D%20%7By%20%7C%20y%20%E2%89%A5%200%7D%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20range%20(%CE%BB%20x%2C%20x%5E2)%20%3D%20%7By%20%3A%20%E2%84%9D%20%20%7C%20y%20%E2%89%A5%200%7D%20%3A%3D%0Asorry" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_1176.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">data.real.sqrt</span>

<span class="kn">open</span> <span class="n">set</span> <span class="n">real</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">inj_on</span> <span class="n">sqrt</span> <span class="o">{</span> <span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">&#8805;</span> <span class="mi">0</span> <span class="o">}</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">inj_on</span> <span class="o">(</span><span class="bp">&#955;</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">{</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8477;</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">&#8805;</span> <span class="mi">0</span> <span class="o">}</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">sqrt</span> <span class="bp">&#39;&#39;</span> <span class="o">{</span> <span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">&#8805;</span> <span class="mi">0</span> <span class="o">}</span> <span class="bp">=</span> <span class="o">{</span><span class="n">y</span> <span class="bp">|</span> <span class="n">y</span> <span class="bp">&#8805;</span> <span class="mi">0</span><span class="o">}</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">range</span> <span class="o">(</span><span class="bp">&#955;</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">&#8477;</span>  <span class="bp">|</span> <span class="n">y</span> <span class="bp">&#8805;</span> <span class="mi">0</span><span class="o">}</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>To define the inverse of a function <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code>,
we will use two new ingredients.
First, we need to deal with the fact that
an arbitrary type in Lean may be empty.
To define the inverse to <code class="docutils literal notranslate"><span class="pre">f</span></code> at <code class="docutils literal notranslate"><span class="pre">y</span></code> when there is
no <code class="docutils literal notranslate"><span class="pre">x</span></code> satisfying <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></code>,
we want to assign a default value in <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>.
Adding the annotation <code class="docutils literal notranslate"><span class="pre">[inhabited</span> <span class="pre">&#945;]</span></code> as a variable
is tantamount to assuming that <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> has a
preferred element, which is denoted <code class="docutils literal notranslate"><span class="pre">default</span> <span class="pre">&#945;</span></code>.
Second, in the case where there is more than one <code class="docutils literal notranslate"><span class="pre">x</span></code>
such that <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></code>,
the inverse function needs to <em>choose</em> one of them.
This requires an appeal to the <em>axiom of choice</em>.
Lean allows various ways of accessing it;
one convenient method is to use the classical <code class="docutils literal notranslate"><span class="pre">some</span></code>
operator, illustrated below.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20%7B%CE%B1%20%3A%20Type*%7D%20%5Binhabited%20%CE%B1%5D%0A%0A%23check%20default%20%CE%B1%0A%0Avariables%20(P%20%3A%20%CE%B1%20%E2%86%92%20Prop)%20(h%20%3A%20%E2%88%83%20x%2C%20P%20x)%0A%0A%23check%20classical.some%20h%0A%0Aexample%20%3A%20P%20(classical.some%20h)%20%3A%3D%20classical.some_spec%20h" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_1260.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variables</span> <span class="o">{</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">inhabited</span> <span class="n">&#945;</span><span class="o">]</span>

<span class="k">#check</span> <span class="n">default</span> <span class="n">&#945;</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">P</span> <span class="n">x</span><span class="o">)</span>

<span class="k">#check</span> <span class="n">classical.some</span> <span class="n">h</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">P</span> <span class="o">(</span><span class="n">classical.some</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span> <span class="n">classical.some_spec</span> <span class="n">h</span>
</pre></div>
</div>
</div><p>Given <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">P</span> <span class="pre">x</span></code>, the value of <code class="docutils literal notranslate"><span class="pre">classical.some</span> <span class="pre">h</span></code>
is some <code class="docutils literal notranslate"><span class="pre">x</span></code> satisfying <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">x</span></code>.
The theorem <code class="docutils literal notranslate"><span class="pre">classical.some_spec</span> <span class="pre">h</span></code> says that <code class="docutils literal notranslate"><span class="pre">classical.some</span> <span class="pre">h</span></code>
meets this specification.</p>
<p>With these in hand, we can define the inverse function
as follows:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.function%20tactic%0A%0Avariables%20%7B%CE%B1%20%CE%B2%20%3A%20Type*%7D%20%5Binhabited%20%CE%B1%5D%0A%0Anoncomputable%20theory%0Aopen_locale%20classical%0A%0Adef%20inverse%20(f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20%3A%20%CE%B2%20%E2%86%92%20%CE%B1%20%3A%3D%0A%CE%BB%20y%20%3A%20%CE%B2%2C%20if%20h%20%3A%20%E2%88%83%20x%2C%20f%20x%20%3D%20y%20then%20classical.some%20h%20else%20default%20%CE%B1%0A%0Atheorem%20inverse_spec%20%7Bf%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%7D%20(y%20%3A%20%CE%B2)%20(h%20%3A%20%E2%88%83%20x%2C%20f%20x%20%3D%20y)%20%3A%0A%20%20f%20(inverse%20f%20y)%20%3D%20y%20%3A%3D%0Abegin%0A%20%20rw%20inverse%2C%20dsimp%2C%20rw%20dif_pos%20h%2C%0A%20%20exact%20classical.some_spec%20h%0Aend" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_1280.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">data.set.function</span> <span class="n">tactic</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">&#945;</span> <span class="n">&#946;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">inhabited</span> <span class="n">&#945;</span><span class="o">]</span>

<span class="kd">noncomputable theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kd">def</span> <span class="n">inverse</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#946;</span><span class="o">)</span> <span class="o">:</span> <span class="n">&#946;</span> <span class="bp">&#8594;</span> <span class="n">&#945;</span> <span class="o">:=</span>
<span class="bp">&#955;</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#946;</span><span class="o">,</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="k">then</span> <span class="n">classical.some</span> <span class="n">h</span> <span class="k">else</span> <span class="n">default</span> <span class="n">&#945;</span>

<span class="kd">theorem</span> <span class="n">inverse_spec</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#946;</span><span class="o">}</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">&#946;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">f</span> <span class="o">(</span><span class="n">inverse</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">inverse</span><span class="o">,</span> <span class="n">dsimp</span><span class="o">,</span> <span class="n">rw</span> <span class="n">dif_pos</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">classical.some_spec</span> <span class="n">h</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>The lines <code class="docutils literal notranslate"><span class="pre">noncomputable</span> <span class="pre">theory</span></code> and <code class="docutils literal notranslate"><span class="pre">open_locale</span> <span class="pre">classical</span></code>
are needed because we are using classical logic in an essential way.
On input <code class="docutils literal notranslate"><span class="pre">y</span></code>, the function <code class="docutils literal notranslate"><span class="pre">inverse</span> <span class="pre">f</span></code>
returns some value of <code class="docutils literal notranslate"><span class="pre">x</span></code> satisfying <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></code> if there is one,
and a default element of <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> otherwise.
This is an instance of a <em>dependent if</em> construction,
since in the positive case, the value returned,
<code class="docutils literal notranslate"><span class="pre">classical.some</span> <span class="pre">h</span></code>, depends on the assumption <code class="docutils literal notranslate"><span class="pre">h</span></code>.
The identity <code class="docutils literal notranslate"><span class="pre">dif_pos</span> <span class="pre">h</span></code> rewrites <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">h</span> <span class="pre">:</span> <span class="pre">e</span> <span class="pre">then</span> <span class="pre">a</span> <span class="pre">else</span> <span class="pre">b</span></code>
to <code class="docutils literal notranslate"><span class="pre">a</span></code> given <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">e</span></code>,
and, similarly, <code class="docutils literal notranslate"><span class="pre">dif_neg</span> <span class="pre">h</span></code> rewrites it to <code class="docutils literal notranslate"><span class="pre">b</span></code> given <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">&#172;</span> <span class="pre">e</span></code>.
The theorem <code class="docutils literal notranslate"><span class="pre">inverse_spec</span></code> says that <code class="docutils literal notranslate"><span class="pre">inverse</span> <span class="pre">f</span></code>
meets the first part of this specification.</p>
<p>Don&#8217;t worry if you do not fully understand how these work.
The theorem <code class="docutils literal notranslate"><span class="pre">inverse_spec</span></code> alone should be enough to show
that <code class="docutils literal notranslate"><span class="pre">inverse</span> <span class="pre">f</span></code> is a left inverse if and only if <code class="docutils literal notranslate"><span class="pre">f</span></code> is injective
and a right inverse if and only if <code class="docutils literal notranslate"><span class="pre">f</span></code> is surjective.
Look up the definition of <code class="docutils literal notranslate"><span class="pre">left_inverse</span></code> and <code class="docutils literal notranslate"><span class="pre">right_inverse</span></code>
by double-clicking or right-clicking on them in VS Code,
or using the commands <code class="docutils literal notranslate"><span class="pre">#print</span> <span class="pre">left_inverse</span></code> and <code class="docutils literal notranslate"><span class="pre">#print</span> <span class="pre">right_inverse</span></code>.
Then try to prove the two theorems.
They are tricky!
It helps to do the proofs on paper before
you start hacking through the details.
You should be able to prove each of them with about a half-dozen
short lines.
If you are looking for an extra challenge,
try to condense each proof to a single-line proof term.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.function%20tactic%0A%0Aopen%20set%20function%0A%0Avariables%20%7B%CE%B1%20%CE%B2%20%3A%20Type*%7D%20%5Binhabited%20%CE%B1%5D%0A%0Anoncomputable%20theory%0Aopen_locale%20classical%0A%0Adef%20inverse%20(f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20%3A%20%CE%B2%20%E2%86%92%20%CE%B1%20%3A%3D%0A%CE%BB%20y%20%3A%20%CE%B2%2C%20if%20h%20%3A%20%E2%88%83%20x%2C%20f%20x%20%3D%20y%20then%20classical.some%20h%20else%20default%20%CE%B1%0A%0Atheorem%20inverse_spec%20%7Bf%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%7D%20(y%20%3A%20%CE%B2)%20(h%20%3A%20%E2%88%83%20x%2C%20f%20x%20%3D%20y)%20%3A%0A%20%20f%20(inverse%20f%20y)%20%3D%20y%20%3A%3D%0Abegin%0A%20%20rw%20inverse%2C%20dsimp%2C%20rw%20dif_pos%20h%2C%0A%20%20exact%20classical.some_spec%20h%0Aend%0A%0A--%20BEGIN%0Avariable%20%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0A%0Aexample%20%3A%20injective%20f%20%E2%86%94%20left_inverse%20(inverse%20f)%20f%20%20%3A%3D%0Asorry%0A%0Aexample%20%3A%20surjective%20f%20%E2%86%94%20right_inverse%20(inverse%20f)%20f%20%3A%3D%0Asorry%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_1329.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span>  <span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#946;</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">&#8596;</span> <span class="n">left_inverse</span> <span class="o">(</span><span class="n">inverse</span> <span class="n">f</span><span class="o">)</span> <span class="n">f</span>  <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">&#8596;</span> <span class="n">right_inverse</span> <span class="o">(</span><span class="n">inverse</span> <span class="n">f</span><span class="o">)</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div><p>We close this section with a type-theoretic statement of Cantor&#8217;s
famous theorem that there is no surjective function from a set
to its power set.
See if you can understand the proof,
and then fill in the two lines that are missing.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.set.basic%0A%0Aopen%20function%0A%0Avariable%20%7B%CE%B1%20%3A%20Type*%7D%0A%0A--%20BEGIN%0Atheorem%20Cantor%20%3A%20%E2%88%80%20f%20%3A%20%CE%B1%20%E2%86%92%20set%20%CE%B1%2C%20%C2%AC%20surjective%20f%20%3A%3D%0Abegin%0A%20%20intros%20f%20surjf%2C%0A%20%20let%20S%20%3A%3D%20%7B%20i%20%7C%20i%20%E2%88%89%20f%20i%7D%2C%0A%20%20rcases%20surjf%20S%20with%20%E2%9F%A8j%2C%20h%E2%9F%A9%2C%0A%20%20have%20h%E2%82%81%20%3A%20j%20%E2%88%89%20f%20j%2C%0A%20%20%7B%20intro%20h'%2C%0A%20%20%20%20have%20%3A%20j%20%E2%88%89%20f%20j%2C%0A%20%20%20%20%20%20%7B%20by%20rwa%20h%20at%20h'%20%7D%2C%0A%20%20%20%20contradiction%20%7D%2C%0A%20%20have%20h%E2%82%82%20%3A%20j%20%E2%88%88%20S%2C%0A%20%20%20%20sorry%2C%0A%20%20have%20h%E2%82%83%20%3A%20j%20%E2%88%89%20S%2C%0A%20%20%20%20sorry%2C%0A%20%20contradiction%0Aend%0A--%20END" target="_blank" tryitfile="../examples/sets_functions_and_relations/unnamed_1422.lean">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span> <span class="n">Cantor</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">set</span> <span class="n">&#945;</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">surjective</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">f</span> <span class="n">surjf</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">S</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">i</span> <span class="bp">|</span> <span class="n">i</span> <span class="bp">&#8713;</span> <span class="n">f</span> <span class="n">i</span><span class="o">},</span>
  <span class="n">rcases</span> <span class="n">surjf</span> <span class="n">S</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">j</span><span class="o">,</span> <span class="n">h</span><span class="o">&#10217;,</span>
  <span class="k">have</span> <span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">j</span> <span class="bp">&#8713;</span> <span class="n">f</span> <span class="n">j</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">j</span> <span class="bp">&#8713;</span> <span class="n">f</span> <span class="n">j</span><span class="o">,</span>
      <span class="o">{</span> <span class="kd">by</span> <span class="n">rwa</span> <span class="n">h</span> <span class="n">at</span> <span class="n">h&#39;</span> <span class="o">},</span>
    <span class="n">contradiction</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">h&#8322;</span> <span class="o">:</span> <span class="n">j</span> <span class="bp">&#8712;</span> <span class="n">S</span><span class="o">,</span>
    <span class="n">sorry</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h&#8323;</span> <span class="o">:</span> <span class="n">j</span> <span class="bp">&#8713;</span> <span class="n">S</span><span class="o">,</span>
    <span class="n">sorry</span><span class="o">,</span>
  <span class="n">contradiction</span>
<span class="kd">end</span>
</pre></div>
</div>
</div></div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Mathematics in Lean</a></h1>








<!-- <h3>Navigation</h3> -->
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">2. Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="logic.html">3. Logic</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Sets and Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#sets">4.1. Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functions">4.2. Functions</a></li>
</ul>
</li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="genindex.html">Index</a></li>
    
    <li class="toctree-l1"><a href="mathematics_in_lean.pdf">PDF version</a></li>
    
    <li class="toctree-l1"><a href="https://leanprover.github.io/">Lean Home</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Jeremy Avigad, Kevin Buzzard, Robert Y. Lewis, Patrick Massot.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/sets_functions_and_relations.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>